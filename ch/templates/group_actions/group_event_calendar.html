{% include 'header.html' %}



{% load static %}
<br>
<br>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ group.name }} Events</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- FullCalendar v3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.css" rel="stylesheet" />
</head>
<body>

    <section class="text-center py-5 bg-light">
        <div class="d-flex justify-content-center align-items-center mb-4" style="gap: 10px;">
            <img src="https://assets.calendly.com/assets/frontend/media/managed_ets_icon-aee627814d6311a08b97.svg" 
                class="img-fluid rounded-circle shadow-sm" 
                alt="Event Icon" 
                style="max-width: 70px; background-color: #f8f9fa; padding: 10px;">
        </div>
        <div>
            <h1 class="display-6 mb-3" style="font-weight: 600; color: #2c3e50;">
                Join Your Group's Events Seamlessly
            </h1>
            <p class="text-muted" style="font-size: 0.95rem; max-width: 500px; margin: 0 auto; line-height: 1.5;">
                Didn't book this event? No worries! You can still join, but keep in mind that missed attendance may affect your performance scores.
            </p>
        </div>
    </section>
    



    <div class="container mt-5">
        <h1 class="mb-4" style="text-transform: uppercase; font-weight: bold; font-size: 2rem; background-image: linear-gradient(to right, #f8a5d3, #a2c2e3); -webkit-background-clip: text; color: transparent;">
            {{ group.name }} Events
        </h1>
        
        <div id="calendar" class="container py-5 shadow-lg rounded-3 bg-light border border-0 border-secondary">
            <div class="d-flex justify-content-between align-items-center mb-4">
             
            </div>
            <!-- FullCalendar will be inserted here -->
        </div>
        
    </div>


   



    <!-- FullCalendar v3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.js"></script>

    <!-- Bootstrap 5 JS (for modal functionality) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <!-- Modal for Event Details -->
    <div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h4 id="eventTitle"></h4>
                    <p id="eventDescription"></p>
                    <p><strong>Location:</strong> <span id="eventLocation"></span></p>
                    <p><strong>Date:</strong> <span id="eventDate"></span></p>
                    <p><strong>Time:</strong> <span id="eventTime"></span></p>
                    <!-- Join Button -->
                    <button id="joinButton" class="btn btn-primary" style="display: none;" onclick="window.location.href=''">Join Meeting</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                events: [
                    {% for event in events %}
                    {
                        title: '{{ event.title }}',
                        start: '{{ event.start }}',  // ISO format (YYYY-MM-DDTHH:MM:SS)
                        end: '{{ event.end }}',      // ISO format (YYYY-MM-DDTHH:MM:SS)
                        extendedProps: {
                            description: '{{ event.description }}',
                            location: '{{ event.location }}',
                            meeting_link: '{{ event.meeting_link }}'  // Add meeting link here
                        }
                    },
                    {% endfor %}
                ],
                eventClick: function(info) {
                    // Check if extendedProps is available
                    if (info.extendedProps) {
                        // Populate modal with event details
                        $('#eventTitle').text(info.title);
                        $('#eventDescription').text(info.extendedProps.description || 'No description provided');
                        $('#eventLocation').text(info.extendedProps.location || 'No location specified');
                        $('#eventDate').text(moment(info.start).format('MMMM Do YYYY'));
                        $('#eventTime').text(moment(info.start).format('h:mm A') + ' - ' + moment(info.end).format('h:mm A'));

                        // Set the meeting link in the Join button
                        var meetingLink = info.extendedProps.meeting_link;
                        if (meetingLink) {
                            $('#joinButton').show();
                            $('#joinButton').attr('onclick', 'window.location.href="' + meetingLink + '"');
                        } else {
                            $('#joinButton').hide();
                        }

                        // Show the modal
                        $('#eventModal').modal('show');
                    } else {
                        console.error('No extendedProps found for event');
                    }
                },
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                }
            });
        });
    </script>
</body>
</html>







