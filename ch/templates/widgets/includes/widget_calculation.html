


<div id="calculation-widget" class="relative rounded-xl border p-4 shadow bg-white">
    <!-- Fullscreen Icon -->
    <button onclick="openFullScreenWidget('calculation-widget')" class="absolute top-2 right-2 text-gray-500 hover:text-indigo-600">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 4h6M4 4v6M20 20h-6M20 20v-6M4 20h6M4 20v-6M20 4h-6M20 4v6" />
      </svg>
    </button>
  
    <h3 class="text-lg font-semibold mb-3 text-indigo-600">ðŸ“Š Your Stats Summary</h3>
    <ul class="space-y-1 text-sm">
      <li>âœ… Total Tasks: <span id="total-tasks-count" class="font-medium text-gray-800">--</span></li>
      <li>ðŸ“… Total Meetings: <span id="total-meetings-count" class="font-medium text-gray-800">--</span></li>
      <li>ðŸŽ‰ Total Events: <span id="total-events-count" class="font-medium text-gray-800">--</span></li>
      <li>ðŸ“Œ Total Bookings: <span id="total-bookings-count" class="font-medium text-gray-800">--</span></li>
    </ul>
    <button onclick="fetchAndRenderTaskAnalytics(window.djangoData.orgId)" class="text-sm mt-3 px-3 py-1.5 bg-rose-600 text-white rounded hover:bg-rose-700 transition">
        ðŸ“Œ Load Task Analytics
    </button>
      
  </div>
  
<script type="text/javascript">
    // Inject Django variables into the window object
    window.djangoData = {
        orgId: "{{ organization.id }}",
    };
</script>


<!-- MODALS --------------------------------------------------------------------------------------------------------------------------- -->
<!-- Task Analytics Modal -->
<!-- Task Analytics Modal - ClickUp Style -->
<div class="modal fade" id="taskAnalyticsModal" tabindex="-1" aria-labelledby="taskAnalyticsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content rounded-xl shadow-xl border border-gray-200">
            <!-- Header with ClickUp-style gradient -->
            <div class="modal-header border-b-2 border-indigo-500 px-6 py-4">
                <div class="flex items-center justify-between w-full">
                    <h5 class="modal-title text-2xl font-semibold text-gray-800 flex items-center">
                        <svg class="w-6 h-6 text-indigo-600 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 3.055A9.001 9.001 0 0021 12h-9v9a9.001 9.001 0 01-9-9 9 9 0 018-8.945z" />
                        </svg>
                        Task overview across all groups in this workspace
                      </h5>
                      
                    <button type="button" class="p-2 hover:bg-gray-100 rounded-lg transition-colors" data-bs-dismiss="modal" aria-label="Close">
                        <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Modal Body -->
            <div class="modal-body p-0 bg-gray-50/50">
                <div id="task-analytics-modal-body" class="p-6">
                    <!-- Loading state remains here -->
                    <div class="h-96 flex items-center justify-center">
                        <div class="text-center text-gray-400">
                            <div class="animate-spin mb-4">
                                <svg class="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"/>
                                </svg>
                            </div>
                            <p class="text-sm font-medium">Gathering insights...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>