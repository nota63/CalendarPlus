
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    
    <!-- Recent Tabs Modal -->
     <!-- Add these CDN links in your head section -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@material-design-icons/font@latest/outlined.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <!-- Bootstrap (For Modal) -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <title>Organization Detail</title>
     <input type="hidden" id="organizationId" value="{{ organization.id }}">
     <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'workspace/org.css'%}">

    <!-- Google Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- onboarding js set-up -->
    <!-- Intro.js CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
    <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>

    <!-- Your onboarding JSON config -->
    <script src="{% static 'workspace/onboarding_guide.js' %}"></script>
    <!-- html to canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>


</head>
<!-- -------------------------------------------------------------------------------------------------------------------------------------- -->
<style>
/* header styles */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
body {
  font-family: 'Inter', sans-serif;
}
.dropdown-content {
  display: none;
  position: absolute;
  min-width: 200px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  z-index: 100;
}
.dropdown:hover .dropdown-content {
  display: block;
}
/* header shadows */
header {
    box-shadow: none !important;
}


/* all modal styles */
  /* Base Styles */
  body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

/* Modal Backdrop Blur */
.modal-backdrop.show {
  backdrop-filter: blur(8px);
  background-color: rgba(0, 0, 0, 0.2);
  opacity: 1 !important;
}

/* Main Modal Container */
.modal {
  backdrop-filter: blur(12px);
}

/* Modal Content Styling */
.modal-content {
  background: rgba(255, 255, 255, 0.75);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
  box-shadow: 
    0 8px 32px 0 rgba(31, 38, 135, 0.15),
    0 4px 16px rgba(0, 0, 0, 0.05);
  backdrop-filter: blur(20px);
  transform: scale(0.97);
  transition: all 0.3s ease;
}

.modal.show .modal-content {
  transform: scale(1);
}

/* Modal Header */
.modal-header {
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  padding: 1.25rem 2rem;
}

.modal-title {
  font-weight: 600;
  color: #1a1a1a;
  font-size: 1.25rem;
}

/* Modal Body */
.modal-body {
  padding: 1.5rem 2rem;
  color: #4a4a4a;
  line-height: 1.6;
}

/* Modal Footer */
.modal-footer {
  border-top: 1px solid rgba(0, 0, 0, 0.08);
  padding: 1rem 2rem;
  gap: 0.75rem;
}

/* Close Button Customization */
.btn-close {
  opacity: 0.6;
  transition: all 0.2s ease;
  filter: invert(0.3);
}

.btn-close:hover {
  opacity: 1;
  transform: rotate(90deg);
}

/* Custom Button Styles */
.modal-footer .btn {
  padding: 0.625rem 1.5rem;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.btn-primary {
  background: rgba(59, 130, 246, 0.9);
  backdrop-filter: blur(4px);
  color: white;
}

.btn-primary:hover {
  background: rgba(59, 130, 246, 1);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
}

.btn-secondary {
  background: rgba(243, 244, 246, 0.9);
  backdrop-filter: blur(4px);
  color: #1f2937;
}

.btn-secondary:hover {
  background: rgba(229, 231, 235, 0.9);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

/* Neuomorphic Effect on Focus */
.modal-content:focus-within {
  box-shadow: 
    0 8px 32px 0 rgba(31, 38, 135, 0.15),
    0 0 0 2px rgba(59, 130, 246, 0.3);
}

/* Responsive Tweaks */
@media (max-width: 576px) {
  .modal-content {
    margin: 0.5rem;
    border-radius: 12px;
  }
}
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.15);
    }

    .font-roboto {
        font-family: 'Roboto', sans-serif;
    }
</style>
<!-- ---------------------------------------------------------------------------------------------------------------------------------------- -->


<body class="bg-gray-100 font-sans">

   
<!-- ------------------------------------------------------------------------------------------------------------------------------ -->
<!-- Sidebar ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<style>
 /* General Sidebar Button Styling */
.sidebar-btn {
    padding: 10px 10px; /* Increased padding for better clickability */
    font-size: 1.1rem; /* Slightly larger text */
}

/* Small Circle Indicator */
.sidebar-btn .indicator {
    width: 10px; /* Slightly larger dot */
    height: 10px;
}

</style>
<!-- Modern SaaS Sidebar inspired by ClickUp -->
<!-- Sidebar --------------------------------------------------------------------------------------------------------------> 

<!-- ClickUp-inspired Feature-Rich Sidebar with Full Tailwind Styling -->
<div class="fixed top-0 left-0 h-screen w-64 bg-white shadow-lg border-r border-gray-100 flex flex-col overflow-hidden transition-all duration-300 ease-in-out">
    <!-- Organization Switcher Header -->
    <div class="px-3 py-2.5 flex items-center justify-between border-b border-gray-100">

        <div class="flex items-center">
                {% if organization.icon %}
                  <img src="{{organization.icon.url}}" alt="Organization Logo" class="h-7 w-7 rounded-md">
                {% else %}
                  <div class="h-7 w-7 rounded-md bg-violet-600 flex items-center justify-center">
                    <span class="text-white font-bold text-sm">{{organization.name|slice:":1"}}</span>
                  </div>
                {% endif %}

        <div class="ml-2 flex-1 overflow-hidden">
          <h2 class="text-gray-900 font-semibold text-sm truncate">{{organization.name}}</h2>
        </div>
      </div>
      <button class="group p-1 rounded hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400 group-hover:text-gray-600" fill="currentColor" viewBox="0 0 16 16">
          <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
        </svg>
      </button>
    </div>
    
    <!-- Search Bar -->
    <div class="px-3 py-2 border-b border-gray-100">
      <div class="relative rounded-md shadow-sm">
        <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>
        <input type="text" placeholder="Search..." class="block w-full pl-8 pr-3 py-1.5 text-xs border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500">
      </div>
    </div>
  
    <!-- Main Sidebar Content - Scrollable Area -->
    <div class="flex-1 overflow-y-auto thin-scrollbar">
      <!-- Home Section -->
      <div class="pt-2">
        <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-gray-100 group no-underline transition-colors duration-150 sidebar-btn" >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2.5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
          <span class="text-sm font-medium">Home</span>
        </a>
      </div>
  
      <!-- Favorites Section with Toggle -->
      <div class="mt-3">
        <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
            <span>Favorites</span>
          </div>
          <button class="group hover:bg-gray-200 p-0.5 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
        </div>
        
        <!-- Favorite Items -->
        <div class="space-y-0.5 mt-1 pl-2">
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-gray-100 group no-underline transition-colors duration-150 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
            <span class="text-sm font-medium">Quick Tasks</span>
          </a>
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-gray-100 group no-underline transition-colors duration-150 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-purple-500 mr-2.5"></div>
            <span class="text-sm font-medium">Important Projects</span>
          </a>
        </div>
      </div>
  
      <!-- Main Navigation Sections -->
      <div class="mt-3">
        <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
            <span>Workspaces</span>
          </div>
          <button class="group hover:bg-gray-200 p-0.5 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
          </button>
        </div>
  
        <!-- Primary Navigation Items -->
        <div class="space-y-0.5 mt-1">
          <!-- Meetings & NLP -->
          <a href="{% url 'meeting_list' org_id=organization.id %}" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-violet-50 hover:text-violet-600 group no-underline active:bg-violet-100 transition-colors duration-150 sidebar-btn" id="meetingBtn" 
          >
            <div class="w-2 h-2 rounded-full bg-violet-500 mr-2.5"></div>
            <span class="text-sm font-medium">Meetings & NLP</span>
          </a>
  
          <!-- Recent Tabs -->
          <button id="openRecentTabsModal" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
            <span class="text-sm font-medium">Recent Tabs</span>
          </button>

          <a href="#"
          class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
          <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
             <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn" data-bs-toggle="modal" data-bs-target="#editProfileModal">
                <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                <span class="text-sm font-medium">Manage Profile</span>
              </button>
         </span>
       </a>
      
 <!-- Projects -->
<!-- -----------------------ADMIN CONTROLS--------------------------------------------------------------------------- -->
        {% if is_admin %}
            <!-- Main Navigation Sections -->
            <div class="mt-3">
                <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>
                    <span>Admin controls</span>
                </div>
                <button class="group hover:bg-gray-200 p-0.5 rounded">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                    </svg>
                </button>
                </div>
        
            <!-- projects -->
            <a href="{% url 'project_views_others' organization.id %}" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-orange-50 hover:text-orange-600 group no-underline active:bg-orange-100 transition-colors duration-150 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-orange-500 mr-2.5"></div>
                <span class="text-sm font-medium">Projects</span>
                <div class="ml-auto px-1.5 py-0.5 text-xs rounded-full bg-gray-100 text-gray-600">3</div>
            </a>
            <!-- manage availability -->
            <a href="{% url 'organization_availability' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="manageAvailabilityBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Manage Availability</span>
                    </button>
                </span>
            </a>
            <!-- organization holidays -->
            <a href="{% url 'organization_holidays' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="holidaysBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Workspace Holidays</span>
                    </button>
                </span>
            </a>
            <!-- project list -->
            <a href="{% url 'project_list' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Projects</span>
                </button>
                </span>
            </a>
            <!-- manage workspace members -->
            <a href="{% url 'manage_members' organization.id %}" 
                id="manageMembersBtn"
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" id="manageTeamBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Manage Members</span>
                </button>
                </span>
            </a>
            <!-- calendars -->
            <a href="{% url 'organizations_members' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-green-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" id="teamCalendarsBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-green-50 hover:text-green-600 group transition-colors duration-150 active:bg-green-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Calendars</span>
                </button>
                </span>
            </a>
            <!-- user meeting calendar -->
            <a href="{% url 'user_meetings_calendar' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-indigo-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="mycalendarBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                        <span class="text-sm font-medium">My Calendar</span>
                    </button>
                </span>
                </a>
                <!-- user events -->
                <a href="{% url 'user-events' organization.id %}" 
                        class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-indigo-500">
                        <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                        <button type="button" id="myeventsBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                            <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                            <span class="text-sm font-medium">Events & Bookings</span>
                        </button>
                        </span>
                </a>
                <!-- security -->
                <a href="{% url 'security' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-red-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="securityBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-red-50 hover:text-red-600 group transition-colors duration-150 active:bg-red-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-red-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Security</span>
                    </button>
                    </span>
                </a>
                <!-- managed workflows -->
                <a href="{% url 'managed_workflows' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-indigo-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="manageworkflowBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Managed Workflows</span>
                    </button>
                    </span>
                </a>
                <!-- contacts -->
                <a href="{% url 'contacts_list' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-green-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-green-50 hover:text-green-600 group transition-colors duration-150 active:bg-green-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Contacts</span>
                    </button>
                    </span>
                </a>
                <!-- display groups -->
                <a href="{% url 'display_groups' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-purple-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="workspaceGroups" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-purple-50 hover:text-purple-600 group transition-colors duration-150 active:bg-purple-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-purple-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Organization Groups</span>
                    </button>
                    </span>
                </a>
                <!-- organization channels -->
              
                <!-- workspace channels -->
                <a href="{% url 'channels_list' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Workspace Channels</span>
                    </button>
                    </span>
                </a>
                <!-- miniapps -->
                <a href="{% url 'purchase_apps' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-indigo-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" id="miniappsBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                        <span class="text-sm font-medium">App Marketplace</span>
                    </button>
                    </span>
                </a>
                <!-- Google calendar -->
                {% if connected_apps %}
                    <a href="{% url 'google_calendar_view' %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                        <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                            <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                            <span class="text-sm font-medium">Google Calendar</span>
                        </button>
                    </span>
                    </a>
                {% else %}
                    <a href="{% url 'google_calendar_view' %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-purple-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                        <button type="button" id="connectGoogleBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-purple-50 hover:text-purple-600 group transition-colors duration-150 active:bg-purple-100 sidebar-btn">
                            <div class="w-2 h-2 rounded-full bg-purple-500 mr-2.5"></div>
                            <span class="text-sm font-medium">Connect Apps</span>
                        </button>
                    </span>
                    </a>
                  </div>
                </div>
                {% endif %}

        {% elif is_manager %}
  
          <!-- Dashboard -->
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-green-50 hover:text-green-600 group no-underline active:bg-green-100 transition-colors duration-150 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
            <span class="text-sm font-medium">Dashboard</span>
          </a>
          <!-- manager controls -->
            <!-- Main Navigation Sections -->
            <div class="mt-3">
                <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>
                    <span>Manager controls</span>
                </div>
                <button class="group hover:bg-gray-200 p-0.5 rounded">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                    </svg>
                </button>
            </div>
            <!-- cntrols -->
            <a href="{% url 'project_views_others' organization.id %}" 
                    class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                    <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                    <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-blue-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Projects</span>
                    </button>
                    </span>
            </a>
            <!-- manage availability -->
            <a href="{% url 'organization_availability' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-blue-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-blue-50 hover:text-blue-600 group transition-colors duration-150 active:bg-blue-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Manage Availability</span>
                </button>
                </span>
            </a>
            <!-- workpsace holidays -->
            <a href="{% url 'organization_holidays' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-red-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-red-50 hover:text-red-600 group transition-colors duration-150 active:bg-red-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-red-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Workspace Holidays</span>
                </button>
                </span>
            </a>
            <!-- manage members -->
            <a href="{% url 'manage_members' organization.id %}" 
                class="flex items-center space-x-2 text-gray-800 transition duration-300 hover:text-indigo-500">
                <span class="font-medium text-[14px]" style="font-family: 'Inter', sans-serif;">
                <button type="button" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Manage Members</span>
                </button>
                </span>
            </a>
            <!-- calendars -->
            <a href="{% url 'organizations_members' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">Calendars</span>
            </a>
            <!-- user events -->
            <a href="{% url 'user-events' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">Events & Bookings</span>
            </a>
            <!-- contacts -->
            <a href="{% url 'contacts_list' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
                <span class="text-sm font-medium">Contacts</span>
            </a>
            <!-- user groups -->
            <a href="{% url 'user_groups' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">Groups & Workflows</span>
            </a>
            <!-- channels -->
            <a href="{% url 'channels_list' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">Workspace Channels</span>
            </a>
            <!-- user calendar -->
            <a href="{% url 'user_meetings_calendar' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">My Calendar</span>
            </a>
            <!-- cal-apps -->
            <a href="{% url 'purchase_apps' organization.id %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                    hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                <span class="text-sm font-medium">App Marketplace</span>
            </a>
            <!-- google calendar -->
            {% if connected_apps %}
                <a href="{% url 'google_calendar_view' %}" 
                class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                        hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                    <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                    <span class="text-sm font-medium">Google Calendar</span>
                </a>
            {% else %}
                    <a href="{% url 'google_calendar_view' %}" 
                    class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                            hover:bg-purple-50 hover:text-purple-600 group transition-colors duration-150 active:bg-purple-100 sidebar-btn">
                        <div class="w-2 h-2 rounded-full bg-purple-500 mr-2.5"></div>
                        <span class="text-sm font-medium">Connect Apps</span>
                    </a>
            {% endif %}

        </div>
        </div>
      <!-- Employee Controls  -->
      {% else %}
      <!-- Main Navigation Sections -->
      <div class="mt-3">
        <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
            <span>Employee Controls</span>
        </div>
        <button class="group hover:bg-gray-200 p-0.5 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
        </button>
        </div>
    </div>
    <!-- btns & controls -->
    <a href="{% url 'project_views_others' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Projects</span>
    </a>
    <!-- Holidays -->
    <a href="{% url 'organization_holidays' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Workspace Holidays</span>
    </a>
    <!-- manage availability -->
    <a href="{% url 'organization_availability' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Manage Availability</span>
    </a>
    <!-- calendars -->
    <a href="{% url 'organizations_members' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-green-50 hover:text-green-600 group transition-colors duration-150 active:bg-green-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
        <span class="text-sm font-medium">Calendars</span>
    </a>
    <!-- events and bookings -->
    <a href="{% url 'user-events' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Events & Bookings</span>
    </a>
    <!-- contacts -->
    <a href="{% url 'contacts_list' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-green-50 hover:text-green-600 group transition-colors duration-150 active:bg-green-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-green-500 mr-2.5"></div>
        <span class="text-sm font-medium">Contacts</span>
    </a>
    <!-- groups -->
    <a href="{% url 'user_groups' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Groups & Workflows</span>
    </a>
    <!-- channels -->
    <a href="{% url 'channels_list' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">Workspace Channels</span>
    </a>
    <!-- user calendar -->
    <a href="{% url 'user_meetings_calendar' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">My Calendar</span>
    </a>
    <!-- cal-apps -->
    <a href="{% url 'purchase_apps' organization.id %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
            hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
        <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
        <span class="text-sm font-medium">App Marketplace</span>
    </a>
    <!-- google calendar -->
    {% if connected_apps %}
        <a href="{% url 'google_calendar_view' %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
            <span class="text-sm font-medium">Google Calendar</span>
        </a>
    {% else %}
        <a href="{% url 'google_calendar_view' %}" 
        class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 
                hover:bg-purple-50 hover:text-purple-600 group transition-colors duration-150 active:bg-purple-100 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-purple-500 mr-2.5"></div>
            <span class="text-sm font-medium">Connect Apps</span>
        </a>
    {% endif %}

</div>
    {% endif %}

      <div class="mt-4">
        <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
            </svg>
            
          </div>
          <button class="group hover:bg-gray-200 p-0.5 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-gray-400 group-hover:text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
        </div>
  
        <div class="space-y-0.5 mt-1">
    
          <!-- Admin Tools -->
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-red-50 hover:text-red-600 group no-underline active:bg-red-100 transition-colors duration-150">
            <div class="w-2 h-2 rounded-full bg-red-500 mr-2.5"></div>
            <span class="text-sm font-medium">User Management</span>
          </a>
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group no-underline active:bg-indigo-100 transition-colors duration-150">
            <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
            <span class="text-sm font-medium">Organization Settings</span>
          </a>
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-teal-50 hover:text-teal-600 group no-underline active:bg-teal-100 transition-colors duration-150">
            <div class="w-2 h-2 rounded-full bg-teal-500 mr-2.5"></div>
            <span class="text-sm font-medium">Analytics</span>
            <div class="ml-auto h-1.5 w-1.5 rounded-full bg-blue-500"></div>
          </a>
       
          <!-- Manager Tools -->
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group no-underline active:bg-indigo-100 transition-colors duration-150">
            <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
            <span class="text-sm font-medium">Team Analytics</span>
          </a>
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-teal-50 hover:text-teal-600 group no-underline active:bg-teal-100 transition-colors duration-150">
            <div class="w-2 h-2 rounded-full bg-teal-500 mr-2.5"></div>
            <span class="text-sm font-medium">Team Management</span>
          </a>
        </div>
      </div>

      <!-- Shared Resources Section -->
      <div class="mt-4">
        <div class="flex items-center justify-between px-3 py-1.5 text-xs font-medium text-gray-500 uppercase tracking-wider">
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <span>Shared</span>
          </div>
          <button class="group hover:bg-gray-200 p-0.5 rounded">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-gray-400 group-hover:text-gray-600 sidebar-btn" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
        </div>
  
        <div class="space-y-0.5 mt-1">
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-gray-100 group no-underline transition-colors duration-150 active:bg-gray-200 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-gray-500 mr-2.5"></div>
            <span class="text-sm font-medium">Team Documents</span>
          </a>
          <a href="#" class="flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-gray-100 group no-underline transition-colors duration-150 active:bg-gray-200 sidebar-btn">
            <div class="w-2 h-2 rounded-full bg-gray-500 mr-2.5"></div>
            <span class="text-sm font-medium">Resources</span>
          </a>
        </div>
      </div>
  
      <!-- Space for additional sections -->
      <div class="h-8"></div>
</div>
  
    <!-- Bottom Action Bar -->
    <div class="border-t border-gray-100 bg-gray-50">
        <!-- User Profile -->
        <button type="button" data-bs-toggle="modal" data-bs-target="#editProfileModal" class="w-full flex items-center px-3 py-2.5 hover:bg-gray-100 transition-all duration-150 group">
          <div class="flex-shrink-0">
            <div class="h-7 w-7 rounded-full bg-violet-100 flex items-center justify-center text-violet-700 font-medium text-xs">
              {{user.first_name|slice:":1"}}{{user.last_name|slice:":1"}}
            </div>
          </div>
          <div class="ml-2 flex-1 overflow-hidden">
            <p class="text-xs font-medium text-gray-800 truncate">{{user.first_name}} {{user.last_name}}</p>
            <p class="text-xs text-gray-500 truncate">{{user.email}}</p>
          </div>
          <div class="flex space-x-1">
            <button class="p-1 rounded-full hover:bg-gray-200 sidebar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
              </svg>
            </button>
            <button class="p-1 rounded-full hover:bg-gray-200 sidebar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </button>
          </div>
        </button>
      </div>
</div>


  <!-- Add this CSS in your styles -->
  <style>
    /* Remove default anchor styling */
    a {
      text-decoration: none;
    }
    
    .thin-scrollbar::-webkit-scrollbar {
      width: 4px;
    }
    
    .thin-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .thin-scrollbar::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.1);
      border-radius: 4px;
    }
    
    .thin-scrollbar::-webkit-scrollbar-thumb:hover {
      background-color: rgba(0, 0, 0, 0.2);
    }
    
    /* Add focus styles for better accessibility */
    a:focus, button:focus {
      outline: 2px solid transparent;
      outline-offset: 2px;
      box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.3);
    }
    
    /* Smooth highlight effect on active menu items */
    a.active {
      background-color: rgba(124, 58, 237, 0.1);
      color: rgb(124, 58, 237);
      font-weight: 500;
    }
  </style>


<!-- Main Content---------------------------------------------------------------------------------------------------------- -->
<!-- Header -->
 <!-- Header Component -->
 <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
    <!-- Main Header -->
    <div class="flex items-center justify-between px-4 h-14">
      <!-- Left Section: Logo and Navigation -->
      <div class="flex items-center space-x-2">
        <!-- Toggle Sidebar Button -->
        <button class="p-2 rounded hover:bg-gray-100 text-gray-600">
          <i class="fas fa-bars text-lg"></i>
        </button>

        <!-- Logo -->
        <div class="flex items-center space-x-1">
          <span class="bg-purple-600 text-white p-1 rounded">
            <i class="fas fa-layer-group"></i>
          </span>
          <span class="font-bold text-lg text-gray-800">WorkSpace</span>
        </div>

        <!-- Main Navigation -->
        <nav class="hidden md:flex items-center ml-6 space-x-1">
          <div class="dropdown">
            <button id="homeBtn" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Home
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              
              <a href="#" id="activitiesBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Activity</a>
              <a href="#" id="recentTabsBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Recent</a>
              <a href="{% url 'initiate_payment' %}" id="premiumPlanBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Upgrade to Premium</a>
              <!-- Trigger Button -->
              <button class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-bs-toggle="modal" data-bs-target="#raiseHelpModal">
                Raise Help Request
              </button>

              
            </div>
          </div>

          <div class="dropdown">
            <button id="projectsShortcuts" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Projects
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">All Projects</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Favorites</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Archived</a>
            </div>
          </div>

          <div class="dropdown">
            <button id="tasksShortcuts" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Tasks
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">My Tasks</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Assigned to me</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Created by me</a>
            </div>
          </div>

          <div class="dropdown">
            <button id="reportsBtn" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Reports
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Overview</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Performance</a>
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Custom Reports</a>
            </div>
          </div>


          {% if is_admin %}
          <div class="dropdown">
            <button id="channelsBtn" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Channels
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" 
                data-bs-toggle="modal" data-bs-target="#createChannelModal">
                Create
              </a>
              <a href="#" id="shutdownBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                Shutdown
              </a> 
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Custom Reports</a>
            </div>
          </div>
          {% endif %}

          <!-- help requests -->
          {% if is_admin %}
          <div class="dropdown">
            <button id="viewworkspacehelprequestsandImpersonateUsers" class="px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md font-medium flex items-center">
              Helps
              <i class="fas fa-chevron-down ml-1 text-xs text-gray-500"></i>
            </button>
            <div class="dropdown-content bg-white rounded-md mt-1 py-1 border border-gray-200">
              <!-- Button -->
              <a href="#" data-bs-toggle="modal" data-bs-target="#OrgHelpRequestReviewModal">
                <button id="openOrgHelpModalBtn" class="w-full text-left flex items-center px-3 py-1.5 mx-2 rounded-md text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 group transition-colors duration-150 active:bg-indigo-100 sidebar-btn">
                  <div class="w-2 h-2 rounded-full bg-indigo-500 mr-2.5"></div>
                  <span class="text-sm font-medium">Review Help Requests</span>
                </button>
              </a>
              
              
            </div>
          </div>
          {% endif %}
          
        </nav>
      </div>

      <!-- Center: Search Bar -->
      <div class="flex-1 max-w-xl px-4" id="searchBarContainerr">
        <div class="relative">
          <input type="text" placeholder="Search everything..." class="w-full pl-10 pr-3 py-2 rounded-md bg-gray-100 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
          <span class="absolute left-3 top-2.5 text-gray-400">
            <i class="fas fa-search"></i>
          </span>
          <span class="absolute right-3 top-2.5 text-gray-400">
            <span class="bg-gray-200 px-1.5 py-0.5 rounded text-xs font-mono">K</span>
          </span>
        </div>
      </div>

      <!-- Right Section: Tools and User Profile -->
      <div class="flex items-center space-x-3">

        <!-- Quick Add Button -->
        <button id="createWorkflowBtn"
              class="p-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center"
              data-bs-toggle="modal"
              data-bs-target="#widgetSelectModal">
              <i class="fas fa-plus"></i>
              <span class="ml-1 font-medium text-sm hidden md:inline">Add card</span>
        </button>

        <!-- Notifications -->
        <button id="notificationsBtnTooltip" class="p-2 rounded hover:bg-gray-100 text-gray-600 relative">
          <i class="fas fa-bell"></i>
          <span class="absolute top-1 right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
        </button>

        <!-- Help -->
        <button class="p-2 rounded hover:bg-gray-100 text-gray-600">
          <i class="fas fa-question-circle"></i>
        </button>

        <!-- Apps -->
        <!-- Installed Apps Button -->
        <button id="openAppsModal" class="p-2 rounded hover:bg-gray-100 text-gray-600"
            data-bs-toggle="modal" data-bs-target="#installedAppsModal" data-org-id="{{ organization.id }}">
            <i class="fas fa-th"></i>
        </button>

        <!-- User Profile -->
        <div class="dropdown">
          <button id="myprofileTooltip" class="flex items-center space-x-2 p-1 rounded hover:bg-gray-100">
            <div class="w-8 h-8 rounded-full bg-purple-200 flex items-center justify-center">
              <span class="text-purple-700 font-medium">JD</span>
            </div>
            <i class="fas fa-chevron-down text-xs text-gray-500 hidden md:block"></i>
          </button>
          <div class="dropdown-content right-0 bg-white rounded-md mt-1 py-1 border border-gray-200">
            <div class="px-4 py-2 border-b border-gray-200">
              <p class="font-medium">John Doe</p>
              <p class="text-sm text-gray-500">john.doe@example.com</p>
            </div>
            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile Settings</a>
            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Theme</a>
            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Notifications</a>
            <div class="border-t border-gray-200">
              <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sub-Header / Breadcrumb -->
    <div class="flex items-center h-10 px-4 bg-gray-50 text-sm" id="currentPath">
      <div class="flex items-center space-x-2 text-gray-600">
        <a href="#" class="hover:text-gray-900">Workspace</a>
        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
        <a href="#" class="hover:text-gray-900">Projects</a>
        <i class="fas fa-chevron-right text-xs text-gray-400"></i>
        <span class="font-medium text-gray-800">Marketing Campaign</span>
      </div>
      <div class="ml-auto flex items-center space-x-3">
        <button class="flex items-center text-gray-600 hover:text-gray-900">
          <i class="fas fa-star"></i>
        </button>
        <button class="flex items-center text-gray-600 hover:text-gray-900">
          <i class="fas fa-share-alt"></i>
          <span class="ml-1">Share</span>
        </button>
        <button class="flex items-center text-gray-600 hover:text-gray-900">
          <i class="fas fa-ellipsis-h"></i>
        </button>
      </div>
    </div>
  </header>













<!-- main content goes here -------------------------------------------------------------------------------------------------------------- -->
<div class="main-content">
   


<!--  Containers   -->
<!-- Reload btn  -->
<div class="flex items-center gap-2">
  <button id="refresh-btn" 
      class="p-1.5 hover:bg-indigo-50/80 active:bg-indigo-100 rounded-lg transition-colors duration-150 ease-out group"
      aria-label="Refresh data">
      <svg id="refresh-icon" xmlns="http://www.w3.org/2000/svg" 
          class="w-5 h-5 text-indigo-600 group-hover:text-indigo-700 transition-colors"
          viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 5v-4h-4" class="opacity-50"/>
          <path d="M4 19v4h4" class="opacity-50"/>
          <path d="M18.5 12a6.5 6.5 0 1 1-6.5-6.5l3.5 3.5m-8 7l3.5 3.5"/>
      </svg>
  </button>

  <span id="last-refreshed" class="text-xs font-medium text-gray-500 font-sans">Last refreshed: --</span>
</div>



<!-- RECENT PROJECTS & Containers -->
</head>

<style>
 :root {
            --primary: #6750A4;
            --on-primary: #FFFFFF;
            --primary-container: #EADDFF;
            --secondary: #625B71;
            --surface: #FEF7FF;
            --surface-container: #F3EDF7;
            --outline: #79747E;
        }

        .material-card {
            background: var(--surface);
            border-radius: 28px;
            box-shadow: 0px 2px 6px 2px rgba(0, 0, 0, 0.15), 0px 1px 2px rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .material-card:hover {
            box-shadow: 0px 4px 8px 4px rgba(0, 0, 0, 0.15), 0px 1px 3px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .material-header {
            background: var(--primary);
            color: var(--on-primary);
            border-radius: 28px 28px 0 0;
            padding: 16px 24px;
        }

        .material-scroll {
            scrollbar-width: thin;
            scrollbar-color: var(--outline) transparent;
        }

        .material-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .material-scroll::-webkit-scrollbar-thumb {
            background-color: var(--outline);
            border-radius: 4px;
        }

        .material-chip {
            background: var(--primary-container);
            color: var(--primary);
            border-radius: 8px;
            padding: 4px 8px;
            font-size: 0.75rem;
        }

        .ripple {
            position: relative;
            overflow: hidden;
            transition: background 0.3s;
        }

        .ripple:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .ripple:active:after {
            width: 200px;
            height: 200px;
            opacity: 0.2;
            transition: all 0.5s;
        }
</style>



<!-- WORKING ON IT Main dashboard----------------------------------------------------------------------------------------------------------- -->
<body class="min-h-screen bg-slate-50 font-['Inter'] text-slate-800" id="main-dashboard-tooltip">
    <div class="max-w-7xl mx-auto p-6">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
      
            <div class="flex items-center gap-4">
                <button class="p-2 hover:bg-white rounded-full text-slate-600 relative">
                    <span class="material-icons-round">notifications</span>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-indigo-500 rounded-full animate-pulse"></span>
                </button>
                <div class="w-9 h-9 bg-indigo-600 rounded-full flex items-center justify-center text-white font-medium shadow-sm">
                    {{ user.username|first }}
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Left Column -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Projects Section -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden transition-all hover:-translate-y-1 hover:shadow-md duration-300" id="active-projects-tooltip">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                        <h2 class="text-base font-semibold text-slate-800 flex items-center gap-2">
                            <span class="material-icons-round text-indigo-500">folder_open</span>
                            Active Projects
                        </h2>
                        <button class="text-sm text-indigo-600 hover:bg-indigo-50 px-3 py-1.5 rounded-lg flex items-center gap-1 font-medium transition-colors">
                            <span class="material-icons-round text-sm">add</span>
                            New
                        </button>
                    </div>
                    
                    <div class="overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden" style="max-height: 380px;">
                       
                        <div class="p-3 hover:bg-slate-50/50 border-b border-slate-100 transition-colors">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-indigo-50 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <span class="material-icons-round text-indigo-600">description</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <h3 class="font-medium text-slate-800 truncate">{{ project.name }}</h3>
                                        <span class="material-icons-round text-slate-400 text-sm hover:text-slate-600 cursor-pointer">more_horiz</span>
                                    </div>
                                    <p class="text-xs text-slate-500 mt-1">{{ project.start_date }} - {{ project.end_date }}</p>
                                  
                                    <div class="mt-3 flex items-center gap-3 text-xs">
                                        <span class="px-2 py-1 bg-indigo-50 text-indigo-600 rounded-full flex items-center gap-1">
                                            <span class="material-icons-round text-xs">group</span>
                                            5 Members
                                        </span>
                                        <div class="flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-indigo-500 rounded-full" style="width: 66%"></div>
                                        </div>
                                        <span class="text-slate-500">66%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                   
                    </div>
                </div>

                <!-- Meetings & Events -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Upcoming Meetings -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden transition-all hover:-translate-y-1 hover:shadow-md duration-300">
                        <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100" id="my-upcoming-meetings-tooltip">
                            <h2 class="text-base font-semibold text-slate-800 flex items-center gap-2">
                                <span class="material-icons-round text-purple-500">event_available</span>
                                Meetings
                            </h2>
                            <button class="text-sm text-purple-600 hover:bg-purple-50 p-1.5 rounded-lg flex items-center gap-1 font-medium transition-colors">
                                <span class="material-icons-round text-sm">add</span>
                            </button>
                        </div>
                        
                        <div class="overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden" style="max-height: 300px;">
                            {% for meeting in recent_meetings %}
                            <div class="p-3 hover:bg-slate-50/50 border-b border-slate-100 transition-colors">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="font-medium text-slate-800 text-sm">{{ meeting.meeting_title }}</h3>
                                        <div class="mt-2 flex items-center gap-2 flex-wrap">
                                            <span class="px-2 py-1 bg-purple-50 text-purple-600 text-xs rounded-full flex items-center gap-1">
                                                <span class="material-icons-round text-xs">schedule</span>
                                                {{ meeting.start_time }}
                                            </span>
                                            <span class="px-2 py-1 bg-indigo-50 text-indigo-600 text-xs rounded-full flex items-center gap-1">
                                                <span class="material-icons-round text-xs">calendar_today</span>
                                                {{ meeting.meeting_date }}
                                            </span>

                                              <!-- Options List -->
       
                                        </div>
                                    </div>
                                    <button id="meeing-menu-tooltip" onclick="document.getElementById('menuModal').classList.remove('hidden')" 
                                       class="text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-50">
                                        <span class="material-icons-round">more_vert</span>
                                    </button>

                                      <!-- Options List -->
                                           <!-- Meeting Modal (Existing Logic Preserved) -->
    <div id="menuModal" class="fixed inset-0 bg-black/30 flex items-center justify-center z-50 hidden backdrop-blur-sm">
        <!-- Modal content remains exactly the same as original -->
        <div class="bg-white w-96 p-2 rounded-xl shadow-2xl relative transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]">
            <!-- ... Your existing modal content ... -->
            <div class="p-2 space-y-2">
                <a href="{% url 'meeting_detail_view' org_id=organization.id meeting_id=meeting.id  %}" 
                   class="flex items-center w-full px-4 py-3 text-slate-700 font-medium hover:bg-indigo-50 rounded-lg transition-all group">
                   <span class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-indigo-200">
                       <span class="material-icons-round text-indigo-600">calendar_month</span>
                   </span>
                   <span class="text-base">Join & Details</span>
                   <svg class="ml-auto h-5 w-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                   </svg>
                </a>
    
                <a href="{% url 'collaborate' org_id=organization.id meeting_id=meeting.id %}" 
                   class="flex items-center w-full px-4 py-3 text-slate-700 font-medium hover:bg-green-50 rounded-lg transition-all group">
                   <span class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-green-200">
                       <span class="material-icons-round text-green-600">handshake</span>
                   </span>
                   <span class="text-base">Collaborate</span>
                   <svg class="ml-auto h-5 w-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                   </svg>
                </a>
    
                <a href="{% url 'remove_myself' org_id=organization.id meeting_id=meeting.id %}" 
                   class="flex items-center w-full px-4 py-3 text-red-600 font-medium hover:bg-red-50 rounded-lg transition-all group">
                   <span class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-200">
                       <span class="material-icons-round text-red-600">logout</span>
                   </span>
                   <span class="text-base">Exit Meeting</span>
                   <svg class="ml-auto h-5 w-5 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                   </svg>
                </a>
            </div>
    
        </div>
    </div>
       
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Upcoming Events -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden transition-all hover:-translate-y-1 hover:shadow-md duration-300">
                        <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                            <h2 class="text-base font-semibold text-slate-800 flex items-center gap-2">
                                <span class="material-icons-round text-green-500">celebration</span>
                                Upcoming Events
                            </h2>
                            <button class="text-sm text-green-600 hover:bg-green-50 p-1.5 rounded-lg flex items-center gap-1 font-medium transition-colors">
                                <span class="material-icons-round text-sm">add</span>
                            </button>
                        </div>
                        
                        <div class="overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden" style="max-height: 300px;">
                            {% for event in recent_events %}
                            <div class="p-3 hover:bg-slate-50/50 border-b border-slate-100 transition-colors">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <span class="material-icons-round text-green-600">event</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <h3 class="font-medium text-slate-800 text-sm">{{ event.title }}</h3>
                                        <div class="mt-1 flex items-center gap-2">
                                            <span class="text-xs text-slate-500 flex items-center gap-1">
                                                <span class="material-icons-round text-xs">bookmark</span>
                                                {{ event.booking_count }} bookings
                                            </span>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <a href="{% url 'view_bookings' org_id=organization.id event_id=event.id %}" 
                                           class="text-slate-400 hover:text-green-600 p-1 rounded-full hover:bg-slate-50">
                                            <span class="material-icons-round text-sm">visibility</span>
                                        </a>
                                        <a href="{% url 'delete-event' org_id=organization.id event_id=event.id %}" 
                                           class="text-slate-400 hover:text-red-600 p-1 rounded-full hover:bg-slate-50">
                                            <span class="material-icons-round text-sm">delete</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
                <!-- Team Members -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden transition-all hover:-translate-y-1 hover:shadow-md duration-300">
                    <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100" id="team-members-tooltip">
                        <h2 class="text-base font-semibold text-slate-800 flex items-center gap-2">
                            <span class="material-icons-round text-amber-500">groups</span>
                            Team
                        </h2>
                        <button class="text-sm text-amber-600 hover:bg-amber-50 p-1.5 rounded-lg flex items-center gap-1 font-medium transition-colors">
                            <span class="material-icons-round text-sm">add</span>
                        </button>
                    </div>
                    
                    <div class="overflow-y-auto [scrollbar-width:none] [&::-webkit-scrollbar]:hidden" style="max-height: 400px;">
                        {% for member in members %}
    <div class="p-3 hover:bg-slate-50/50 border-b border-slate-100 transition-colors">
        <div class="flex items-center gap-3">
            <div class="w-9 h-9 rounded-full overflow-hidden bg-indigo-50 flex items-center justify-center flex-shrink-0">
                {% if member.profile_picture %}
                    <img src="{{ member.profile_picture.url }}" alt="Profile Picture" class="w-full h-full object-cover">
                {% else %}
                    <span class="text-indigo-600 font-medium">{{ member.user.username|first|upper }}</span>
                {% endif %}
            </div>
            <div class="flex-1 min-w-0">
                <h3 class="text-sm font-medium text-slate-800 truncate">{{ member.user.username }}</h3>
                <p class="text-xs text-slate-500">{{ member.get_role_display }}</p>
            </div>
            <div class="flex gap-1">
                <a href="{% url 'user_calendar' user_id=member.user.id org_id=organization.id %}" id="user-calendar-tooltip" 
                   class="p-1.5 hover:bg-slate-50 rounded-full text-slate-500 hover:text-indigo-600">
                    <span class="material-icons-round text-sm">calendar_today</span>
                </a>
                <a href="{% url 'dm' user_id=member.user.id org_id=organization.id %}" id="direct-message-tooltip"
                   class="p-1.5 hover:bg-slate-50 rounded-full text-slate-500 hover:text-green-600">
                    <span class="material-icons-round text-sm">chat</span>
                </a>
                <a href="#" data-bs-toggle="modal" data-bs-target="#ScheduleMeetsModal" id="schedule-recurring-meeting-tooltip"
                   data-org-id="{{ organization.id }}" data-user-id="{{ member.user.id }}"
                   class="p-1.5 hover:bg-slate-50 rounded-full text-slate-500 hover:text-purple-600">
                    <span class="material-icons-round text-sm">schedule</span>
                </a>
            </div>
        </div>
    </div>
{% endfor %}

                    </div>
                </div>

             
            </div>
        </div>
    </div>

    <!-- Meeting Modal (Existing Logic Preserved) -->
    <div id="menuModal" class="fixed inset-0 bg-slate-900/50 flex items-center justify-center z-50 hidden backdrop-blur-sm">
        <!-- Modal content remains exactly the same as original -->
        <div class="bg-white w-96 p-2 rounded-xl shadow-2xl relative transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]">
            
        </div>
    </div>

    <script>
        // Preserve existing modal toggle functionality
        document.querySelectorAll('[data-modal-toggle]').forEach(button => {
            button.addEventListener('click', () => {
                const modal = document.getElementById(button.dataset.modalToggle);
                modal.classList.toggle('hidden');
            });
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.id === 'menuModal') {
                event.target.classList.add('hidden');
            }
        }
    </script>
</body>

<!-- ------------------------------------------------------------------------------------------------------------------------------------------ -->

<!-- --------------------------------------------------------------------------------------------------------------- -->
<!-- Popup Buttons (Initially Hidden) -->
<div id="popupButtons" class="popup-container shadow-sm rounded-3 p-2" 
     style="background: white; border: 1px solid #e8e8e8; min-width: 240px;">

    <!-- Short Set-up Button -->
    <button type="button" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" 
            data-bs-toggle="modal" data-bs-target="#editOrgModal"
            style="font-family: 'Inter', sans-serif; font-size: 15px; 
                   color: #1d1c1d; transition: background 0.2s ease; border-radius: 4px;">
        <span class="material-icons" style="font-size: 18px; color: #007bff;">tune</span> 
        Short Set-up
    </button>

    <!-- Monitor Invitations Button -->
    <button type="button" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2 mb-1"
            data-bs-toggle="modal" data-bs-target="#invitationsModal"
            style="font-family: 'Inter', sans-serif; font-size: 15px; 
                   color: #1d1c1d; transition: background 0.2s ease; border-radius: 4px;">
        <span class="material-icons" style="font-size: 18px; color: #007bff;">person_add</span> 
        Monitor Invitations
    </button>

    <!-- Customize Workspace Link -->
    <a href="{% url 'customize_workspace' org_id=organization.id%}" class="text-decoration-none">
        <button type="submit" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2"
                style="font-family: 'Inter', sans-serif; font-size: 15px; 
                       color: #1d1c1d; transition: background 0.2s ease; border-radius: 4px;">
            <span class="material-icons" style="font-size: 18px; color: #007bff;">build</span> 
            Customize {{ organization.name }}
        </button>
    </a>

    <!-- Workflows & Templates Button -->
    <a href="{% url 'workflows' org_id=organization.id%}" class="text-decoration-none">
        <button type="submit" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2"
                style="font-family: 'Inter', sans-serif; font-size: 15px; 
                       color: #1d1c1d; transition: background 0.2s ease; border-radius: 4px;">
            <span class="material-icons" style="font-size: 18px; color: #007bff;">dashboard_customize</span> 
            Workflows & Templates
        </button>
    </a>
    <!-- Monitor suspensions -->

    <button type="button" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2 mb-1"
    data-bs-toggle="modal" data-bs-target="#suspendUsersModal"
    style="font-family: 'Inter', sans-serif; font-size: 15px; 
           color: #1d1c1d; transition: background 0.2s ease; border-radius: 4px;">
    <span class="material-icons" style="font-size: 18px; color: #dc3545;">person_remove</span> 
    Monitor Suspensions
</button>

</div>


<!-- meetings and nlp pop-up btns -->

<div id="meetsButtons" class="popup-container shadow-sm rounded-3 p-2" 
     style="background: white; border: 1px solid #e8e8e8; min-width: 240px;">

     <button type="button" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" data-bs-toggle="modal" data-bs-target="#meetingModal">
        Create Meeting via NLP
    </button>

    <button class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2 " data-bs-toggle="modal" data-bs-target="#OverviewMeetingModal">
         Overview
    </button>

    <button class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" data-bs-toggle="modal" data-bs-target="#ManageRecurringModal">
        Manage Recurring Meetings
    </button>
    
     
    <button class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" id="openCalendarBtn">Instant Calendar</button>

    <button id="generateEmbedBtn" data-org-id="{{ organization.id }}" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2">
        Embed Your Calendar & Meetings
    </button>

    <!-- Delete Meetings Button -->
   <button class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" id="openDeleteMeetsModal" data-org-id="{{ organization.id }}">
      Shut Down My Meetings
   </button>

   <a href="{% url 'initiate_meeting' org_id=organization.id%}">
      <button class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2" type="submit">
          Instant Live Meeting
      </button>
   </a>

   <!-- Task Create Button -->
    <button id="openTaskModal" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2">
       + Add Task
    </button>

    <!-- Button to Open Modal -->
    <button id="open-kanban" class="popup-btn w-100 d-flex align-items-center gap-3 px-3 py-2">Open Kanban</button>
</div>
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------- -->
<!-- Widgets Set-UP ------------------------------------------------------------------------------------- -->
<div id="dashboard-widgets-container" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mt-4">
  <!-- Widgets will be injected here as <div class="col"> -->
</div>









<!-- ------------------------------------------------------------------------------------------------------------------------- -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------- -->

<!-- MODALS -->
 <!-- Edit Organization -->
 <div class="modal fade" id="editOrgModal" tabindex="-1" aria-labelledby="editOrgModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editOrgModalLabel">Edit Organization</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editOrgForm">
                    <div class="mb-3">
                        <label for="orgName" class="form-label">Organization Name</label>
                        <input type="text" class="form-control" id="orgName" required>
                    </div>
                    <div class="mb-3">
                        <label for="orgDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="orgDescription" rows="3"></textarea>
                    </div>
                    {% csrf_token %}
                    <input type="hidden" id="orgId" value="{{ organization.id }}">
                    <div class="d-flex justify-content-end">
                        <button type="button" class="btn btn-link me-2" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- View Invitations -->
<div class="modal fade" id="invitationsModal" tabindex="-1" aria-labelledby="invitationsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
      <div class="modal-content border-0 shadow-lg">
          <!-- Slim Header with Actions -->
          <div class="modal-header p-4 border-b border-gray-200">
              <div class="w-full flex items-center justify-between">
                  <div>
                      <h3 class="text-lg font-semibold text-gray-900">Pending Invitations</h3>
                      <p class="text-sm text-gray-500 mt-1">Manage organization access requests</p>
                  </div>
                  <div class="flex items-center space-x-3">
                      <button class="text-gray-500 hover:text-gray-700 p-2 rounded-lg hover:bg-gray-100">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                          </svg>
                      </button>
                      <button type="button" class="btn-close p-2" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
              </div>
          </div>

          <!-- Interactive Body -->
          <div class="modal-body p-0">
              <!-- Table Controls -->
              <div class="flex items-center justify-between p-4 bg-gray-50 border-b border-gray-200">
                  <div class="relative w-96">
                      <input type="text" 
                             class="form-input pl-9 pr-4 py-2 text-sm rounded-md border-gray-300 focus:ring-2 focus:ring-blue-200 focus:border-blue-500" 
                             placeholder="Search invitations...">
                      <svg class="w-4 h-4 absolute left-3 top-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                      </svg>
                  </div>
                  <div class="flex items-center space-x-3">
                      <div class="dropdown">
                          <button class="btn btn-outline-secondary px-3 py-2 text-sm flex items-center">
                              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                              </svg>
                              Filter
                          </button>
                      </div>
                  </div>
              </div>

              <!-- Scrollable Table -->
              <div class="max-h-[calc(100vh-12rem)] overflow-y-auto">
                  <table class="w-full">
                      <thead class="bg-gray-50 border-b border-gray-200">
                          <tr class="text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
                              <th class="p-3 pl-6 w-48">Inviter</th>
                              <th class="p-3 w-64">Invitee Email</th>
                              <th class="p-3 w-32">Role</th>
                              <th class="p-3 w-32">Status</th>
                              <th class="p-3 pr-6 w-48">Expires In</th>
                          </tr>
                      </thead>
                      <tbody id="invitationsTableBody" class="divide-y divide-gray-200">
                          <!-- Skeleton Loader -->
                          <tr class="animate-pulse">
                              <td class="p-3 pl-6"><div class="h-4 bg-gray-200 rounded w-3/4"></div></td>
                              <td class="p-3"><div class="h-4 bg-gray-200 rounded w-5/6"></div></td>
                              <td class="p-3"><div class="h-4 bg-gray-200 rounded w-1/2"></div></td>
                              <td class="p-3"><div class="h-6 bg-gray-200 rounded-full w-20"></div></td>
                              <td class="p-3 pr-6"><div class="h-4 bg-gray-200 rounded w-1/3"></div></td>
                          </tr>
                          
                          <!-- Example Row -->
                          <tr class="hover:bg-gray-50 transition-colors">
                              <td class="p-3 pl-6">
                                  <div class="flex items-center">
                                      <img src="user-avatar.png" class="w-6 h-6 rounded-full mr-3 border">
                                      <span class="text-sm font-medium text-gray-900">Sarah Cooper</span>
                                  </div>
                              </td>
                              <td class="p-3">
                                  <span class="text-sm text-gray-900">john@example.com</span>
                              </td>
                              <td class="p-3">
                                  <span class="text-sm text-gray-700">Editor</span>
                              </td>
                              <td class="p-3">
                                  <span class="px-2.5 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">
                                      Pending
                                  </span>
                              </td>
                              <td class="p-3 pr-6">
                                  <div class="flex items-center">
                                      <span class="text-sm text-gray-600">2 days</span>
                                      <button class="ml-2 text-gray-400 hover:text-blue-600">
                                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                          </svg>
                                      </button>
                                  </div>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>

          <!-- Footer Stats -->
          <div class="modal-footer p-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between">
              <div class="text-sm text-gray-600">
                  Showing <span class="font-medium">8</span> of <span class="font-medium">24</span> invitations  
                  <span class="text-yellow-600 font-medium">12 pending</span>
              </div>
              <div class="space-x-2">
                  <button class="text-sm text-gray-600 hover:text-gray-900 underline">Resend Selected</button>
                  <button class="text-sm text-red-600 hover:text-red-800 underline">Revoke Selected</button>
              </div>
          </div>
      </div>
  </div>
</div>
<!-- HANDLE AND MANAGE SUSPENSIONS -->
<div class="modal fade" id="suspendUsersModal" tabindex="-1" aria-labelledby="suspendUsersLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
      <div class="modal-content border-0 shadow-lg">
          <!-- Slimmer Header -->
          <div class="modal-header px-6 py-4 border-b border-gray-100">
              <div class="flex-1">
                  <div class="flex items-center gap-3">
                      <svg class="w-5 h-5 text-red-500 shrink-0" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13zM10 7a1 1 0 00-1 1v3a1 1 0 002 0V8a1 1 0 00-1-1zm0-1a1 1 0 100-2 1 1 0 000 2z"/>
                      </svg>
                      <h5 class="modal-title text-lg font-semibold text-gray-900" id="suspendUsersLabel">
                          Manage User Suspensions
                      </h5>
                  </div>
                  <p class="mt-2 text-sm text-gray-500">
                      Suspended users lose access to <span class="font-medium text-indigo-600">{{ organization.name }}</span>.
                      <a href="#" class="ml-2 text-indigo-600 hover:text-indigo-900 font-medium transition-colors">
                          Manage permanent removals 
                      </a>
                  </p>
              </div>
              <button type="button" class="btn-close p-2 transition-colors hover:bg-gray-100 rounded-lg" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <!-- Scrollable Content -->
          <div class="modal-body p-0 overflow-hidden">
              <div class="h-[500px] overflow-y-auto">
                  <div id="userListContainer" class="divide-y divide-gray-100">
                      <!-- Loading State -->
                      <div class="p-6 text-center text-gray-500">
                          <div class="animate-spin w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full mx-auto mb-3"></div>
                          Loading team members...
                      </div>

                      <!-- User Item Template (example) -->
                      <div class="hidden p-4 hover:bg-gray-50 transition-colors">
                          <div class="flex items-center gap-4">
                              <img src="[USER_AVATAR]" 
                                   class="w-10 h-10 rounded-full bg-gray-100" 
                                   alt="User avatar">
                              <div class="min-w-0 flex-1">
                                  <h4 class="text-sm font-semibold text-gray-900 truncate">John Doe</h4>
                                  <p class="text-sm text-gray-500 truncate">john@company.com</p>
                              </div>
                              <div class="flex items-center gap-3">
                                  <span class="px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800">
                                      Suspended
                                  </span>
                                  <button type="button" 
                                          class="text-sm font-medium text-indigo-600 hover:text-indigo-900 transition-colors">
                                      Unsuspend
                                  </button>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Footer Actions -->
          <div class="modal-footer px-6 py-4 border-t border-gray-100 bg-gray-50">
              <button type="button" 
                      class="px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
                      data-bs-dismiss="modal">
                  Close
              </button>
              <button type="button" 
                      class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors">
                  Save Changes
              </button>
          </div>
      </div>
  </div>
</div>

<!-- CREATE MEETING VIA NLP -->
<!-- Meeting Creation Modal -->
<div class="modal fade" id="meetingModal" tabindex="-1" aria-labelledby="meetingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content rounded-lg shadow-xl border-0">
        <!-- Header with gradient background -->
        <div class="modal-header bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-t-lg">
          <div class="flex items-center">
            <svg class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12z"></path>
              <path d="M10 4a1 1 0 100 2 1 1 0 000-2zM9 8a1 1 0 112 0v4a1 1 0 11-2 0V8z"></path>
            </svg>
            <h5 class="modal-title font-sans text-lg font-semibold" id="meetingModalLabel">Create Meeting</h5>
          </div>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <!-- Body with modern layout -->
        <div class="modal-body p-0">
          <!-- Tabs for different meeting types -->
          <div class="bg-gray-50 border-b px-4 py-2">
            <ul class="nav nav-tabs nav-tabs-clickup flex border-0" role="tablist">
              <li class="nav-item mr-4" role="presentation">
                <button class="nav-link active px-1 py-2 border-0 border-b-2 border-purple-600 font-medium text-purple-600" data-bs-toggle="tab" data-bs-target="#quickCreate" type="button" role="tab">Quick Create</button>
              </li>
              <li class="nav-item mr-4" role="presentation">
                <button class="nav-link px-1 py-2 border-0 text-gray-500 hover:text-purple-600" data-bs-toggle="tab" data-bs-target="#detailedCreate" type="button" role="tab">Detailed</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link px-1 py-2 border-0 text-gray-500 hover:text-purple-600" data-bs-toggle="tab" data-bs-target="#templateCreate" type="button" role="tab">From Template</button>
              </li>
            </ul>
          </div>
  
          <!-- Tab content -->
          <div class="tab-content p-4">
            <!-- Quick Create Tab (Natural Language) -->
            <div class="tab-pane fade show active" id="quickCreate" role="tabpanel">
              <div class="mb-4">
                <label for="nlpInput" class="font-medium text-gray-700 mb-1 flex items-center">
                  <svg class="h-4 w-4 mr-1 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                    <path fill-rule="evenodd" d="M5 5a5 5 0 1110 0A5 5 0 015 5z"></path>
                  </svg>
                  Natural Language Input
                </label>
                <div class="relative">
                  <input type="text" id="nlpInput" class="form-control pl-4 pr-10 py-3 border border-gray-300 rounded-lg w-full focus:ring-2 focus:ring-purple-600 focus:border-transparent shadow-sm" placeholder="e.g. 'Meeting with John tomorrow at 3 PM'" />
                  <button class="absolute right-2 top-1/2 transform -translate-y-1/2 text-purple-600 hover:text-purple-800">
                    <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M7 9a2 2 0 114 0 2 2 0 01-4 0z"></path>
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z"></path>
                    </svg>
                  </button>
                </div>
                <!-- Error message container -->
                <div id="errorMessage" class="mt-2 text-sm text-red-600 font-medium" style="display: none;"></div>
              </div>
  
              <!-- Examples Section -->
              <div class="bg-gray-50 rounded-lg p-3 mb-4">
                <h6 class="text-sm font-medium text-gray-700 mb-2 flex items-center">
                  <svg class="h-4 w-4 mr-1 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path>
                  </svg>
                  Examples
                </h6>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                  <div class="example-chip bg-white rounded px-3 py-2 border border-gray-200 text-sm text-gray-600 cursor-pointer hover:bg-purple-50 hover:border-purple-200 transition-all">Meeting with John tomorrow at 3 PM</div>
                  <div class="example-chip bg-white rounded px-3 py-2 border border-gray-200 text-sm text-gray-600 cursor-pointer hover:bg-purple-50 hover:border-purple-200 transition-all">Schedule a meeting with Sarah next Monday at 10 AM</div>
                  <div class="example-chip bg-white rounded px-3 py-2 border border-gray-200 text-sm text-gray-600 cursor-pointer hover:bg-purple-50 hover:border-purple-200 transition-all">Natural Language processing meetings with 1 hour duration</div>
                  <div class="example-chip bg-white rounded px-3 py-2 border border-gray-200 text-sm text-gray-600 cursor-pointer hover:bg-purple-50 hover:border-purple-200 transition-all">Check availability before scheduling</div>
                </div>
              </div>
  
              <!-- Preview Section (Initially Hidden) -->
              <div id="meetingPreview" class="border border-gray-200 rounded-lg p-4 mb-4" style="display: none;">
                <h6 class="font-medium text-gray-700 mb-2">Meeting Preview</h6>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p class="text-sm text-gray-500">Title</p>
                    <p class="font-medium" id="previewTitle">--</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Time</p>
                    <p class="font-medium" id="previewTime">--</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Duration</p>
                    <p class="font-medium" id="previewDuration">--</p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-500">Attendees</p>
                    <p class="font-medium" id="previewAttendees">--</p>
                  </div>
                </div>
              </div>
  
              <!-- Options Section -->
              <div class="border-t pt-4 mt-2">
                <div class="flex flex-wrap justify-between items-center">
                  <div class="flex items-center space-x-4 text-sm">
                    <label class="flex items-center text-gray-600 cursor-pointer">
                      <input type="checkbox" class="form-checkbox h-4 w-4 text-purple-600 rounded focus:ring-purple-500" />
                      <span class="ml-2">Check availability</span>
                    </label>
                    <label class="flex items-center text-gray-600 cursor-pointer">
                      <input type="checkbox" class="form-checkbox h-4 w-4 text-purple-600 rounded focus:ring-purple-500" />
                      <span class="ml-2">Add reminder</span>
                    </label>
                  </div>
                  <div class="space-x-2 mt-2 sm:mt-0">
                    <button class="btn btn-sm bg-gray-200 text-gray-700 hover:bg-gray-300 border-0 rounded px-3 py-1">
                      <svg class="h-4 w-4 inline-block mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path>
                      </svg>
                      More options
                    </button>
                  </div>
                </div>
              </div>
            </div>
  
            <!-- Additional Tabs (Placeholders) -->
            <div class="tab-pane fade" id="detailedCreate" role="tabpanel">
                <div class="p-4 bg-white rounded-xl shadow-sm">
                  <!-- Header Section -->
                  <div class="mb-4 text-center">
                    <div class="inline-block bg-indigo-100 text-indigo-800 p-2 rounded-full mb-2">
                      <span class="text-xl"></span>
                    </div>
                    <h5 class="text-xl font-bold text-gray-800">Natural Language Scheduling</h5>
                    <p class="text-gray-600 text-sm mt-2">
                      Create meetings using everyday language - just type and let AI do the work
                    </p>
                  </div>
                  
                  <!-- Interactive Demo -->
                  <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 mb-4 border border-blue-100">
                    <div class="relative">
                      <input type="text" 
                             class="w-full p-3 pl-4 pr-12 rounded-lg border border-blue-200 text-sm" 
                             placeholder="Try it: 'Schedule a team meeting tomorrow at 3 PM'">
                      <button class="absolute right-2 top-2 bg-blue-600 text-white p-1 rounded-md">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                      </button>
                    </div>
                    <p class="text-xs text-center text-gray-500 mt-2">Just type and press Enter</p>
                  </div>
                  
                  <!-- Examples Cards -->
                  <div class="mb-4">
                    <h6 class="font-medium text-gray-800 mb-2 flex items-center">
                      <span class="mr-2"></span> Example Commands
                    </h6>
                    
                    <div class="grid grid-cols-1 gap-2">
                      <!-- Example 1 -->
                      <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-green-400 hover:bg-gray-100 transition cursor-pointer">
                        <p class="text-sm font-medium text-gray-800">"Schedule a team meeting tomorrow at 3 PM"</p>
                        <div class="flex mt-1 text-xs text-gray-500">
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> Tomorrow</span>
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> 3:00 PM</span>
                          <span class="flex items-center"><span class="mr-1"></span> Team</span>
                        </div>
                      </div>
                      
                      <!-- Example 2 -->
                      <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-purple-400 hover:bg-gray-100 transition cursor-pointer">
                        <p class="text-sm font-medium text-gray-800">"Book a call with John on Friday at 10 AM"</p>
                        <div class="flex mt-1 text-xs text-gray-500">
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> Friday</span>
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> 10:00 AM</span>
                          <span class="flex items-center"><span class="mr-1"></span> John</span>
                        </div>
                      </div>
                      
                      <!-- Example 3 -->
                      <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-blue-400 hover:bg-gray-100 transition cursor-pointer">
                        <p class="text-sm font-medium text-gray-800">"Client meeting next Monday from 2-3 PM in conference room"</p>
                        <div class="flex flex-wrap mt-1 text-xs text-gray-500">
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> Next Monday</span>
                          <span class="mr-3 flex items-center"><span class="mr-1"></span> 2:00-3:00 PM</span>
                          <span class="flex items-center"><span class="mr-1"></span> Conference Room</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Feature Cards -->
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-4">
                    <!-- Feature 1 -->
                    <div class="bg-blue-50 rounded-lg p-3 border border-blue-100">
                      <div class="flex items-center mb-2">
                        <span class="text-blue-500 text-lg mr-2"></span>
                        <h6 class="font-medium text-blue-800">Smart Detection</h6>
                      </div>
                      <p class="text-xs text-gray-600">
                        Automatically extracts dates, times, participants, and locations from your text
                      </p>
                    </div>
                    
                    <!-- Feature 2 -->
                    <div class="bg-green-50 rounded-lg p-3 border border-green-100">
                      <div class="flex items-center mb-2">
                        <span class="text-green-500 text-lg mr-2"></span>
                        <h6 class="font-medium text-green-800">Calendar Sync</h6>
                      </div>
                      <p class="text-xs text-gray-600">
                        Works with Google Calendar, Outlook, and other popular calendar services
                      </p>
                    </div>
                    
                    <!-- Feature 3 -->
                    <div class="bg-purple-50 rounded-lg p-3 border border-purple-100">
                      <div class="flex items-center mb-2">
                        <span class="text-purple-500 text-lg mr-2"></span>
                        <h6 class="font-medium text-purple-800">Smart Suggestions</h6>
                      </div>
                      <p class="text-xs text-gray-600">
                        Recommends alternate times when conflicts are detected in your schedule
                      </p>
                    </div>
                  </div>
                  
                  <!-- Quick Start -->
                  <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <h6 class="font-medium text-gray-800 mb-2 flex items-center">
                      <span class="mr-2"></span> Get Started
                    </h6>
                    <ol class="text-sm text-gray-600 list-decimal pl-5 mb-3">
                      <li class="mb-1">Type your meeting request using everyday language</li>
                      <li class="mb-1">Review the automatically filled details</li>
                      <li>Click "Schedule" to add it to your calendar</li>
                    </ol>
                    <div class="flex justify-center">
                      <button class="bg-indigo-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition">
                        Try Now
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            


            <div class="tab-pane fade" id="templateCreate" role="tabpanel">
                <div class="p-4 bg-white rounded-xl shadow-sm">
                  <!-- Header -->
                  <div class="mb-4 text-center">
                    <h5 class="text-xl font-bold text-gray-800">Meeting Templates</h5>
                    <p class="text-gray-600 text-sm mt-1">
                      Create, customize and reuse meeting structures to save time
                    </p>
                  </div>
                  
                  <!-- Template Gallery -->
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                    <!-- Daily Standup -->
                    <div class="bg-blue-50 rounded-lg p-3 border border-blue-100 hover:shadow-md transition">
                      <div class="flex items-center mb-2">
                        <span class="text-blue-500 mr-2"></span>
                        <h6 class="font-medium text-blue-800">Daily Standup</h6>
                      </div>
                      <p class="text-xs text-gray-600 mb-2">15-min sync for quick updates and blockers</p>
                      <button class="text-xs bg-blue-500 text-white px-2 py-1 rounded-md hover:bg-blue-600">Use Template</button>
                    </div>
                    
                    <!-- Weekly Team Meeting -->
                    <div class="bg-green-50 rounded-lg p-3 border border-green-100 hover:shadow-md transition">
                      <div class="flex items-center mb-2">
                        <span class="text-green-500 mr-2"></span>
                        <h6 class="font-medium text-green-800">Weekly Team Meeting</h6>
                      </div>
                      <p class="text-xs text-gray-600 mb-2">Track progress and set team goals</p>
                      <button class="text-xs bg-green-500 text-white px-2 py-1 rounded-md hover:bg-green-600">Use Template</button>
                    </div>
                    
                    <!-- Client Call -->
                    <div class="bg-purple-50 rounded-lg p-3 border border-purple-100 hover:shadow-md transition">
                      <div class="flex items-center mb-2">
                        <span class="text-purple-500 mr-2"></span>
                        <h6 class="font-medium text-purple-800">Client Call</h6>
                      </div>
                      <p class="text-xs text-gray-600 mb-2">Discuss project updates and deliverables</p>
                      <button class="text-xs bg-purple-500 text-white px-2 py-1 rounded-md hover:bg-purple-600">Use Template</button>
                    </div>
                    
                    <!-- Strategy Planning -->
                    <div class="bg-amber-50 rounded-lg p-3 border border-amber-100 hover:shadow-md transition">
                      <div class="flex items-center mb-2">
                        <span class="text-amber-500 mr-2"></span>
                        <h6 class="font-medium text-amber-800">Strategy Planning</h6>
                      </div>
                      <p class="text-xs text-gray-600 mb-2">Plan long-term goals with stakeholders</p>
                      <button class="text-xs bg-amber-500 text-white px-2 py-1 rounded-md hover:bg-amber-600">Use Template</button>
                    </div>
                  </div>
                  
                  <!-- Custom Template Section -->
                  <div class="bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200">
                    <div class="flex items-center justify-between mb-3">
                      <h6 class="font-medium text-gray-800">Create Custom Template</h6>
                      <span class="text-gray-500 text-lg"></span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-3">
                      <div>
                        <label class="block text-xs text-gray-600 mb-1">Template Name</label>
                        <input type="text" class="w-full text-sm border border-gray-300 rounded p-2" placeholder="Enter name...">
                      </div>
                      <div>
                        <label class="block text-xs text-gray-600 mb-1">Duration</label>
                        <select class="w-full text-sm border border-gray-300 rounded p-2">
                          <option>15 minutes</option>
                          <option>30 minutes</option>
                          <option>45 minutes</option>
                          <option>60 minutes</option>
                          <option>Custom</option>
                        </select>
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label class="block text-xs text-gray-600 mb-1">Agenda Items</label>
                      <textarea class="w-full text-sm border border-gray-300 rounded p-2" rows="2" placeholder="Add meeting agenda items..."></textarea>
                    </div>
                    
                    <div class="flex justify-end">
                      <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition">
                        Create Template
                      </button>
                    </div>
                  </div>
                  
                  <!-- Pro Features Banner -->
                  <div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg p-3 text-white flex justify-between items-center">
                    <div>
                      <h6 class="font-medium">Unlock Pro Features</h6>
                      <p class="text-xs opacity-90">Advanced templates, automated scheduling, and more</p>
                    </div>
                    <button class="bg-white text-indigo-700 px-3 py-1 rounded-md text-xs font-medium">
                      Upgrade
                    </button>
                  </div>
                </div>
              </div>

          </div>
        </div>
        
        <!-- Footer with actions -->
        <div class="modal-footer flex justify-between bg-gray-50 rounded-b-lg border-t-0 px-4 py-3">
          <div>
            <button type="button" class="btn btn-sm text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg px-3 py-1.5">
              <svg class="h-4 w-4 inline-block mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path>
              </svg>
              Help
            </button>
          </div>
          <div>
            <button type="button" class="btn btn-outline-secondary border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg mr-2" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 border-0 rounded-lg shadow-sm" id="createMeetingBtnn">
              Create Meeting
              <svg class="h-4 w-4 inline-block ml-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
</div>
  
<!-- Additional JavaScript for functionality -->
<script>
    // Existing logic would be preserved here
    document.addEventListener('DOMContentLoaded', function() {
      // Example chips functionality
      const exampleChips = document.querySelectorAll('.example-chip');
      const nlpInput = document.getElementById('nlpInput');
      
      exampleChips.forEach(chip => {
        chip.addEventListener('click', function() {
          nlpInput.value = this.textContent;
          // Simulate focus
          nlpInput.focus();
        });
      });
      
      // Add any other required JavaScript here
    });
</script>


<!-- MEETING ANALYTICS AND OVERVIEW -->
<div class="modal fade" id="OverviewMeetingModal" tabindex="-1" aria-labelledby="analyticsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl max-w-6xl">
      <div class="modal-content bg-slate-50 shadow-2xl border-0 rounded-xl overflow-hidden">
        <!-- Modal Header with modern gradient -->
        <div class="modal-header border-0 bg-gradient-to-r from-indigo-600 to-purple-600 p-6">
          <div class="flex items-center gap-3">
            <div class="bg-white/20 p-2 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
              </svg>
            </div>
            <h5 class="modal-title text-white text-2xl font-bold tracking-tight">Meeting Analytics</h5>
          </div>
          <div class="flex items-center gap-3">
            <button type="button" class="bg-white/10 hover:bg-white/20 transition-all rounded-lg p-2 cursor-pointer">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
              </svg>
            </button>
            <button type="button" class="bg-white/10 hover:bg-white/20 transition-all rounded-lg p-2 cursor-pointer">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
              </svg>
            </button>
            <button type="button" class="bg-white/10 hover:bg-white/20 transition-all rounded-lg p-2" data-bs-dismiss="modal" aria-label="Close">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Organization context bar -->
        <div class="bg-white border-b border-slate-200 px-6 py-3 flex flex-wrap items-center justify-between">
          <div class="flex items-center gap-2">
            <span class="text-slate-500 font-medium">Organization:</span>
            <span class="text-indigo-600 font-semibold">{{ organization.name }}</span>
          </div>
          <div class="flex items-center gap-4 flex-wrap">
            <div class="flex items-center gap-2">
              <span class="text-slate-500 text-sm">Date Range:</span>
              <select class="bg-slate-100 border border-slate-200 rounded-md text-sm px-2 py-1">
                <option>Last 30 days</option>
                <option>Last quarter</option>
                <option>Year to date</option>
                <option>Custom range</option>
              </select>
            </div>
            <button type="button" class="bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-md px-3 py-1 flex items-center gap-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
              </svg>
              Filter
            </button>
            <button type="button" class="bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm rounded-md px-3 py-1 flex items-center gap-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              Add View
            </button>
          </div>
        </div>
        
        <!-- Modal Body with enhanced styling -->
        <div class="modal-body p-6">
          <!-- KPI Cards Row -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6">
            <!-- Total Meetings Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Total Meetings</span>
                <div class="bg-indigo-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                  </svg>
                </div>
              </div>
              <h2 class="text-3xl font-bold mt-2" id="totalMeetings">0</h2>
              <div class="flex items-center mt-2 text-xs font-medium text-emerald-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                12% vs last month
              </div>
            </div>
            
            <!-- Completed Meetings Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Completed</span>
                <div class="bg-emerald-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <h2 class="text-3xl font-bold mt-2" id="completedMeetings">0</h2>
              <div class="flex items-center mt-2 text-xs font-medium text-emerald-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                8% vs last month
              </div>
            </div>
            
            <!-- Canceled Meetings Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Canceled</span>
                <div class="bg-red-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <h2 class="text-3xl font-bold mt-2" id="canceledMeetings">0</h2>
              <div class="flex items-center mt-2 text-xs font-medium text-red-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
                3% vs last month
              </div>
            </div>
            
            <!-- Upcoming Meetings Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Upcoming</span>
                <div class="bg-amber-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                </div>
              </div>
              <h2 class="text-3xl font-bold mt-2" id="upcomingMeetings">0</h2>
              <div class="flex items-center mt-2 text-xs font-medium text-amber-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                5% vs last month
              </div>
            </div>
            
            <!-- Average Duration Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Avg Duration</span>
                <div class="bg-sky-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>
              <div class="flex items-center mt-2">
                <h2 class="text-3xl font-bold" id="avgDuration">0</h2>
                <span class="ml-1 text-lg font-medium text-slate-500">min</span>
              </div>
              <div class="flex items-center mt-2 text-xs font-medium text-red-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
                2% vs last month
              </div>
            </div>
            
            <!-- Average Attendees Card -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all">
              <div class="flex items-center justify-between">
                <span class="text-slate-500 text-sm font-medium">Avg Attendees</span>
                <div class="bg-purple-100 rounded-md p-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                  </svg>
                </div>
              </div>
              <h2 class="text-3xl font-bold mt-2" id="avgAttendees">0</h2>
              <div class="flex items-center mt-2 text-xs font-medium text-emerald-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                </svg>
                1% vs last month
              </div>
            </div>
          </div>
          
          <!-- Charts Grid -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Meeting Types Chart -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
              <div class="flex items-center justify-between p-4 border-b border-slate-200">
                <div class="flex items-center gap-2">
                  <div class="bg-indigo-100 p-1.5 rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-slate-800">Meeting Types Distribution</h3>
                </div>
                <div class="flex items-center gap-2">
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                  </button>
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4 h-72">
                <canvas id="meetingTypeChart"></canvas>
              </div>
            </div>
            
            <!-- Meeting Modes Chart -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
              <div class="flex items-center justify-between p-4 border-b border-slate-200">
                <div class="flex items-center gap-2">
                  <div class="bg-emerald-100 p-1.5 rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-slate-800">Meeting Modes</h3>
                </div>
                <div class="flex items-center gap-2">
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                  </button>
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4 h-72">
                <canvas id="meetingModeChart"></canvas>
              </div>
            </div>
            
            <!-- Peak Hours Chart -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
              <div class="flex items-center justify-between p-4 border-b border-slate-200">
                <div class="flex items-center gap-2">
                  <div class="bg-purple-100 p-1.5 rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-slate-800">Peak Meeting Hours</h3>
                </div>
                <div class="flex items-center gap-2">
                  <div class="flex items-center">
                    <span class="text-xs text-slate-500 mr-2">View:</span>
                    <select class="bg-slate-100 border border-slate-200 rounded-md text-xs px-2 py-1">
                      <option>Daily</option>
                      <option>Weekly</option>
                      <option>Monthly</option>
                    </select>
                  </div>
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4 h-72">
                <canvas id="peakHoursChart"></canvas>
              </div>
            </div>
            
            <!-- Top Hosts Chart -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
              <div class="flex items-center justify-between p-4 border-b border-slate-200">
                <div class="flex items-center gap-2">
                  <div class="bg-amber-100 p-1.5 rounded-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  </div>
                  <h3 class="font-semibold text-slate-800">Top Hosts</h3>
                </div>
                <div class="flex items-center gap-2">
                  <div class="flex items-center">
                    <span class="text-xs text-slate-500 mr-2">Show:</span>
                    <select class="bg-slate-100 border border-slate-200 rounded-md text-xs px-2 py-1">
                      <option>Top 5</option>
                      <option>Top 10</option>
                      <option>All</option>
                    </select>
                  </div>
                  <button type="button" class="text-slate-400 hover:text-slate-600 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="p-4 h-72">
                <canvas id="topHostsChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


<!-- SCHEDULE RECURRING MEETING -->
<div class="modal fade" id="ScheduleMeetsModal" tabindex="-1" aria-labelledby="ScheduleMeetsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content rounded-lg border-0 shadow-xl">
            <!-- Header with gradient background -->
            <div class="modal-header bg-gradient-to-r from-indigo-600 to-purple-600 border-0 rounded-t-lg">
                <h5 class="modal-title text-white font-bold flex items-center" id="ScheduleMeetsModalLabel">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Schedule a Recurring Meeting
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body p-0">
                <!-- Status bar with availability info -->
                <div class="bg-blue-50 text-blue-700 px-4 py-2 flex items-center text-sm border-b border-blue-100">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    We'll check availability for all participants before scheduling
                </div>

                <form id="scheduleMeetingForm" class="p-5">
                    <input type="hidden" id="org_id" name="org_id">
                    <input type="hidden" id="user_id" name="user_id">

                    <!-- Meeting details section -->
                    <div class="mb-5">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-3">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-gray-800">Meeting Details</h3>
                        </div>

                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm p-4">
                            <div class="mb-4">
                                <label for="recurrence_type" class="block text-sm font-medium text-gray-700 mb-1">Recurrence Pattern</label>
                                <div class="relative">
                                    <select class="appearance-none block w-full px-3 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200" id="recurrence_type" name="recurrence_type">
                                        <option value="daily">Daily</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="monthly">Monthly</option>
                                        <option value="yearly">Yearly</option>
                                        <option value="custom">Custom Days</option>
                                    </select>
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div id="customDaysContainer" class="mb-4 p-3 bg-gray-50 rounded-lg border border-gray-100" style="display: none;">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Select Days</label>
                                <div class="grid grid-cols-7 gap-2">
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="monday" id="monday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="monday">Mon</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="tuesday" id="tuesday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="tuesday">Tue</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="wednesday" id="wednesday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="wednesday">Wed</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="thursday" id="thursday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="thursday">Thu</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="friday" id="friday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="friday">Fri</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="saturday" id="saturday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="saturday">Sat</label>
                                    </div>
                                    <div class="flex flex-col items-center">
                                        <div class="form-check">
                                            <input class="form-check-input appearance-none h-5 w-5 border border-gray-300 rounded-md bg-white checked:bg-purple-600 checked:border-purple-600 focus:outline-none transition duration-200 align-top bg-no-repeat bg-center bg-contain cursor-pointer" type="checkbox" value="sunday" id="sunday">
                                        </div>
                                        <label class="text-xs font-medium text-gray-700 mt-1" for="sunday">Sun</label>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="start_date" class="block text-sm font-medium text-gray-700 mb-1">Start Date & Time</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <svg class="h-4 w-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                            </svg>
                                        </div>
                                        <input type="datetime-local" class="pl-10 bg-gray-50 border border-gray-200 text-gray-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent block w-full transition-all duration-200" id="start_date" name="start_date" required>
                                    </div>
                                </div>
                                <div>
                                    <label for="end_date" class="block text-sm font-medium text-gray-700 mb-1">End Date & Time (Optional)</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <svg class="h-4 w-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                            </svg>
                                        </div>
                                        <input type="datetime-local" class="pl-10 bg-gray-50 border border-gray-200 text-gray-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent block w-full transition-all duration-200" id="end_date" name="end_date">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notification settings section -->
                    <div class="mb-5">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-gray-800">Notification Settings</h3>
                        </div>

                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm p-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="remind_before" class="block text-sm font-medium text-gray-700 mb-1">Remind Before</label>
                                    <div class="flex rounded-lg">
                                        <input type="number" class="flex-grow rounded-l-lg px-4 py-2.5 bg-gray-50 border border-gray-200 text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent" id="remind_before" name="remind_before" value="15" min="1">
                                        <span class="inline-flex items-center px-4 py-2.5 rounded-r-lg border border-l-0 border-gray-200 bg-gray-100 text-gray-700">minutes</span>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Notification Methods</label>
                                    <div class="space-y-2 mt-2">
                                        <div class="flex items-center">
                                            <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                                <input type="checkbox" id="send_email_reminder" checked class="checked:bg-purple-600 checked:right-0 absolute block w-6 h-6 rounded-full bg-white border-4 border-gray-300 appearance-none cursor-pointer">
                                                <label for="send_email_reminder" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                            </div>
                                            <label for="send_email_reminder" class="text-sm text-gray-700 flex items-center">
                                                <svg class="w-4 h-4 mr-1.5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                                </svg>
                                                Email Notification
                                            </label>
                                        </div>
                                        <div class="flex items-center">
                                            <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                                <input type="checkbox" id="send_push_notification" checked class="checked:bg-purple-600 checked:right-0 absolute block w-6 h-6 rounded-full bg-white border-4 border-gray-300 appearance-none cursor-pointer">
                                                <label for="send_push_notification" class="block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                            </div>
                                            <label for="send_push_notification" class="text-sm text-gray-700 flex items-center">
                                                <svg class="w-4 h-4 mr-1.5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                                </svg>
                                                Push Notification
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Footer buttons -->
                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" class="px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium rounded-lg transition-all duration-200 flex items-center" data-bs-dismiss="modal">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-medium rounded-lg shadow-sm hover:shadow transition-all duration-200 flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            Schedule Meeting
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MANAGE RECURRING MEETINGS -->
<div class="modal fade fixed inset-0 z-50 bg-black/30 backdrop-blur-sm" id="ManageRecurringModal" tabindex="-1" aria-labelledby="ManageRecurringModalLabel" aria-hidden="true">
    <div class="modal-dialog mx-auto my-8 max-w-2xl p-4">
        <div class="modal-content rounded-xl bg-white shadow-2xl">
            <div class="modal-header flex items-center justify-between border-b border-gray-200 p-6">
                <div class="flex items-center space-x-3">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-blue-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h5 class="modal-title text-lg font-semibold text-gray-900" id="ManageRecurringModalLabel">Manage Recurring Meetings</h5>
                </div>
                <button type="button" class="btn-close h-8 w-8 rounded-full p-1.5 text-gray-400 hover:bg-gray-100" data-bs-dismiss="modal" aria-label="Close">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="border-b border-gray-200 px-6 py-4">
                <div class="flex items-center space-x-2 text-sm text-gray-600">
                    <svg class="h-5 w-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>Manage recurring meetings instantly | or prevent them</span>
                </div>
            </div>

            <div class="modal-body p-6">
                <div id="meetings-container" class="space-y-4">
                    <!-- Loading State -->
                    <div class="flex h-32 items-center justify-center rounded-lg bg-gray-50">
                        <p class="text-sm text-gray-500">Loading meetings...</p>
                    </div>

                    <!-- Example Meeting Item (would be generated dynamically) -->
                    <div class="group flex items-center justify-between rounded-lg border border-gray-200 p-4 hover:border-blue-200 hover:shadow-sm transition-all">
                        <div class="flex-1">
                            <h4 class="text-sm font-medium text-gray-900">Weekly Team Sync</h4>
                            <div class="mt-1 flex items-center space-x-3 text-xs text-gray-500">
                                <span>Every Monday at 2:00 PM</span>
                                <span class="px-1.5 py-0.5 rounded-full bg-green-100 text-green-800">Active</span>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="text-gray-400 hover:text-blue-600 p-2 rounded-lg transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                                </svg>
                            </button>
                            <button class="text-gray-400 hover:text-red-600 p-2 rounded-lg transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Bootstrap Modal for FullCalendar -->
<!-- ClickUp-Inspired Calendar Modal (Preserving Calendar Logic) -->
<div class="modal fade" id="calendarModal" tabindex="-1" aria-labelledby="calendarModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content border-0 shadow-lg">
        <!-- Header -->
        <div class="modal-header bg-white border-0 py-3 px-4 d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
            <h5 class="modal-title font-weight-bold mb-0 text-lg" style="font-weight: 600;">
              <i class="fas fa-calendar-alt text-purple-500 me-2"></i> Your Meetings
            </h5>
          </div>
          <div class="d-flex">
            <button type="button" class="btn btn-sm clickup-gradient text-white rounded-pill px-3 shadow-sm me-2" style="font-weight: 500;">
              <i class="fas fa-plus me-1"></i> Add Meeting
            </button>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
        </div>
        
        <!-- Calendar Body with Sidebar -->
        <div class="modal-body p-0">
          <div class="row g-0">
            <!-- Sidebar -->
            <div class="col-lg-3 border-end" style="max-height: 70vh; overflow-y: auto;">
              <div class="p-3">
                <!-- Feature Section -->
                <div class="bg-gray-50 rounded-xl p-3 mb-3">
                  <p class="text-xs font-medium mb-2 text-gray-700">
                    <i class="fas fa-bolt text-amber-500 me-1"></i> <strong class="text-dark"> Power up your workspace</strong>  
                  </p>
                  <p class="text-xs text-secondary mb-2">
                     Instant scheduling, zero effort  powered by <strong style="color: #007AFF;">NLP!</strong> 
                  </p>
                  
                  <button type="button" class="btn btn-sm clickup-gradient text-white w-100 rounded-lg py-2" 
                    style="font-weight: 500; font-size: 13px;"
                    data-bs-toggle="modal" data-bs-target="#meetingModal">
                    <i class="fas fa-magic me-1"></i> Try Natural Language Processing
                  </button>
                </div>
                
                <!-- My Calendars -->
                <div class="mb-3">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="mb-0 font-weight-medium text-sm">My Calendars</h6>
                    <i class="fas fa-cog text-gray-400 text-sm"></i>
                  </div>
                  
                  <div class="sidebar-item d-flex align-items-center p-2 mb-1">
                    <div class="form-check mb-0">
                      <input class="form-check-input" type="checkbox" id="workCalendar" checked>
                      <label class="form-check-label text-sm" for="workCalendar">
                        <span class="ms-1">Work <span class="text-gray-400">(24)</span></span>
                      </label>
                    </div>
                    <div class="ms-auto">
                      <span class="badge rounded-pill" style="background-color: #7b68ee;">&nbsp;</span>
                    </div>
                  </div>
                  
                  <div class="sidebar-item d-flex align-items-center p-2 mb-1">
                    <div class="form-check mb-0">
                      <input class="form-check-input" type="checkbox" id="personalCalendar" checked>
                      <label class="form-check-label text-sm" for="personalCalendar">
                        <span class="ms-1">Personal <span class="text-gray-400">(8)</span></span>
                      </label>
                    </div>
                    <div class="ms-auto">
                      <span class="badge rounded-pill" style="background-color: #00c875;">&nbsp;</span>
                    </div>
                  </div>
                  
                  <div class="sidebar-item d-flex align-items-center p-2">
                    <div class="form-check mb-0">
                      <input class="form-check-input" type="checkbox" id="teamCalendar" checked>
                      <label class="form-check-label text-sm" for="teamCalendar">
                        <span class="ms-1">Team <span class="text-gray-400">(16)</span></span>
                      </label>
                    </div>
                    <div class="ms-auto">
                      <span class="badge rounded-pill" style="background-color: #ff7a00;">&nbsp;</span>
                    </div>
                  </div>
                </div>
                
                <!-- Team Members -->
                <!-- Team Members -->
<div class="relative max-h-60 overflow-y-auto custom-scrollbar">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h6 class="mb-0 font-weight-medium text-sm">Team Members</h6>
      <i class="fas fa-plus text-gray-400 text-sm"></i>
    </div>
  
    {% for member in members %}
      <div class="sidebar-item d-flex align-items-center p-2 mb-1">
        <div class="d-flex align-items-center">
          {% if member.profile_picture %}
            <img src="{{ member.profile_picture.url }}" alt="Profile Picture"
                 class="rounded-circle me-2"
                 style="width: 28px; height: 28px; object-fit: cover;">
          {% else %}
            <span class="rounded-circle d-inline-flex align-items-center justify-center me-2 text-white"
                  style="width: 28px; height: 28px; font-size: 12px; background-color: {{ member.profile_color }}">
              {{ member.user.username|first|upper }}
            </span>
          {% endif %}
          
          <span class="text-sm">{{ member.user.username }}</span>
        </div>
        <div class="ms-auto">
          <span class="badge rounded-pill text-xs bg-{% if member.is_online %}success{% elif member.is_busy %}danger{% else %}secondary{% endif %}">
            {% if member.is_online %}Online{% elif member.is_busy %}Busy{% else %}Away{% endif %}
          </span>
        </div>
      </div>
    {% empty %}
      <p class="text-gray-500 italic">No team members found.</p>
    {% endfor %}
  </div>
              </div>
            </div>
            
            <!-- Calendar (Preserving Original Implementation) -->
            <div class="col-lg-9">
              <div class="calendar-container p-3" style="max-height: 70vh; overflow-y: auto;">
                <!-- Preserve your original calendar div -->
                <div id="calendar"></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Footer -->
        <div class="modal-footer bg-light border-0 p-3">
          <div class="d-flex align-items-center w-100 justify-content-between">
            <div class="d-flex align-items-center text-sm text-gray-600">
              <span class="me-3"><i class="fas fa-calendar-check text-success me-1"></i> {{total_meetings}} Total Meetings</span>
              <span><i class="fas fa-clock text-info me-1"></i> 36 Hours Scheduled</span>
            </div>
            <div>
              <button type="button" class="btn btn-sm btn-primary rounded-pill">
                <i class="fas fa-external-link-alt me-1"></i> Open Full Calendar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<style>
/*sidebar scrollbar  */
/* Ensure sidebar remains scrollable but hides the scrollbar */
.col-lg-3 {
    max-height: 70vh; /* Maintain the height */
    overflow-y: auto;
    scrollbar-width: none; /* Hide scrollbar in Firefox */
}

/* Hide scrollbar for WebKit browsers (Chrome, Safari, Edge) */
.col-lg-3::-webkit-scrollbar {
    display: none;
}



.custom-scrollbar {
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: transparent transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 0px; /* Hide scrollbar for Webkit (Chrome, Safari) */
  }

/* FullCalendar Premium Styling */
.clickup-gradient {
      background: linear-gradient(135deg, #7b68ee, #7f86ff);
    }
    
    .clickup-shadow {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    .calendar-day {
      min-height: 100px;
      transition: all 0.2s;
    }
    
    .calendar-day:hover {
      background-color: rgba(0, 0, 0, 0.03);
    }
    
    .meeting-pill {
      border-left: 3px solid;
      transition: all 0.2s;
    }
    
    .meeting-pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .sidebar-item {
      border-radius: 6px;
      transition: all 0.2s;
    }
    
    .sidebar-item:hover {
      background-color: rgba(0, 0, 0, 0.04);
    }
    
    .modal-content {
      border-radius: 12px;
      overflow: hidden;
    }
/* calendar events */

/* ClickUp-inspired FullCalendar Styling */

/* Calendar Container */
.fc {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  color: #2c2c2c;
  background-color: #fff;
  box-shadow: none;
  border-radius: 8px;
}

/* Header Toolbar */
.fc .fc-toolbar {
  padding: 12px 16px;
  margin-bottom: 0;
  background: transparent;
  border-bottom: 1px solid #ebebeb;
}

.fc .fc-toolbar-title {
  font-size: 16px;
  font-weight: 600;
  color: #2c2c2c;
}

/* Button styling */
.fc .fc-button {
  border-radius: 6px;
  text-transform: none;
  font-weight: 500;
  font-size: 13px;
  height: 32px;
  padding: 0 12px;
  border: 1px solid #ebebeb;
  background-color: #fff;
  color: #2c2c2c;
  box-shadow: none;
  transition: all 0.2s ease;
}

.fc .fc-button:hover {
  background-color: #f6f8fa;
  border-color: #ebebeb;
}

.fc .fc-button:focus {
  box-shadow: 0 0 0 2px rgba(123, 104, 238, 0.25);
}

.fc .fc-button-primary {
  background: linear-gradient(135deg, #7b68ee, #7f86ff);
  border-color: transparent;
  color: white;
}

.fc .fc-button-primary:hover {
  background: linear-gradient(135deg, #6a58dd, #6e76ee);
  border-color: transparent;
}

.fc .fc-button-primary:not(:disabled):active,
.fc .fc-button-primary:not(:disabled).fc-button-active {
  background: linear-gradient(135deg, #6a58dd, #6e76ee);
  border-color: transparent;
}

/* Button Groups */
.fc .fc-button-group {
  gap: 4px;
}

.fc .fc-button-group .fc-button {
  border-radius: 6px;
}

/* Day Header (weekday names) */
.fc .fc-col-header-cell {
  padding: 8px 0;
  background-color: #fbfbfb;
}

.fc .fc-col-header-cell-cushion {
  font-weight: 500;
  font-size: 13px;
  color: #666;
  text-decoration: none;
  padding: 8px;
}

/* Day Cells */
.fc .fc-daygrid-day {
  transition: background-color 0.15s ease;
}

.fc .fc-daygrid-day:hover {
  background-color: #f9f9f9;
}

.fc .fc-daygrid-day-frame {
  padding: 3px;
  min-height: 100px;
}

.fc .fc-daygrid-day-number {
  font-size: 13px;
  color: #2c2c2c;
  text-decoration: none;
  padding: 5px 8px;
  border-radius: 50%;
}

/* Today highlighting */
.fc .fc-day-today {
  background-color: rgba(123, 104, 238, 0.05) !important;
}

.fc .fc-day-today .fc-daygrid-day-number {
  background-color: #7b68ee;
  color: white;
  font-weight: 600;
}

/* Event styling */
.fc-event {
  border: none;
  border-radius: 4px;
  padding: 2px 4px;
  font-size: 12px;
  line-height: 1.3;
  margin-bottom: 2px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  border-left: 3px solid;
  background-color: #f8f9fa;
}

.fc-event:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.fc-event .fc-event-title {
  font-weight: 500;
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fc-event .fc-event-time {
  font-weight: 600;
  opacity: 0.85;
}

/* Color-coded events (example colors from ClickUp) */
.fc-event.work-event {
  border-left-color: #7b68ee;
  color: #2c2c2c;
}

.fc-event.personal-event {
  border-left-color: #00c875;
  color: #2c2c2c;
}

.fc-event.team-event {
  border-left-color: #ff7a00;
  color: #2c2c2c;
}

.fc-event.meeting-event {
  border-left-color: #096dd9;
  color: #2c2c2c;
}

.fc-event.deadline-event {
  border-left-color: #e83e8c;
  color: #2c2c2c;
}

/* Multi-day events */
.fc-event.fc-event-start {
  border-top-left-radius: 4px;
  border-bottom-left-radius: 4px;
}

.fc-event.fc-event-end {
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
}

/* More events popover */
.fc-more-popover {
  border: none;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.fc-more-popover .fc-popover-header {
  background: #f8f9fa;
  padding: 8px 12px;
  font-weight: 600;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

.fc-more-popover .fc-popover-body {
  padding: 10px;
}

/* Month/Week/Day view specific */
.fc-view-harness {
  background-color: white;
  border-radius: 0 0 8px 8px;
}

/* Week numbers */
.fc-daygrid-week-number {
  background-color: #f1f3f5;
  color: #666;
  font-size: 12px;
  font-weight: 500;
  border-radius: 10px;
  padding: 2px 6px;
}

/* Other month days */
.fc-day-other .fc-daygrid-day-number {
  color: #bbb;
}

/* Time grid for week/day view */
.fc .fc-timegrid-slot {
  height: 40px;
  border-bottom: 1px solid #f0f0f0;
}

.fc .fc-timegrid-axis {
  padding: 8px;
  font-size: 12px;
  color: #666;
  font-weight: 500;
}

.fc .fc-timegrid-slot-label {
  font-size: 11px;
  color: #888;
  font-weight: 500;
}

.fc .fc-timegrid-now-indicator-line {
  border-color: #e83e8c;
}

.fc .fc-timegrid-now-indicator-arrow {
  border-color: #e83e8c;
  background-color: #e83e8c;
}

/* Specific ClickUp-like features */
/* Status dot for events */
.fc-event::before {
  content: '';
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 4px;
  vertical-align: middle;
  background-color: inherit;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .fc .fc-toolbar {
    flex-direction: column;
    gap: 8px;
  }
  
  .fc .fc-toolbar-chunk {
    display: flex;
    justify-content: center;
    width: 100%;
  }
}

/* Themed scrollbars for calendar container */
.calendar-container::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.calendar-container::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.calendar-container::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 4px;
}

.calendar-container::-webkit-scrollbar-thumb:hover {
  background: #aaa;
}

/* Event drag and resize styling */
.fc-event.fc-event-dragging {
  opacity: 0.7;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.fc-event.fc-event-resizing {
  opacity: 0.7;
}

/* Custom animation for event loading */
@keyframes eventFadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

.fc-event {
  animation: eventFadeIn 0.3s ease forwards;
}

</style>

<!-- CALENDAR MEETING DETAILS -->
<!-- Updated Modal Structure -->
<div class="modal fade" id="meetingDetailsModal" tabindex="-1" aria-labelledby="meetingDetailsLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1.25rem;">
            <!-- Modal Header -->
            <div class="modal-header bg-indigo-50 border-0 py-4 px-6" style="border-radius: 1.25rem 1.25rem 0 0;">
                <div class="flex-grow-1">
                    <h2 class="modal-title text-xl font-bold text-gray-900 flex items-center" id="meetingTitle" style="font-family: 'Inter', sans-serif;">
                        <svg class="w-6 h-6 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <span id="meetingTitleText" class="truncate">Meeting Title</span>
                    </h2>
                </div>
                <button type="button" class="btn-close p-2" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body px-6 py-5" style="font-family: 'Inter', sans-serif;">
                <!-- Three-Dot Menu -->
                <div class="absolute top-6 right-6">
                    <div class="dropdown">
                        <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors" type="button" id="meetingOptionsDropdown" data-bs-toggle="dropdown">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                            </svg>
                        </button>
                        <ul class="dropdown-menu shadow-lg border border-gray-100 rounded-xl py-2">
                            <li>
                                <button class="dropdown-item px-4 py-2.5 hover:bg-gray-50 text-sm flex items-center" id="meetingReminderButton">
                                    <svg class="w-4 h-4 mr-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                                    </svg>
                                    Set Reminder
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Details Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- Date -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Date</div>
                            <div class="text-sm font-medium text-gray-900" id="meetingDate"></div>
                        </div>
                    </div>

                    <!-- Time -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Time</div>
                            <div class="text-sm font-medium text-gray-900" id="meetingTime"></div>
                        </div>
                    </div>

                    <!-- Location -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Location</div>
                            <div class="text-sm font-medium text-gray-900" id="meetingLocation"></div>
                        </div>
                    </div>

                    <!-- Status -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Status</div>
                            <div class="status-badge">
                                <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800" id="meetingStatus"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Creator -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Participants</div>
                            <div class="text-sm font-medium text-gray-900" id="meetingUser"></div>
                        </div>
                    </div>

                    <!-- Invitees -->
                    <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-xl">
                        <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-1">Organizer</div>
                            <div class="text-sm font-medium text-gray-900" id="meetingInvitee"></div>
                        </div>
                    </div>
                </div>

                <!-- Description Section -->
                <div class="bg-indigo-50 p-4 rounded-xl mb-6">
                    <div class="text-xs font-medium text-gray-500 uppercase tracking-wide mb-3">Description</div>
                    <div class="text-sm text-gray-700 leading-relaxed" id="meetingDescription"></div>
                </div>

                <!-- Join Button -->
                <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-md transition-all flex items-center justify-center" id="meetingJoinButton">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Join
                </button>
                
            </div>
        </div>
    </div>
</div>

<!-- SET REMINDER MODAL -->
<div class="modal fade" id="MeetsReminderModal" tabindex="-1" aria-labelledby="MeetsReminderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1.25rem;">
            <div class="modal-header bg-indigo-50 border-0 py-4 px-6" style="border-radius: 1.25rem 1.25rem 0 0;">
                <div class="flex-grow-1">
                    <h2 class="modal-title text-xl font-bold text-gray-900 flex items-center" id="MeetsReminderModalLabel" style="font-family: 'Inter', sans-serif;">
                        <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Configure Meeting Reminder
                    </h2>
                </div>
                <button type="button" class="btn-close p-2" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body px-6 py-5" style="font-family: 'Inter', sans-serif;">
                <form id="setReminderForm" class="space-y-5">
                    <input type="hidden" id="reminderMeetingId">

                    <!-- Reminder Time Section -->
                    <div class="space-y-3">
                        <label class="text-sm font-medium text-gray-700 flex items-center">
                            <svg class="w-4 h-4 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Reminder Timing
                        </label>
                        <select id="reminderTime" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all">
                            <option value="15">15 minutes before</option>
                            <option value="30">30 minutes before</option>
                            <option value="45">45 minutes before</option>
                            <option value="0">Exactly at meeting time</option>
                            <option value="custom">Custom time before</option>
                        </select>
                    </div>

                    <!-- Custom Time Fields -->
                    <div id="customTimeFields" class="d-none grid grid-cols-2 gap-4 bg-indigo-50 p-4 rounded-xl">
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">Hours</label>
                            <div class="relative">
                                <input type="number" id="customHours" class="w-full px-4 py-2 border border-gray-200 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500" min="0" placeholder="0">
                                <span class="absolute right-4 top-3 text-gray-400 text-sm">hrs</span>
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium text-gray-700">Minutes</label>
                            <div class="relative">
                                <input type="number" id="customMinutes" class="w-full px-4 py-2 border border-gray-200 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500" min="0" placeholder="0">
                                <span class="absolute right-4 top-3 text-gray-400 text-sm">min</span>
                            </div>
                        </div>
                    </div>

                    <!-- Reminder Type -->
                    <div class="space-y-3">
                        <label class="text-sm font-medium text-gray-700 flex items-center">
                            <svg class="w-4 h-4 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            Notification Method
                        </label>
                        <select id="reminderType" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg bg-gray-50 focus:ring-2 focus:ring-indigo-500">
                            <option value="email">Email Notification</option>
                        </select>
                    </div>

                    <!-- Reminder Style -->
                    <div class="space-y-3">
                        <label class="text-sm font-medium text-gray-700 flex items-center">
                            <svg class="w-4 h-4 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                            </svg>
                            Design Style
                        </label>
                        <select id="reminderStyle" class="w-full px-4 py-2.5 border border-gray-200 rounded-lg bg-gray-50 focus:ring-2 focus:ring-indigo-500">
                            <option value="minimalist" class="flex items-center">
                                <span class="w-2 h-2 mr-2 bg-gray-300 rounded-full"></span>
                                Minimalist
                            </option>
                            <option value="modern" class="flex items-center">
                                <span class="w-2 h-2 mr-2 bg-indigo-500 rounded-full"></span>
                                Modern
                            </option>
                            <option value="dark" class="flex items-center">
                                <span class="w-2 h-2 mr-2 bg-gray-800 rounded-full"></span>
                                Dark
                            </option>
                            <option value="classic" class="flex items-center">
                                <span class="w-2 h-2 mr-2 bg-blue-500 rounded-full"></span>
                                Classic
                            </option>
                            <option value="playful" class="flex items-center">
                                <span class="w-2 h-2 mr-2 bg-pink-400 rounded-full"></span>
                                Playful
                            </option>
                        </select>
                    </div>

                    <!-- Remind All Members -->
                    <div class="flex items-center space-x-3 bg-indigo-50 p-4 rounded-xl">
                        <input type="checkbox" id="remindAllMembers" class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                        <label for="remindAllMembers" class="text-sm font-medium text-gray-700">
                            Notify All Participants
                        </label>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-all flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Save Reminder Settings
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- GENERATE EMBED CODE -->
<!-- Embed Code Modal -->
<div class="modal fade" id="embedModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1.25rem;">
            <div class="modal-header bg-indigo-50 border-0" style="border-radius: 1.25rem 1.25rem 0 0; padding: 2rem;">
                <div class="flex-grow-1">
                    <h2 class="modal-title text-2xl font-bold text-gray-900 mb-1" style="font-family: 'Inter', sans-serif;">
                        <svg class="inline-block mr-2 -mt-1" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                        </svg>
                        Embed Meetings on Your Website
                    </h2>
                    <p class="text-sm text-gray-500 mt-1">Seamlessly integrate your Calendar Plus meetings with any website</p>
                </div>
                <button type="button" class="btn-close p-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body px-2rem py-3" style="font-family: 'Inter', sans-serif;">
                <!-- Feature Highlights -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-blue-50 p-5 rounded-xl">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900">Instant Integration</h3>
                        </div>
                        <p class="text-sm text-gray-600">Copy-paste the embed code to any website builder or custom code environment.</p>
                    </div>

                    <div class="bg-purple-50 p-5 rounded-xl">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900">Automatic Updates</h3>
                        </div>
                        <p class="text-sm text-gray-600">Changes to your schedule automatically reflect on the embedded view.</p>
                    </div>
                </div>

                <!-- Step-by-Step Guide -->
                <div class="border-l-4 border-indigo-100 pl-5 mb-8">
                    <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4">Implementation Guide</h3>
                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-base font-semibold text-gray-900 mb-2">Add the Embed Code</h4>
                                <p class="text-sm text-gray-600 mb-3">Insert this iframe where you want meetings to appear</p>
                                <div class="relative group">
                                    <pre class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono"><code id="embedIframe">&lt;iframe src="your-url" class="w-full h-96 border-0"&gt;&lt;/iframe&gt;</code></pre>
                                    <button id="copyIframeBtn" class="absolute top-3 right-3 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-base font-semibold text-gray-900 mb-2">Enable Auto-Refresh</h4>
                                <p class="text-sm text-gray-600 mb-3">Add this script before &lt;/body&gt; for live updates</p>
                                <div class="relative group">
                                    <pre class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm font-mono"><code id="embedScript">&lt;script src="your-script-url" async&gt;&lt;/script&gt;</code></pre>
                                    <button id="copyScriptBtn" class="absolute top-3 right-3 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors">
                                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pro Tips -->
                <div class="bg-yellow-50 p-5 rounded-xl border border-yellow-100">
                    <h3 class="text-sm font-semibold text-yellow-800 uppercase tracking-wide mb-3">Pro Tips</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center">
                            <svg class="w-4 h-4 text-yellow-600 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Use our responsive classes to ensure perfect display on mobile devices
                        </li>
                        <li class="flex items-center">
                            <svg class="w-4 h-4 text-yellow-600 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Customize colors using our CSS variables to match your brand
                        </li>
                    </ul>
                </div>
            </div>

            <div class="modal-footer bg-gray-50 border-0 py-4 px-6" style="border-radius: 0 0 1.25rem 1.25rem;">
                <button type="button" class="btn btn-link text-gray-600 hover:text-gray-800" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary bg-indigo-500 hover:bg-indigo-600 border-0">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path>
                    </svg>
                    Save Configuration
                </button>
            </div>
        </div>
    </div>
</div>

<!-- SHUT DOWN ALL MEETINGS -->
<!-- Delete Meetings Modal -->
<div class="modal fade fixed inset-0 z-50 bg-black/30 backdrop-blur-sm" id="DeleteMeetsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog mx-auto my-8 max-w-2xl p-4">
        <div class="modal-content rounded-xl bg-white shadow-2xl">
            <div class="modal-header flex items-center justify-between border-b border-gray-200 p-6">
                <div class="flex items-center space-x-3">
                    <div class="flex h-8 w-8 items-center justify-center rounded-full bg-red-100 text-red-600">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                    </div>
                    <h5 class="modal-title text-lg font-semibold text-red-600">Delete All Meetings</h5>
                </div>
                <button type="button" class="btn-close h-8 w-8 rounded-full p-1.5 text-gray-400 hover:bg-gray-100" data-bs-dismiss="modal" aria-label="Close">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <div class="modal-body space-y-6 p-6">
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="mt-0.5 text-gray-500">
                            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h6 class="font-medium text-gray-900">What happens when you delete?</h6>
                            <ul class="mt-2 space-y-3 text-sm text-gray-600">
                                <li class="flex items-start space-x-2">
                                    <span class="text-red-500"></span>
                                    <span>Permanently remove all scheduled meetings</span>
                                </li>
                                <li class="flex items-start space-x-2">
                                    <span class="text-red-500"></span>
                                    <span>No recovery option for deleted meetings</span>
                                </li>
                                <li class="flex items-start space-x-2">
                                    <span class="text-green-500"></span>
                                    <span>Confirmation email will be sent</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="mt-0.5 text-gray-500">
                            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h6 class="font-medium text-gray-900">Last 3 Meetings</h6>
                            <div id="lastMeetingsContainer" class="mt-3 space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4">
                                <p class="text-sm text-gray-500">Loading meetings...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div class="mt-0.5 text-gray-500">
                            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"/>
                            </svg>
                        </div>
                        <div class="flex-1 space-y-3">
                            <label for="deletePassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                            <input type="password" 
                                   id="deletePassword" 
                                   class="block w-full rounded-lg border border-gray-300 px-4 py-2.5 shadow-sm focus:border-red-500 focus:ring-red-500" 
                                   placeholder="Enter your password" 
                                   required>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end space-x-3 pt-4">
                    <button id="confirmDeleteMeetings" 
                            class="flex items-center space-x-2 rounded-lg bg-red-600 px-5 py-2.5 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        <span>Confirm Delete</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- --------------------------------------------------------------------------------------------------------------------------- -->
<!-- WORKSPACE TASKS MODALS -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- Task Modal -->
<div id="TaskModal" class="hidden fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4">
    <div class="bg-white/90 backdrop-blur-lg rounded-xl shadow-2xl p-8 w-full max-w-2xl border border-white/20">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-slate-800">
                <span class="bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent">
                    Create New Task
                </span>
            </h2>
            <button id="closeTaskModal" class="p-2 hover:bg-slate-100/50 rounded-full transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <form id="taskForm" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Title Field -->
                <div class="col-span-2">
                    <label class="block text-sm font-medium text-slate-600 mb-2">Title</label>
                    <div class="relative">
                        <span class="absolute left-3 top-3 text-slate-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd" />
                            </svg>
                        </span>
                        <input type="text" id="taskTitle" class="w-full pl-10 pr-4 py-3 border border-slate-300/80 rounded-lg bg-white/50 focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all">
                    </div>
                </div>

                <!-- Description Field -->
                <div class="col-span-2">
                    <label class="block text-sm font-medium text-slate-600 mb-2">Description</label>
                    <div class="relative">
                        <span class="absolute left-3 top-3 text-slate-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
                            </svg>
                        </span>
                        <textarea id="taskDescription" rows="4" class="w-full pl-10 pr-4 py-3 border border-slate-300/80 rounded-lg bg-white/50 focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all"></textarea>
                    </div>
                </div>

                <!-- Priority Field -->
                <div>
                    <label class="block text-sm font-medium text-slate-600 mb-2">Priority</label>
                    <div class="relative">
                        <span class="absolute left-3 top-3 text-slate-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd" />
                            </svg>
                        </span>
                        <select id="taskPriority" class="w-full pl-10 pr-4 py-3 border border-slate-300/80 rounded-lg bg-white/50 focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 appearance-none transition-all">
                            <option value="high">High Priority</option>
                            <option value="medium" selected>Medium Priority</option>
                            <option value="low">Low Priority</option>
                        </select>
                        <span class="absolute right-3 top-3 text-slate-400 pointer-events-none">
                            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </span>
                    </div>
                </div>

                <!-- Due Date Field -->
                <div>
                    <label class="block text-sm font-medium text-slate-600 mb-2">Due Date</label>
                    <div class="relative">
                        <span class="absolute left-3 top-3 text-slate-400">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
                            </svg>
                        </span>
                        <input type="datetime-local" id="taskDueDate" class="w-full pl-10 pr-4 py-3 border border-slate-300/80 rounded-lg bg-white/50 focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500 transition-all">
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4 pt-6 border-t border-slate-200/50">
                <button type="button" class="px-6 py-2.5 text-slate-600 hover:bg-slate-100/50 rounded-lg transition-colors">
                    Cancel
                </button>
                <button type="submit" class="px-6 py-2.5 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Save Task
                </button>
            </div>
        </form>
    </div>
</div>


<!-- Manage Tasks -->
<!-- Modal Kanban Board-->
<div id="kanban-modal" class="modal fixed inset-0 z-50 bg-black/30 backdrop-blur-sm" style="display: none;">
    <div class="modal-content relative mx-auto my-8 max-w-7xl rounded-xl bg-white shadow-2xl">
        <span class="close absolute right-6 top-6 cursor-pointer rounded-full p-2 text-gray-500 hover:bg-gray-100">&times;</span>
        
        <div class="px-6 pt-4 pb-6">
            <h2 class="mb-6 text-2xl font-semibold text-gray-900">Kanban Board</h2>
            
            <!-- Preserved structure with same IDs and classes -->
            <div class="kanban-board flex gap-4 overflow-x-auto pb-4">
                <div id="pending" class="kanban-column min-w-[300px] flex-1">
                    <div class="rounded-lg border border-gray-200 bg-gray-50">
                        <h3 class="border-b border-gray-200 px-4 py-3 text-sm font-semibold text-gray-700">Pending</h3>
                        <div class="kanban-column-content space-y-2 p-2">
                            <div class="task-card rounded-lg border border-gray-200 bg-white p-3 shadow-sm">
                                <h4 class="mb-1 text-sm font-medium text-gray-900">Design homepage</h4>
                                <p class="text-xs text-gray-600">Create mockups for the new landing page</p>
                                <div class="task-meta"></div>
                            </div>
                            <div class="add-task-btn mt-2 cursor-pointer rounded-md border border-dashed border-gray-300 p-2 text-center text-sm text-gray-500 hover:border-gray-400 hover:bg-gray-50">
                                + Add Task
                            </div>
                        </div>
                    </div>
                </div>

                <div id="in_progress" class="kanban-column min-w-[300px] flex-1">
                    <div class="rounded-lg border border-gray-200 bg-gray-50">
                        <h3 class="border-b border-gray-200 px-4 py-3 text-sm font-semibold text-gray-700">In Progress</h3>
                        <div class="kanban-column-content space-y-2 p-2">
                            <div class="add-task-btn mt-2 cursor-pointer rounded-md border border-dashed border-gray-300 p-2 text-center text-sm text-gray-500 hover:border-gray-400 hover:bg-gray-50">
                                + Add Task
                            </div>
                        </div>
                    </div>
                </div>

                <div id="completed" class="kanban-column min-w-[300px] flex-1">
                    <!-- Same structure preserved -->
                </div>

                <div id="blocked" class="kanban-column min-w-[300px] flex-1">
                    <!-- Same structure preserved -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Profile Modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content glass-card" style="border-radius: 20px; backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(255, 255, 255, 0.3);">
            <div class="modal-header border-0">
                <h3 class="modal-title fw-bold text-teal-600">Profile Settings</h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-5">
                <form id="updateProfileForm" enctype="multipart/form-data" class="row g-4">
                    <!-- Left Column -->
                    <div class="col-md-4">
                        <!-- Profile Picture Section -->
                        <div class="glass-panel p-4 rounded-3 mb-4" style="background: rgba(245, 245, 245, 0.6);">
                            <div class="text-center mb-4">
                                <img id="profile_preview" src="" class="rounded-circle shadow-lg" width="120" style="display: none; border: 3px solid #80cbc4;">
                                <div class="mt-3">
                                    <label class="btn btn-teal btn-sm rounded-pill px-4">
                                        <i class="fas fa-camera me-2"></i>Upload Photo
                                        <input type="file" class="d-none" id="profile_picture" name="profile_picture">
                                    </label>
                                </div>
                            </div>

                            <!-- User Info -->
                            <div class="mb-4">
                                <label class="form-label text-secondary">Full Name</label>
                                <input type="text" class="form-control glass-input rounded-pill" id="full_name" name="full_name" style="background: rgba(255, 255, 255, 0.8);">
                            </div>

                            <div class="mb-4">
                                <label class="form-label text-secondary">Role</label>
                                <div class="glass-badge rounded-pill p-2 text-center bg-teal-10 text-teal-600">
                                    <span id="profile_role"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Activity Stats -->
                        <div class="glass-panel p-4 rounded-3" style="background: rgba(245, 245, 245, 0.6);">
                            <h6 class="fw-bold text-teal-600 mb-3"><i class="fas fa-chart-line me-2"></i>Activity</h6>
                            <div class="activity-stats">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-secondary">Meetings</span>
                                    <span id="meeting_count" class="fw-bold text-teal-600">0</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-secondary">Events</span>
                                    <span id="event_count" class="fw-bold text-teal-600">0</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-secondary">Bookings</span>
                                    <span id="booking_count" class="fw-bold text-teal-600">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-8">
                        <!-- Security Section -->
                        <div class="glass-panel p-4 rounded-3 mb-4" style="background: rgba(245, 245, 245, 0.6);">
                            <h6 class="fw-bold text-teal-600 mb-3"><i class="fas fa-shield-alt me-2"></i>Security</h6>
                            <div class="mb-3">
                                <p class="text-secondary">Manage password and security settings</p>
                                <a href="#" class="btn btn-outline-teal rounded-pill px-4">
                                    <i class="fas fa-lock me-2"></i>Update Password
                                </a>
                            </div>

                            <div class="mt-4">
                                <h6 class="fw-bold text-teal-600"><i class="fas fa-link me-2"></i>Linked Accounts</h6>
                                <p class="text-secondary">Workspace Accounts linked</p>
                                <a href="#" class="btn btn-teal-soft rounded-pill px-4">
                                    {{organization.name}}'s Accounts <i class="fas fa-external-link-alt ms-2"></i>
                                </a>
                            </div>
                        </div>

                        <!-- Integrations Section -->
                        <div class="glass-panel p-4 rounded-3" style="background: rgba(245, 245, 245, 0.6);">
                            <h6 class="fw-bold text-teal-600 mb-4"><i class="fas fa-plug me-2"></i>Integrations</h6>
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <div class="integration-card p-3 rounded-3 d-flex align-items-center">
                                        <img src="https://th.bing.com/th/id/OIP.jLv9vlFObM9lOmbUG7psKwHaEK?rs=1&pid=ImgDetMain" class="me-3" width="40">
                                        <div>
                                            <p class="mb-0 fw-bold">Google Calendar</p>
                                            <small class="text-success">Available to Connect</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="integration-card p-3 rounded-3 d-flex align-items-center">
                                        <img src="https://cdn.worldvectorlogo.com/logos/slack-new-logo.svg" class="me-3" width="40">
                                        <div>
                                            <p class="mb-0 fw-bold">Slack</p>
                                            <small class="text-success">Available to Connect</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a href="#" class="btn btn-link text-teal-600">
                                Manage All Integrations <i class="fas fa-arrow-right ms-2"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="col-12 text-end mt-4">
                        <button type="submit" class="btn btn-teal rounded-pill px-5 py-2">
                            <i class="fas fa-save me-2"></i>Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- RECENT TABS -->
<!-- Recent Tabs Modal -->
<div class="modal fade" id="recentTabsModal" tabindex="-1" aria-labelledby="recentTabsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content rounded-[1.5rem] overflow-hidden bg-white shadow-2xl border border-gray-100/80">
            <div class="modal-header px-6 pt-6 pb-4 border-b border-gray-100">
                <div class="flex items-center justify-between w-full">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-blue-500/10 rounded-xl flex items-center justify-center">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <h5 class="modal-title text-[22px] font-semibold text-gray-900 font-inter">Recent Sessions</h5>
                    </div>
                    <button type="button" class="p-2 hover:bg-gray-50 rounded-xl transition-colors" data-bs-dismiss="modal" aria-label="Close">
                        <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="modal-body p-0">
                <div class="overflow-y-auto max-h-[65vh] scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100">
                    <div id="recentTabsContainer" class="grid grid-cols-1 divide-y divide-gray-100">
                        <!-- Recent Tab Item Example -->
                        <div class="group relative flex items-center px-6 py-4 hover:bg-gray-50/50 transition-colors cursor-pointer">
                            <div class="flex-shrink-0 w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0 pr-4">
                                <h6 class="text-sm font-medium text-gray-900 truncate">Project Requirements Document</h6>
                                <p class="text-[13px] text-gray-500 truncate mt-1">https://company.com/docs/project-requirements</p>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-xs font-medium px-2 py-1 rounded-md bg-green-100 text-green-700">Active</span>
                                <svg class="w-5 h-5 text-gray-400 group-hover:text-gray-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </div>
                        </div>
                        <!-- Repeat similar structure for other tabs -->
                    </div>
                </div>
            </div>

            <div class="modal-footer flex justify-between items-center px-6 py-4 border-t border-gray-100">
                <button type="button" class="flex items-center text-red-500 hover:text-red-600 transition-colors group" id="clearRecentTabs">
                    <svg class="w-5 h-5 mr-2 group-hover:rotate-12 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                    <span class="text-sm font-medium">Clear History</span>
                </button>
                <div class="flex space-x-3">
                    <button type="button" class="px-5 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors" data-bs-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Preview and launch Installed apps -->
<div class="modal fade" id="installedAppsModal" tabindex="-1" aria-labelledby="installedAppsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content rounded-lg shadow-xl border-0 overflow-hidden">
            <!-- Modal Header with gradient background -->
            <div class="modal-header bg-gradient-to-r from-purple-600 to-blue-500 text-white border-0 py-4">
                <div class="flex items-center">
                    <span class="material-icons-outlined mr-2">apps</span>
                    <h5 class="modal-title text-xl font-bold" id="installedAppsLabel">Installed Apps</h5>
                </div>
                <div class="flex items-center">
                    <button class="bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full p-1 mr-2 transition-all">
                        <span class="material-icons-outlined text-sm">help_outline</span>
                    </button>
                    <button type="button" class="btn-close btn-close-white transition-transform hover:rotate-90 duration-300" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            
            <!-- Search bar and filters -->
            <div class="px-6 py-3 border-b border-gray-200 bg-gray-50">
                <div class="flex flex-wrap items-center justify-between">
                    <div class="relative w-64">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400">
                            <span class="material-icons-outlined text-sm">search</span>
                        </span>
                        <input type="text" class="pl-10 pr-4 py-2 w-full rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Search apps...">
                    </div>
                    <div class="flex items-center space-x-2 mt-2 sm:mt-0">
                        <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium flex items-center hover:bg-gray-50 transition-colors">
                            <span class="material-icons-outlined text-sm mr-1">filter_list</span>
                            Filter
                        </button>
                        <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium flex items-center hover:bg-gray-50 transition-colors">
                            <span class="material-icons-outlined text-sm mr-1">sort</span>
                            Sort
                        </button>
                        <button class="px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center transition-colors">
                            <span class="material-icons-outlined text-sm mr-1">add</span>
                            Add App
                        </button>
                        <a href="{% url 'purchase_apps' organization.id%}">
                            <button class="px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center transition-colors">
                                <span class="material-icons-outlined text-sm mr-1">store</span>
                                Install More
                            </button>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Modal Body with custom scrollbar -->
            <div class="modal-body p-6" style="max-height: 70vh; overflow-y: auto; scrollbar-width: thin;" 
                 class="scrollbar-hide">
                
                <!-- Category selector -->
                <div class="flex space-x-1 mb-6 overflow-x-auto pb-2 scrollbar-hide">
                    <button class="px-4 py-2 bg-blue-100 text-blue-600 rounded-full text-sm font-medium whitespace-nowrap">
                        All Apps
                    </button>
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
                        Integration
                    </button>
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
                        Communication
                    </button>
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
                        Productivity
                    </button>
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
                        Developer Tools
                    </button>
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
                        Analytics
                    </button>
                </div>
                
                <!-- Apps grid -->
                <div id="appsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Sample App Card 1 -->
                    <div class="bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all flex overflow-hidden">
                        <div class="bg-indigo-100 p-4 flex items-center justify-center">
                            <span class="material-icons-outlined text-indigo-600 text-2xl">code</span>
                        </div>
                        <div class="p-4 flex-1">
                            <div class="flex justify-between items-start">
                                <h6 class="font-semibold text-gray-800">GitHub</h6>
                                <span class="bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full font-medium">Active</span>
                            </div>
                            <p class="text-gray-600 text-sm mt-1">Connect your repositories and manage development workflow</p>
                            <div class="flex justify-between items-center mt-3">
                                <div class="flex items-center text-xs text-gray-500">
                                    <span class="material-icons-outlined text-xs mr-1">update</span>
                                    Updated 2d ago
                                </div>
                                <button class="text-blue-500 hover:text-blue-700 text-sm font-medium">Configure</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Load more button -->
                <div class="text-center mt-6">
                    <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors">
                        Load more apps
                    </button>
                </div>
            </div>
            
            <!-- Modal Footer -->
            <div class="modal-footer bg-gray-50 border-t border-gray-200 py-3 px-6 flex justify-between items-center">
                <div class="text-xs text-gray-500">
                    Showing 4 of 42 available apps
                </div>
                <div>
                    <button type="button" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm font-medium mr-2 transition-colors" data-bs-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors">
                        Manage Settings
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    /* installed apps */
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}
.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* For the Material Icons */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Material+Icons+Outlined&display=swap');

/* Modern font */
body {
    font-family: 'Inter', sans-serif;
}

</style>


<!-- Create Channel (Admin Only) -->
<div class="modal fade" id="createChannelModal" tabindex="-1" aria-labelledby="createChannelLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- Increased width with modal-lg -->
    <div class="modal-content border-0 shadow-lg rounded-lg overflow-hidden">
      <!-- Header -->
      <div class="modal-header bg-white border-bottom-0 px-6 py-4">
        <div class="flex items-center">
          <div class="bg-purple-500 text-white rounded-md p-2 mr-3">
            <!-- Direct SVG icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 10h12"></path>
              <path d="M4 14h9"></path>
              <path d="M4 18h6"></path>
              <path d="M18 15l3 3-3 3"></path>
            </svg>
          </div>
          <h5 class="modal-title text-lg font-semibold" id="createChannelLabel">Create New Channel</h5>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <!-- Body -->
      <div class="modal-body px-6 py-0">
        <form id="channelForm" class="space-y-5">
          <input type="hidden" id="org_id" value="1">
          
          <!-- Channel Name Section -->
          <div class="mb-4">
            <div class="mb-2">
              <label class="text-sm font-medium text-gray-700 mb-1 block">Channel Name</label>
              <input type="text" class="form-control border border-gray-300 rounded-md w-full py-2 px-3 focus:ring-2 focus:ring-purple-500 focus:border-purple-500" id="channelName" placeholder="e.g. product-dev, marketing, design" required>
            </div>
            <p class="text-xs text-gray-500 mt-1">Channels are where conversations happen around a topic. Use a name that is easy to find and understand.</p>
          </div>
          
          <!-- Channel Type Section -->
          <div class="mb-4">
            <label class="text-sm font-medium text-gray-700 mb-2 block">Channel Type</label>
            <div class="grid grid-cols-2 gap-3" id="channelTypeSelector"> <!-- Changed to 2 columns -->
              <!-- Blank Channel -->
              <div class="relative">
                <button type="button" class="w-full text-left px-4 py-3 border rounded-lg flex items-center border-purple-500 bg-purple-50" data-value="BLANK">
                  <div class="flex-shrink-0 mr-3 bg-purple-100 rounded-md p-2">
                    <!-- Direct SVG icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7 10 12 15 17 10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <span class="font-medium text-gray-800">Blank Channel</span>
                    <p class="text-xs text-gray-500 mt-1">Start with a clean slate for any type of conversation</p>
                  </div>
                  <div class="flex-shrink-0 text-purple-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </svg>
                  </div>
                </button>
              </div>
              
              <!-- Project Starter -->
              <div class="relative">
                <button type="button" class="w-full text-left px-4 py-3 border rounded-lg flex items-center border-gray-200 opacity-75 cursor-not-allowed" data-value="PROJECT">
                  <div class="flex-shrink-0 mr-3 bg-blue-100 rounded-md p-2">
                    <!-- Direct SVG icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                      <line x1="3" y1="9" x2="21" y2="9"></line>
                      <line x1="9" y1="21" x2="9" y2="9"></line>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <div class="flex items-center">
                      <span class="font-medium text-gray-800">Project Starter</span>
                      <span class="ml-2 px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800">Pro</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Kickstart projects with goals, milestones and templates</p>
                  </div>
                </button>
                <div class="absolute top-0 left-0 w-full h-full bg-gray-100 opacity-10 rounded-lg"></div>
              </div>
              
              <!-- Help Requests -->
              <div class="relative">
                <button type="button" class="w-full text-left px-4 py-3 border rounded-lg flex items-center border-gray-200 opacity-75 cursor-not-allowed" data-value="HELP">
                  <div class="flex-shrink-0 mr-3 bg-green-100 rounded-md p-2">
                    <!-- Direct SVG icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                      <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <div class="flex items-center">
                      <span class="font-medium text-gray-800">Help Requests</span>
                      <span class="ml-2 px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800">Pro</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Structured help desk with priority levels and status tracking</p>
                  </div>
                </button>
                <div class="absolute top-0 left-0 w-full h-full bg-gray-100 opacity-10 rounded-lg"></div>
              </div>
              
              <!-- Team Support -->
              <div class="relative">
                <button type="button" class="w-full text-left px-4 py-3 border rounded-lg flex items-center border-gray-200 opacity-75 cursor-not-allowed" data-value="TEAM">
                  <div class="flex-shrink-0 mr-3 bg-orange-100 rounded-md p-2">
                    <!-- Direct SVG icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                      <circle cx="9" cy="7" r="4"></circle>
                      <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                      <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <div class="flex items-center">
                      <span class="font-medium text-gray-800">Team Support</span>
                      <span class="ml-2 px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800">Pro</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Collaborative space with team roles and shared resources</p>
                  </div>
                </button>
                <div class="absolute top-0 left-0 w-full h-full bg-gray-100 opacity-10 rounded-lg"></div>
              </div>
            </div>
            <input type="hidden" id="channelType" value="BLANK">
          </div>
          
          <!-- Channel Preview -->
          <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 mb-4">
            <h6 class="text-xs uppercase font-semibold text-gray-500 mb-2">Preview</h6>
            <div class="flex items-center">
              <div class="bg-purple-500 text-white rounded-md p-1 mr-2">
                <!-- Hash icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="4" y1="9" x2="20" y2="9"></line>
                  <line x1="4" y1="15" x2="20" y2="15"></line>
                  <line x1="10" y1="3" x2="8" y2="21"></line>
                  <line x1="16" y1="3" x2="14" y2="21"></line>
                </svg>
              </div>
              <span id="previewChannelName" class="font-medium">channel-name</span>
            </div>
          </div>
          
          <!-- Visibility Section with enhanced toggles -->
          <div class="mb-4">
            <label class="text-sm font-medium text-gray-700 mb-2 block">Visibility</label>
            <div class="grid grid-cols-2 gap-3"> <!-- Changed to 2 columns -->
              <!-- Public Option -->
              <label class="cursor-pointer">
                <input type="radio" name="visibility" value="PUBLIC" class="sr-only" checked>
                <div class="border rounded-lg px-4 py-3 flex items-center hover:bg-gray-50 transition-all visibility-option border-purple-500">
                  <div class="flex-shrink-0 mr-3 bg-green-100 text-green-600 rounded-full p-2">
                    <!-- Globe icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="2" y1="12" x2="22" y2="12"></line>
                      <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <span class="font-medium text-gray-800">Public</span>
                    <p class="text-xs text-gray-500 mt-1">Anyone in your organization can join and view this channel</p>
                  </div>
                  <div class="flex-shrink-0 visibility-indicator">
                    <div class="w-5 h-5 rounded-full border-2 border-purple-500 flex items-center justify-center">
                      <div class="w-3 h-3 rounded-full bg-purple-500"></div>
                    </div>
                  </div>
                </div>
              </label>
              
              <!-- Private Option -->
              <label class="cursor-pointer">
                <input type="radio" name="visibility" value="PRIVATE" class="sr-only">
                <div class="border rounded-lg px-4 py-3 flex items-center hover:bg-gray-50 transition-all visibility-option">
                  <div class="flex-shrink-0 mr-3 bg-amber-100 text-amber-600 rounded-full p-2">
                    <!-- Lock icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                  </div>
                  <div class="flex-grow">
                    <span class="font-medium text-gray-800">Private</span>
                    <p class="text-xs text-gray-500 mt-1">Only invited members can join and view this channel</p>
                  </div>
                  <div class="flex-shrink-0 visibility-indicator">
                    <div class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center">
                      <div class="w-3 h-3 rounded-full bg-white"></div>
                    </div>
                  </div>
                </div>
              </label>
            </div>
            <input type="hidden" id="visibility" value="PUBLIC">
          </div>
          
          <!-- Allowed Members (Only for Private Channels) - Enhanced and larger -->
          <div class="mb-5 d-none rounded-lg border border-gray-200 p-5" id="membersContainer">
            <label class="text-sm font-medium text-gray-700 mb-2 block">Allowed Members</label>
            <div class="relative">
              <div class="flex items-center border border-gray-300 rounded-md px-3 py-2 bg-white">
                <!-- Search icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 mr-2">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" class="form-control border-0 p-0 w-full focus:ring-0 focus:outline-none" placeholder="Search members...">
              </div>
              <!-- Larger select with increased height -->
              <select class="form-select mt-2 h-40" id="allowedMembers" multiple style="height: 140px;"></select>
            </div>
            
            <!-- Enhanced selected members section -->
            <div class="mt-4">
              <div class="flex justify-between">
                <div class="text-sm text-gray-700 font-medium">Selected members</div>
                <div class="text-xs text-purple-600 cursor-pointer">Select all</div>
              </div>
              <div class="p-3 border border-gray-200 rounded-lg mt-2 min-h-10 bg-gray-50">
                <div id="selectedMembers" class="flex flex-wrap gap-2"></div>
                <div class="text-gray-400 text-sm italic">No members selected</div>
              </div>
            </div>
            
            <!-- Quick filters -->
            <div class="mt-4">
              <div class="text-sm text-gray-700 font-medium mb-2">Quick filters</div>
              <div class="flex flex-wrap gap-2">
                <div class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs cursor-pointer hover:bg-gray-200">Marketing team</div>
                <div class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs cursor-pointer hover:bg-gray-200">Development</div>
                <div class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs cursor-pointer hover:bg-gray-200">Design</div>
                <div class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs cursor-pointer hover:bg-gray-200">+ Add filter</div>
              </div>
            </div>
          </div>
        </form>
      </div>
      
      <!-- Footer -->
      <div class="modal-footer border-top-0 px-6 py-4 flex justify-between items-center">
        <button type="button" class="btn btn-light border border-gray-300 px-4 py-2 rounded-md text-sm font-medium" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" form="channelForm" class="btn btn-primary bg-purple-600 hover:bg-purple-700 text-white px-5 py-2 rounded-md text-sm font-medium flex items-center">
          <!-- Plus icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Create Channel
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Channels -->
<!-- ClickUp-style Modal with Enhanced SaaS Features -->
<div class="modal fade" id="deleteChannelsModal" tabindex="-1">
  <div class="modal-dialog modal-xl max-w-6xl my-10">
    <div class="modal-content border-0 shadow-lg rounded-lg overflow-hidden">
      <!-- Header with Tabs -->
      <div class="modal-header bg-white border-0 shadow-sm py-3 px-4">
        <div class="flex items-center space-x-4">
          <div class="flex items-center gap-2">
            <i class="fas fa-layer-group text-indigo-600"></i>
            <h5 class="modal-title font-semibold text-gray-800 m-0">Workspace Management</h5>
          </div>
          <div class="hidden md:flex space-x-1 text-sm">
            <span class="px-3 py-1 rounded-md bg-indigo-600 text-white font-medium">Channels</span>
            <span class="px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 cursor-pointer">Users</span>
            <span class="px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 cursor-pointer">Integrations</span>
            <span class="px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 cursor-pointer">Settings</span>
          </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body p-0 flex flex-row">
        <!-- Sidebar -->
        <div class="hidden md:block w-56 bg-gray-50 border-r border-gray-200">
          <div class="py-3">
            <div class="px-4 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider">WORKSPACE</div>
            
            <ul class="space-y-1 mt-2">
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-tachometer-alt w-5 text-gray-500"></i>
                <span class="ml-2">Dashboard</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-indigo-600 bg-indigo-50 cursor-pointer border-l-3 border-indigo-600">
                <i class="fas fa-hashtag w-5"></i>
                <span class="ml-2">Channels</span>
                <span class="ml-auto bg-indigo-100 text-indigo-600 text-xs font-medium px-2 py-0.5 rounded-full">12</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-users w-5 text-gray-500"></i>
                <span class="ml-2">Members</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-puzzle-piece w-5 text-gray-500"></i>
                <span class="ml-2">Integrations</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-chart-line w-5 text-gray-500"></i>
                <span class="ml-2">Analytics</span>
              </li>
            </ul>
            
            <div class="px-4 py-2 mt-4 text-xs font-medium text-gray-500 uppercase tracking-wider">CONFIGURATION</div>
            <ul class="space-y-1 mt-2">
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-cog w-5 text-gray-500"></i>
                <span class="ml-2">Settings</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-shield-alt w-5 text-gray-500"></i>
                <span class="ml-2">Security</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-bell w-5 text-gray-500"></i>
                <span class="ml-2">Notifications</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-exchange-alt w-5 text-gray-500"></i>
                <span class="ml-2">Automations</span>
              </li>
              <li class="sidebar-item px-4 py-2.5 flex items-center text-sm font-medium text-gray-700 cursor-pointer">
                <i class="fas fa-archive w-5 text-gray-500"></i>
                <span class="ml-2">Archived</span>
              </li>
            </ul>
          </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col">
          <!-- Action Bar -->
          <div class="bg-white border-b border-gray-200 p-4 flex justify-between items-center">
            <div class="flex items-center">
              <h6 class="text-gray-800 font-semibold m-0">Select Channels to Delete</h6>
              <span class="ml-2 text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full font-medium">Batch Action</span>
            </div>
            
            <div class="flex items-center space-x-2">
              <div class="relative">
                <input type="text" placeholder="Search channels..." class="form-control pl-8 py-1.5 text-sm bg-gray-50 border-gray-200 rounded-md focus:ring-indigo-500 focus:border-indigo-500">
                <i class="fas fa-search absolute left-3 top-2.5 text-gray-400 text-sm"></i>
              </div>
              <button class="btn btn-sm btn-outline-secondary d-flex align-items-center">
                <i class="fas fa-filter me-1"></i> Filter
              </button>
            </div>
          </div>
          
          <!-- Channels List -->
          <div id="channelsContainer" class="flex-1 p-4 overflow-y-auto invisible-scrollbar" style="max-height: 60vh;">
            <div class="space-y-2">
              <!-- Channels will be populated here by JS -->
              <!-- Sample Channels for Demo -->
              <div class="channel-item flex items-center p-3 bg-white rounded-md border border-gray-200 hover:shadow-sm transition-all duration-200">
                <div class="flex-shrink-0">
                  <input type="checkbox" class="form-check-input channel-checkbox border-gray-300 rounded text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <span class="font-medium text-gray-800"># general</span>
                    <span class="text-xs text-gray-500">Created 3 months ago</span>
                  </div>
                  <p class="text-sm text-gray-500 mt-0.5">Company-wide announcements and work-based matters</p>
                </div>
                <div class="flex items-center space-x-2 ml-4">
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full">24 members</span>
                  <div class="flex -space-x-2">
                    <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs">JD</div>
                    <div class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-xs">KL</div>
                    <div class="w-6 h-6 rounded-full bg-orange-500 flex items-center justify-center text-white text-xs">+4</div>
                  </div>
                </div>
              </div>
              
              <div class="channel-item flex items-center p-3 bg-white rounded-md border border-gray-200 hover:shadow-sm transition-all duration-200">
                <div class="flex-shrink-0">
                  <input type="checkbox" class="form-check-input channel-checkbox border-gray-300 rounded text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <span class="font-medium text-gray-800"># random</span>
                    <span class="text-xs text-gray-500">Created 3 months ago</span>
                  </div>
                  <p class="text-sm text-gray-500 mt-0.5">Non-work banter and water cooler conversation</p>
                </div>
                <div class="flex items-center space-x-2 ml-4">
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full">18 members</span>
                  <div class="flex -space-x-2">
                    <div class="w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs">TG</div>
                    <div class="w-6 h-6 rounded-full bg-pink-500 flex items-center justify-center text-white text-xs">BN</div>
                    <div class="w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center text-white text-xs">+2</div>
                  </div>
                </div>
              </div>
              
              <div class="channel-item flex items-center p-3 bg-white rounded-md border border-gray-200 hover:shadow-sm transition-all duration-200">
                <div class="flex-shrink-0">
                  <input type="checkbox" class="form-check-input channel-checkbox border-gray-300 rounded text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <span class="font-medium text-gray-800"># marketing</span>
                    <span class="text-xs text-gray-500">Created 2 months ago</span>
                  </div>
                  <p class="text-sm text-gray-500 mt-0.5">Marketing team discussions and campaigns</p>
                </div>
                <div class="flex items-center space-x-2 ml-4">
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full">9 members</span>
                  <div class="flex -space-x-2">
                    <div class="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white text-xs">MK</div>
                    <div class="w-6 h-6 rounded-full bg-indigo-500 flex items-center justify-center text-white text-xs">+3</div>
                  </div>
                </div>
              </div>
              
              <!-- Add more sample channels as needed -->
              <div class="channel-item flex items-center p-3 bg-white rounded-md border border-gray-200 hover:shadow-sm transition-all duration-200">
                <div class="flex-shrink-0">
                  <input type="checkbox" class="form-check-input channel-checkbox border-gray-300 rounded text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <span class="font-medium text-gray-800"># engineering</span>
                    <span class="text-xs text-gray-500">Created 1 month ago</span>
                  </div>
                  <p class="text-sm text-gray-500 mt-0.5">Technical discussions and development updates</p>
                </div>
                <div class="flex items-center space-x-2 ml-4">
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full">15 members</span>
                </div>
              </div>
              
              <div class="channel-item flex items-center p-3 bg-white rounded-md border border-gray-200 hover:shadow-sm transition-all duration-200">
                <div class="flex-shrink-0">
                  <input type="checkbox" class="form-check-input channel-checkbox border-gray-300 rounded text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="ml-3 flex-1">
                  <div class="flex items-center justify-between">
                    <span class="font-medium text-gray-800"># product</span>
                    <span class="text-xs text-gray-500">Created 3 weeks ago</span>
                  </div>
                  <p class="text-sm text-gray-500 mt-0.5">Product development and feature discussions</p>
                </div>
                <div class="flex items-center space-x-2 ml-4">
                  <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full">12 members</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Summary Bar -->
          <div class="bg-gray-50 border-t border-gray-200 p-3">
            <div class="flex items-center text-sm">
              <span class="selected-count">0</span>
              <span class="ml-1 text-gray-600">channels selected</span>
              <button class="ml-3 text-indigo-600 hover:text-indigo-800 text-sm font-medium">Select All</button>
              <button class="ml-3 text-indigo-600 hover:text-indigo-800 text-sm font-medium">Clear Selection</button>
            </div>
          </div>
          
          <!-- Footer -->
          <div class="modal-footer bg-white border-t border-gray-200 py-3 px-4 flex justify-between">
            <div class="flex items-center">
              <i class="fas fa-info-circle text-gray-500 mr-2"></i>
              <span class="text-sm text-gray-600">Deleting channels cannot be undone</span>
            </div>
            <div>
              <button type="button" class="btn btn-outline-secondary me-2" data-bs-dismiss="modal">Cancel</button>
              <button id="nextStep" class="btn btn-danger px-4" disabled>
                <i class="fas fa-trash-alt me-1"></i> Delete Selected
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enter password confirmation -->
<!-- Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content border-0 shadow-lg rounded-lg overflow-hidden">
      <!-- Header -->
      <div class="modal-header bg-white border-0 shadow-sm py-3 px-4">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 rounded-md bg-red-100 flex items-center justify-center">
            <i class="fas fa-exclamation-triangle text-red-600"></i>
          </div>
          <h5 class="modal-title font-semibold text-gray-800 m-0">Confirm Deletion</h5>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      
      <!-- Body -->
      <div class="modal-body p-4">
        <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded-md">
          <div class="flex">
            <div class="flex-shrink-0">
              <i class="fas fa-exclamation-circle text-red-600"></i>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-600">
                This action cannot be undone. All data associated with these channels will be permanently deleted.
              </p>
            </div>
          </div>
        </div>
      
        <div class="mb-5">
          <p class="text-sm text-gray-700 font-medium mb-2">You are about to delete the following channels:</p>
          <div class="bg-gray-50 rounded-md p-3 max-h-48 overflow-y-auto">
            <ul id="selectedChannelsList" class="list-none p-0 m-0">
              <!-- Your existing JavaScript will populate this list -->
            </ul>
          </div>
        </div>
        
        <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
          <div class="mb-3">
            <label for="deletePasswordd" class="block text-sm font-medium text-gray-700 mb-1">
              Enter your password:
            </label>
            
            <div class="relative rounded-md">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fas fa-lock text-gray-400"></i>
              </div>
              <input 
                type="password" 
                id="deletePasswordd" 
                name="password" 
                class="focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 py-2 sm:text-sm border-gray-300 rounded-md" 
                placeholder="Your password"
              >
            </div>
            
            <p class="text-xs text-gray-500 mt-2">
              For security reasons, we require your password to confirm this action.
            </p>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="modal-footer py-3 px-4 border-t border-gray-200">
        <div class="flex w-full items-center justify-between">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            Cancel
          </button>
          <button id="confirmDeleteBtn" class="btn px-4 text-white bg-[#FF0000] hover:bg-[#CC0000]">
            <i class="fas fa-trash-alt me-1"></i>
            Delete Channels
        </button>
        
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Raise Help request modal -->
<!-- ClickUp-Inspired Help Request Modal -->
<div class="modal fade" id="raiseHelpModal" tabindex="-1" aria-labelledby="raiseHelpModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content rounded-lg shadow-lg border-0 overflow-hidden">
      <div class="d-flex h-full">
        <!-- Sidebar -->
        <div class="bg-indigo-900 text-white p-4 w-64 d-none d-md-block">
          <div class="mb-6">
            <h4 class="font-bold text-xl flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Support Center
            </h4>
          </div>
          
          <div class="space-y-2">
            <a href="#" class="flex items-center py-2 px-3 rounded-md bg-indigo-800 text-white hover:bg-indigo-700 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
              </svg>
              New Request
            </a>
            
            <a href="#" class="flex items-center py-2 px-3 rounded-md text-gray-300 hover:bg-indigo-800 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              My Requests
            </a>
            
            <a href="#" class="flex items-center py-2 px-3 rounded-md text-gray-300 hover:bg-indigo-800 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              Activity
            </a>
            
            <a href="#" class="flex items-center py-2 px-3 rounded-md text-gray-300 hover:bg-indigo-800 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              History
            </a>
            
            <a href="#" class="flex items-center py-2 px-3 rounded-md text-gray-300 hover:bg-indigo-800 transition">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
              Knowledge Base
            </a>
          </div>
          
          <div class="mt-8 pt-6 border-t border-indigo-800">
            <h5 class="text-sm font-semibold text-indigo-300 mb-3">PRIORITY LEVELS</h5>
            <div class="space-y-2">
              <div class="flex items-center text-gray-300">
                <span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span>
                <span>Critical</span>
              </div>
              <div class="flex items-center text-gray-300">
                <span class="w-3 h-3 rounded-full bg-orange-500 mr-2"></span>
                <span>High</span>
              </div>
              <div class="flex items-center text-gray-300">
                <span class="w-3 h-3 rounded-full bg-yellow-500 mr-2"></span>
                <span>Medium</span>
              </div>
              <div class="flex items-center text-gray-300">
                <span class="w-3 h-3 rounded-full bg-blue-500 mr-2"></span>
                <span>Low</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-grow">
          <form id="helpRequestForm" enctype="multipart/form-data" class="h-full flex flex-col">
            <!-- Header -->
            <div class="modal-header bg-white border-bottom border-gray-200 py-4 px-6 d-flex align-items-center justify-content-between">
              <div class="d-flex align-items-center">
                <h5 class="modal-title text-xl font-bold text-gray-800" id="raiseHelpModalLabel">
                  Raise a Help Request
                </h5>
                <span class="badge bg-indigo-100 text-indigo-800 font-medium text-xs py-1 px-2 ml-3 rounded">NEW</span>
              </div>
              <div class="d-flex align-items-center">
                <button 
  type="button" 
  class="flex items-center gap-2 px-3 py-1.5 text-sm font-semibold rounded-lg border border-gray-300 bg-white text-gray-700 hover:bg-indigo-50 hover:border-indigo-400 transition-all duration-200 shadow-sm"
  data-bs-toggle="modal" 
  data-bs-target="#MyHelpRequestsModal"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
  </svg>
  My Requests
</button>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
            </div>
            
            <!-- Body -->
            <div class="modal-body bg-gray-50 p-6 flex-grow overflow-auto">
              <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5 mb-5">
                <div class="text-gray-800 text-sm leading-relaxed space-y-2">
                  <div class="flex items-start">
                    <div class="flex-shrink-0 mt-1">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                    </div>
                    <div class="ml-3">
                      <h2 class="text-base font-semibold text-gray-800">
                        After raising a request, your workspace admin will impersonate you to help resolve your issue.
                      </h2>
                    </div>
                  </div>
                
                  <div class="bg-indigo-50 border border-indigo-200 rounded-md p-4 mt-3">
                    <div class="flex">
                      <div class="flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                      </div>
                      <div class="ml-3">
                        <p class="text-indigo-700 font-medium"> <strong>What is impersonation?</strong></p>
                        <p class="text-gray-700 mt-1">
                          Impersonation allows your workspace admin to temporarily access your account as if they were you. They can view and interact with your workspace exactly how you see it  helping them investigate and solve problems faster. Don't worry, all actions are securely logged and reviewed.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                  <div>
                    <label for="helpRequestType" class="block text-sm font-medium text-gray-700 mb-1">Request Type</label>
                    <select class="form-select w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" id="helpRequestType">
                      <option value="bug">Bug Report</option>
                      <option value="feature">Feature Request</option>
                      <option value="access">Access Issue</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  
                  <div>
                    <label for="helpTitle" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" class="form-control w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" id="helpTitle" name="title" placeholder="Summarize your issue" required>
                  </div>
                  
                  <div>
                    <label for="helpPriority" class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
                    <div class="flex space-x-3">
                      <div class="flex items-center">
                        <input type="radio" name="priority" id="priorityLow" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300">
                        <label for="priorityLow" class="ml-2 block text-sm text-gray-700">Low</label>
                      </div>
                      <div class="flex items-center">
                        <input type="radio" name="priority" id="priorityMedium" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300" checked>
                        <label for="priorityMedium" class="ml-2 block text-sm text-gray-700">Medium</label>
                      </div>
                      <div class="flex items-center">
                        <input type="radio" name="priority" id="priorityHigh" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300">
                        <label for="priorityHigh" class="ml-2 block text-sm text-gray-700">High</label>
                      </div>
                      <div class="flex items-center">
                        <input type="radio" name="priority" id="priorityCritical" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300">
                        <label for="priorityCritical" class="ml-2 block text-sm text-gray-700">Critical</label>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div>
                  <div>
                    <label for="helpCategory" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select class="form-select w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" id="helpCategory">
                      <option value="technical">Technical Issue</option>
                      <option value="billing">Billing Question</option>
                      <option value="account">Account Management</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  
                  <div class="mt-4">
                    <label for="helpAssignTo" class="block text-sm font-medium text-gray-700 mb-1">Assign To</label>
                    <select class="form-select w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" id="helpAssignTo">
                      <option value="auto">Auto-assign (Recommended)</option>
                      <option value="technical">Technical Support Team</option>
                      <option value="account">Account Management</option>
                      <option value="security">Security Team</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="mt-6">
                <label for="helpDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                <div class="border border-gray-300 rounded-md shadow-sm overflow-hidden focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500">
                  <div class="border-b border-gray-200 bg-gray-50 px-3 py-2 flex">
                    <button type="button" class="p-1 text-gray-500 hover:text-gray-900">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                      </svg>
                    </button>
                    <button type="button" class="p-1 ml-2 text-gray-500 hover:text-gray-900">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                      </svg>
                    </button>
                    <button type="button" class="p-1 ml-2 text-gray-500 hover:text-gray-900">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                      </svg>
                    </button>
                    <button type="button" class="p-1 ml-2 text-gray-500 hover:text-gray-900">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                      </svg>
                    </button>
                  </div>
                  <textarea class="form-control w-full border-0 focus:ring-0" id="helpDescription" name="description" rows="5" placeholder="Describe your issue in detail..." required></textarea>
                </div>
              </div>
              
              <div class="mt-6">
                <label class="block text-sm font-medium text-gray-700 mb-1">Attachments</label>
                <div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md">
                  <div class="space-y-1 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    <div class="flex text-sm text-gray-600">
                      <label for="helpAttachment" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500">
                        <span>Upload a file</span>
                        <input id="helpAttachment" name="attachment" type="file" class="sr-only">
                      </label>
                      <p class="pl-1">or drag and drop</p>
                    </div>
                    <p class="text-xs text-gray-500">PNG, JPG, GIF, PDF up to 10MB</p>
                  </div>
                </div>
              </div>
              
              <div class="mt-6">
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
                  <div class="flex">
                    <div class="flex-shrink-0">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-blue-700">
                        We typically respond to help requests within 24 hours during business days. For urgent issues, please mark as Critical priority.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              
              <div id="helpResponseMsg" class="text-center mt-4 font-semibold text-sm"></div>
            </div>
            
            <!-- Footer -->
            <div class="modal-footer bg-gray-50 border-top border-gray-200 p-4 d-flex justify-content-between align-items-center">
              <div>
                <button type="button" class="btn btn-link text-gray-600" data-bs-dismiss="modal">Cancel</button>
              </div>
              <div class="d-flex align-items-center">
                <button type="button" class="btn btn-outline-secondary d-flex align-items-center mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                  </svg>
                  Save Draft
                </button>
                <button type="submit" class="btn btn-primary d-flex align-items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                  </svg>
                  Submit Request
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- My Help Requests -->
<div class="modal fade" id="MyHelpRequestsModal" tabindex="-1" aria-labelledby="MyHelpRequestsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content border-0 shadow-xl font-inter">
      <div class="modal-header bg-[#f9fafb] border-b border-[#eaecf0] px-6 py-4">
        <div class="flex-1">
          <h3 class="text-[17px] font-semibold text-[#2d3436]">My Help Requests</h3>
          <p class="mt-1 text-[13px] text-[#636d75]">Recent support requests and their status</p>
        </div>
        <button type="button" class="btn-close text-[#636d75] hover:text-[#2d3436]" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body p-0 overflow-hidden">
        <div class="h-[500px] overflow-y-auto scrollbar-hidden">
          <div id="helpRequestsContainer" class="space-y-2 p-4">
            <!-- Help requests will be inserted here -->
            <!-- Sample Item -->
            <div class="group relative p-4 bg-white border border-[#eaecf0] rounded-lg hover:border-purple-200 hover:shadow-xs transition-all duration-200">
              <div class="flex items-start justify-between">
                <div class="flex-1 min-w-0">
                  <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center">
                      <svg class="w-4 h-4 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                      </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                      <h4 class="text-[14px] font-semibold text-[#2d3436] truncate">Login Issues</h4>
                      <div class="flex items-center gap-2 mt-1">
                        <span class="text-[12px] text-[#636d75]">Created 2h ago</span>
                        <span class="w-1 h-1 bg-[#d8dcdf] rounded-full"></span>
                        <span class="text-[12px] font-medium text-green-600">In Progress</span>
                      </div>
                    </div>
                  </div>
                  <p class="mt-2 text-[13px] text-[#636d75] line-clamp-2">Unable to login to my account despite using correct credentials...</p>
                </div>
                <button class="p-1.5 -m-1.5 text-[#94a0ab] hover:text-[#636d75] rounded-lg">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer bg-[#f9fafb] border-t border-[#eaecf0] px-6 py-4">
        <button type="button" class="text-[13px] font-medium text-[#636d75] hover:text-[#2d3436] px-4 py-2 rounded-lg transition-colors" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Fetch all help requests for the organization (Admin Only) -->
<div class="modal fade" id="OrgHelpRequestReviewModal" tabindex="-1" aria-labelledby="OrgHelpRequestReviewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xxl">
    <div class="modal-content border-0 shadow-xl">
      <!-- Modal Header with ClickUp-style Gradient -->
      <div class="modal-header bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 border-b border-white/10">
        <div class="flex items-center justify-between w-full">
          <div class="flex items-center space-x-3">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636L16.95 7.05A7 7 0 0019 12a7 7 0 11-14 0 7 7 0 004.95 6.736l1.414 1.414A9 9 0 1112 3a9 9 0 016.364 2.636z"/>
            </svg>
            <div>
              <h5 class="modal-title text-white font-semibold text-lg">Workspace Support Center</h5>
              <p class="text-indigo-200 text-sm mt-0.5">Manage member requests and support operations</p>
            </div>
          </div>
          <button type="button" class="btn-close btn-close-white p-2 rounded-full hover:bg-white/10 transition-colors" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
      </div>

      <!-- Modal Body with Advanced Layout -->
      <div class="modal-body flex p-0 h-[65vh]">
        <!-- Left Navigation Panel -->
        <div class="w-64 bg-gray-50 border-r border-gray-200 p-4 flex flex-col space-y-6">
          <!-- Quick Access Menu -->
          <div class="space-y-1">
            <div class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2">Quick Access</div>
            <a href="#" class="flex items-center space-x-2 p-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-all">
              <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              <span>New Response Template</span>
            </a>
            <a href="#" class="flex items-center space-x-2 p-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-all">
              <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
              <span>Analytics Dashboard</span>
            </a>
          </div>

          <!-- Smart Filters -->
          <div class="space-y-2">
            <div class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2">Smart Filters</div>
            <div class="space-y-1">
              <button class="w-full flex justify-between items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg group">
                <span>Pending Response</span>
                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full">5</span>
              </button>
              <button class="w-full flex justify-between items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                <span>High Priority</span>
                <span class="bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full">2</span>
              </button>
              <button class="w-full flex justify-between items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg">
                <span>Awaiting Feedback</span>
                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded-full">3</span>
              </button>
            </div>
          </div>

          <!-- Team Health Stats -->
          <div class="pt-4 border-t border-gray-200">
            <div class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-2">Team Health</div>
            <div class="space-y-2">
              <div class="flex items-center justify-between text-sm">
                <span>Response SLA</span>
                <span class="font-medium text-green-600">94%</span>
              </div>
              <div class="flex items-center justify-between text-sm">
                <span>Avg. Resolution</span>
                <span class="font-medium text-gray-700">6.2h</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 bg-white p-6 overflow-auto">
          <!-- Contextual Action Bar -->
          <div class="flex items-center justify-between mb-6">
            <div>
              <h2 class="text-lg font-semibold text-gray-900">Active Support Requests</h2>
              <p class="text-sm text-gray-500 mt-1">24 pending requests  Last refreshed 5m ago</p>
            </div>
            <div class="flex items-center space-x-3">
              <button class="btn bg-white border border-gray-300 hover:border-gray-400 text-gray-700 px-4 py-2 text-sm rounded-lg flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                <span>Export Report</span>
              </button>
              <button class="btn bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 text-sm rounded-lg flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                <span>Refresh</span>
              </button>
            </div>
          </div>

          <!-- Security Compliance Banner -->
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-lg flex items-start space-x-3">
            <svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <div class="text-sm text-blue-700">
              <strong>Security Notice:</strong> All admin activities are recorded in audit logs. Impersonation sessions will be watermarked and monitored.
            </div>
          </div>

          <!-- Requests Table -->
          <div id="orgHelpRequestsListContainer" class="border border-gray-200 rounded-lg overflow-hidden">
            <!-- Table Header -->
            <div class="bg-gray-50 px-4 py-2.5 border-b border-gray-200 grid grid-cols-12 gap-4">
              <div class="col-span-4 text-xs font-medium text-gray-500 uppercase">Request Details</div>
              <div class="col-span-2 text-xs font-medium text-gray-500 uppercase">Priority</div>
              <div class="col-span-3 text-xs font-medium text-gray-500 uppercase">Status</div>
              <div class="col-span-3 text-xs font-medium text-gray-500 uppercase">Actions</div>
            </div>

            <!-- Skeleton Loader -->
            <div class="animate-pulse space-y-4 p-4">
              <div class="h-12 bg-gray-100 rounded-lg"></div>
              <div class="h-12 bg-gray-100 rounded-lg"></div>
              <div class="h-12 bg-gray-100 rounded-lg"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Footer with Status -->
      <div class="modal-footer bg-gray-50 px-6 py-3 border-t border-gray-200">
        <div class="flex items-center justify-between w-full text-sm">
          <div class="text-gray-500 flex items-center space-x-2">
            <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <span>All systems operational</span>
          </div>
          <div class="flex items-center space-x-3">
            <button class="text-gray-600 hover:text-gray-900 text-sm">View Audit Log</button>
            <button class="text-gray-600 hover:text-gray-900 text-sm">Support Docs</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- full help request details -->
<div class="modal fade" id="HelpRequestFullDetailModal" tabindex="-1" aria-labelledby="HelpRequestFullDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xl">
    <div class="modal-content rounded-xl shadow-2xl border-0 overflow-hidden">
      <!-- Header -->
      <div class="modal-header border-b border-slate-200 bg-slate-50 px-6 py-4">
        <div class="flex items-center justify-between w-full">
          <h3 class="modal-title text-lg font-semibold text-slate-800" id="HelpRequestFullDetailModalLabel">
            <svg class="w-5 h-5 text-indigo-600 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            Support Request Details
          </h3>
          <button type="button" class="p-2 hover:bg-slate-100 rounded-lg" data-bs-dismiss="modal">
            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Status Banner -->
      <div class="bg-indigo-50 border-b border-indigo-200 px-6 py-4">
        <div class="flex items-center space-x-3">
          <svg class="w-5 h-5 text-indigo-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <div>
            <p class="text-sm font-medium text-indigo-800">Live monitoring session available</p>
            <p class="text-xs text-indigo-600 mt-1">You can now start the live support session</p>
          </div>
        </div>
      </div>

      <!-- Body -->
      <div class="modal-body px-6 py-4" id="helpRequestDetailBody">
        <!-- Sample Content Structure -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Left Column -->
          <div class="space-y-4">
            <div class="border-b border-slate-200 pb-4">
              <h4 class="text-sm font-semibold text-slate-700 mb-2">Request Details</h4>
              <dl class="space-y-3">
                <div class="flex items-start space-x-3">
                  <dt class="text-sm text-slate-500 w-24">Priority:</dt>
                  <dd class="text-sm text-slate-800">
                    <span class="px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs">Urgent</span>
                  </dd>
                </div>
                <div class="flex items-start space-x-3">
                  <dt class="text-sm text-slate-500 w-24">Category:</dt>
                  <dd class="text-sm text-slate-800">Technical Support</dd>
                </div>
                <div class="flex items-start space-x-3">
                  <dt class="text-sm text-slate-500 w-24">Submitted:</dt>
                  <dd class="text-sm text-slate-800">2 hours ago</dd>
                </div>
              </dl>
            </div>

            <div class="border-b border-slate-200 pb-4">
              <h4 class="text-sm font-semibold text-slate-700 mb-3">Description</h4>
              <p class="text-sm text-slate-600 leading-relaxed">
                <!-- Dynamic content would go here -->
                Unable to access critical system components. Getting error 503 when trying to...
              </p>
            </div>
          </div>

          <!-- Right Column -->
          <div class="space-y-4">
            <div class="border-b border-slate-200 pb-4">
              <h4 class="text-sm font-semibold text-slate-700 mb-3">Requester Information</h4>
              <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center">
                  <span class="text-sm font-medium text-indigo-600">JD</span>
                </div>
                <div>
                  <p class="text-sm font-medium text-slate-800">John Doe</p>
                  <p class="text-xs text-slate-500">johndoe@company.com</p>
                </div>
              </div>
            </div>

            <div class="border-b border-slate-200 pb-4">
              <h4 class="text-sm font-semibold text-slate-700 mb-3">Attachments</h4>
              <div class="flex items-center space-x-2 text-sm text-indigo-600">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                <span>error_logs.txt</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-t border-slate-200 bg-slate-50 px-6 py-4">
        <div class="flex items-center justify-end gap-3 w-full">
          <button type="button" 
                  class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg" 
                  data-bs-dismiss="modal">
            Close
          </button>
          <button type="button" 
                  class="px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm transition-colors">
            Start Live Session
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Fetch help request logs -->
<!-- Admin Activity Logs Modal -->
<div class="modal fade" id="ImpersonationActivitiesModal" tabindex="-1" aria-labelledby="ImpersonationActivitiesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content rounded-xl shadow-2xl border-0 overflow-hidden">
      <!-- Header -->
      <div class="modal-header border-b border-slate-200 bg-slate-50 px-6 py-4">
        <div class="flex items-center justify-between w-full">
          <h3 class="modal-title text-lg font-semibold text-slate-800" id="ImpersonationActivitiesModalLabel">
            <svg class="w-5 h-5 text-indigo-600 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
            Audit Trail & Activity Logs
          </h3>
          <button type="button" class="p-2 hover:bg-slate-100 rounded-lg" data-bs-dismiss="modal">
            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Info Banner -->
      <div class="bg-blue-50 border-b border-blue-200 px-6 py-4">
        <div class="flex items-center space-x-3">
          <svg class="w-5 h-5 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <p class="text-sm text-blue-800">
            Complete audit trail of all administrative actions. 
            <span class="font-medium">Last 90 days of activity shown</span>
          </p>
        </div>
      </div>

      <!-- Body -->
      <div class="modal-body px-6 py-4" id="impersonationLogContainer">
        <!-- Filter Bar -->
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center space-x-3">
            <div class="relative">
              <select class="block w-40 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500">
                <option>All Actions</option>
                <option>Impersonations</option>
                <option>User Modifications</option>
                <option>Access Changes</option>
              </select>
            </div>
            <input type="text" placeholder="Search logs..." class="px-3 py-2 border border-slate-300 rounded-lg text-sm w-64">
          </div>
          <div class="text-xs text-slate-500">
            Showing 127 activities
          </div>
        </div>

        <!-- Log Entries -->
        <div class="space-y-3">
          <!-- Sample Log Entry -->
          <div class="flex items-start p-4 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
            <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3 mt-1">
              <svg class="w-4 h-4 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/>
              </svg>
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between">
                <div class="text-sm font-medium text-slate-800">User Impersonation</div>
                <span class="text-xs text-slate-500">2 hours ago</span>
              </div>
              <div class="text-sm text-slate-600 mt-1">
                Admin <span class="font-medium">Sarah Wilson</span> impersonated user 
                <span class="font-medium">john.doe@company.com</span>
              </div>
              <div class="text-xs text-slate-500 mt-2">
                IP: 192.168.1.45  Duration: 15m 32s  Location: New York, US
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="modal-footer border-t border-slate-200 bg-slate-50 px-6 py-4">
        <div class="flex items-center justify-end gap-3 w-full">
          <button type="button" 
                  class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg" 
                  data-bs-dismiss="modal">
            Close
          </button>
          <button type="button" 
                  class="px-4 py-2 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
            </svg>
            Export Logs
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- User widgets add widgets -->
 <!-- Widget Select Modal -->
 <div class="modal fade" id="widgetSelectModal" tabindex="-1" aria-labelledby="widgetSelectModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-lg shadow-lg border-0">
      <!-- Modal Header with Title -->
      <div class="modal-header px-4 pt-4 pb-0">
        <h5 class="modal-title text-lg font-semibold" id="widgetSelectModalLabel">Add Card</h5>
        <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body p-0 d-flex" style="height: calc(100% - 60px);">
        <!-- ClickUp Sidebar -->
        <div class="clickup-sidebar h-100">
          <div class="p-3">
            <!-- Sidebar Items -->
            <a href="#" class="sidebar-item active">
              <i class="fas fa-star"></i>
              <span>Featured</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-table-columns"></i>
              <span>Overview</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-pen-to-square"></i>
              <span>Custom</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-bolt"></i>
              <span>Sprints</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-chart-line"></i>
              <span>Statuses</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-tag"></i>
              <span>Tags</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-user"></i>
              <span>Assignees</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-arrow-up-short-wide"></i>
              <span>Priorities</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-clock"></i>
              <span>Time Tracking</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-table-cells"></i>
              <span>Tables</span>
            </a>
            <a href="#" class="sidebar-item">
              <i class="fas fa-code"></i>
              <span>Embeds and Apps</span>
            </a>
            
            <!-- Help Section -->
            <div class="mt-6 pt-3 border-t border-gray-200">
              <a href="#" class="sidebar-item">
                <i class="fas fa-circle-question"></i>
                <span>Help Docs</span>
              </a>
              <a href="#" class="sidebar-item">
                <i class="fas fa-video"></i>
                <span>Dashboard Webinar</span>
              </a>
              <a href="#" class="sidebar-item">
                <i class="fas fa-book"></i>
                <span>Dashboard Guide</span>
              </a>
            </div>
          </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="flex-grow-1 d-flex flex-column h-100">
          <!-- Tab Navigation -->
          
          
          <!-- Scrollable Content -->
          <div class="scrollable-content">
            <!-- Search Container -->
            <div class="mb-5 position-relative">
              <i class="fas fa-search search-icon"></i>
              <input type="text" class="clickup-search" placeholder="Search...">
            </div>
            
            <!-- Featured Section Title -->
            <h3 class="text-xl font-semibold mb-5">Featured</h3>
            
            <!-- Widget Grid -->
            <div class="widget-grid">
              <!-- Todays Tasks Widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/add-tasks-concept-illustration_114360-4765.jpg?t=st=1744216688~exp=1744220288~hmac=a3446630ac36a8f5ecd7170d7265f2232e910599d62d5a203a0fc075d66980e1&w=740" class="w-100 h-100 object-cover" alt="Task List Widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Task List</h4>
                  <p class="widget-description">Instantly Access all the tasks from accross the groups</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="tasks">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>

              <!-- 2) Calendar widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/appointment-booking-with-calendar_23-2148545993.jpg?t=st=1744216949~exp=1744220549~hmac=9e85ac7b313d9f98774d2973c14e4b91489f237c53df984b708dbb36caa0da3c&w=996" class="w-100 h-100 object-cover" alt="Calendar widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Calendar</h4>
                  <p class="widget-description">Categorize and manage all your events, meetings all in one calendar</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="calendar">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- calculation widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/woman-choosing-dates-calendar-appointment-booking_23-2148552956.jpg?t=st=1744218470~exp=1744222070~hmac=226df1bdd1ff059bcc4ecaee8744f54efe630c114552abc5d781cace76bcd89a&w=740" class="w-100 h-100 object-cover" alt="Calculation widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Calculation</h4>
                  <p class="widget-description">Calculate sum, avrages and so much more for your tasks, meetings and events.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="calculation">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- workload widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/premium-vector/circle-diagram-four-parts-pie-chart-business-financial-report-presentation-statistics-data-analytics-optimization-3d-vector-icon-cartoon-minimal-style_365941-748.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="Workload widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Workload by Status</h4>
                  <p class="widget-description">Display a pie chart of your statuses usage accross all locations.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="workload">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- progress widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/premium-vector/businessman-running-more-achievement-reward_7534-300.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="Progress widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Portfolio</h4>
                  <p class="widget-description">Categorize and track progress of tasks & lists accross all groups.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="progress">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- overdue tasks widget -->
              <div class="widget-card border-purple">
                  <div class="widget-header bg-purple">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRJkrerGTc6NxLb8mnIoLwiytS8gxcGSzzDMA&s" class="w-100 h-100 object-cover" alt="Overdue tasks widget">
                  </div>
                  <div class="widget-body">
                    <h4 class="widget-title">Overdue Tasks</h4>
                    <p class="widget-description">Shows only list of overdue tasks.</p>
                    <button class="add-widget-btn w-100 text-center" data-widget="overdue_tasks">
                      <i class="fas fa-plus"></i> Add widget
                    </button>
                  </div>
                </div>

              <!-- tasks due soon -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTig0UewWepzTBKvUpvLvaRIgjs_Em3Lxe-VZCQz9Igd27Y_TywXXEYciuPyNEdSFqtvJU&usqp=CAU" class="w-100 h-100 object-cover" alt="Tasks due soon widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Tasks Due Soon.</h4>
                  <p class="widget-description">List of tasks due in the next 14 days.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="due_soon">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>

              <!-- Bookmarks-->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/browsing-online-concept-illustration_114360-4684.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="bookmarks widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Bookmarks.</h4>
                  <p class="widget-description">Create bookmarks from CalendarPlus items or from any web URL.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="bookmarks">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>

              <!-- resources widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/site-stats-concept-illustration_114360-1509.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="resources widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Resources.</h4>
                  <p class="widget-description">View files uploaded to a space or folder.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="resources">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- recent activity widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/free-vector/businessman-sets-goals-runs-up-graph-columns-success-time-self-management-self-regulation-learning-self-organization-course-concept_335657-359.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="recent activity widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">New Content</h4>
                  <p class="widget-description">View a list of most recently created content by me in the workspace.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="recent-activity">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>
              <!-- channels widget -->
              <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/premium-vector/high-roi-content-abstract-concept-vector-illustration_107173-29898.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="Channels widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Channels</h4>
                  <p class="widget-description">Drop messages instantly from your dashboard to any channel in the workspace (privacy terms will apply).</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="channels">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>

            <!-- task time traced -->
            <div class="widget-card border-purple">
                <div class="widget-header bg-purple">
                  <img src="https://img.freepik.com/premium-vector/business-planning-concept-with-business-team-working-with-digital-online-calendar_675567-3252.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="time traced widget">
                </div>
                <div class="widget-body">
                  <h4 class="widget-title">Time Reporting</h4>
                  <p class="widget-description">See tasks that have time tracked.</p>
                  <button class="add-widget-btn w-100 text-center" data-widget="time_traced">
                    <i class="fas fa-plus"></i> Add widget
                  </button>
                </div>
              </div>

            <!-- high priority tasks -->
            <div class="widget-card border-purple">
              <div class="widget-header bg-purple">
                <img src="https://img.freepik.com/free-vector/tiny-people-examining-operating-system-error-warning-web-page-isolated-flat-illustration_74855-11104.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="high priority tasks">
              </div>
              <div class="widget-body">
                <h4 class="widget-title">Priority Tasks</h4>
                <p class="widget-description">List of urgent and high priority tasks.</p>
                <button class="add-widget-btn w-100 text-center" data-widget="high_priority_tasks">
                  <i class="fas fa-plus"></i> Add widget
                </button>
              </div>
            </div>
          <!-- Calpoints earned  -->
          <div class="widget-card border-purple">
            <div class="widget-header bg-purple">
              <img src="https://img.freepik.com/free-vector/happy-businessman-earning-money-illustration_74855-5522.jpg?ga=GA1.1.1701523175.1737611670&semt=ais_hybrid&w=740" class="w-100 h-100 object-cover" alt="total calpoints">
            </div>
            <div class="widget-body">
              <h4 class="widget-title">Live CalPoints</h4>
              <p class="widget-description">View History of total calpoints you earned.</p>
              <button class="add-widget-btn w-100 text-center" data-widget="calpoints">
                <i class="fas fa-plus"></i> Add widget
              </button>
            </div>
          </div>

          <!-- Google docs widget -->
          <div class="widget-card border-purple">
            <div class="widget-header bg-purple">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAq1BMVEX///9ilfKYuP43WMB4ovNhk/Fgke9djexaiehYhuZVguJTf+BRfN1Nd9lLdNdIcdRFbNA/ZMo7XcRXj/HL2fqwx/jQ3fqSs/Xo7v21yvhzn/WlwP6RtP7D1fqZuPZ2n/EvU77y9v5omfOowveOsfXg6fy5zvlymOvF0fJAb9e8x+sgS76vu+V1jdVNbcuCqvTk7P6Rreufs+gxYtAXSsDW3vOBlthqgtCPoNvNzJXkAAAEvklEQVR4nO3d2VrbMBAFYNtEpixpIcpGcBYcQpsamrY0Le//ZE263ZQEWZrxjMI5L+DvR7HG1kgmSRAEQRAEQRAEQWQyHE9WZZkSxLSy/3Ldl+b1RtbmhijPCLNiciPpG1hrKEZv9xhusxADzvOcjrdHWKxlfMPSkvp2C7OiKwHsU/4+XxBmxbh5YJceuEeYFXdNAxlGcK8wK+bNAoccwL3CrLhuVDjlAO4Xbop/g4VxTj2LOgmzbNgUcJizDOHLwuJzQ8IJzxC+LMyKZh5vbpiADsKGav+VoLCZ2j/iuQvdhFnRYwey/UjdhA3U/r6wkL/296SFm/DW/gHtS6GXkLf2r7gmmjpC1trf0iDMCsYVKh1CztqvRMhY+7UIs+Lq0IVstV+PcFP7WQqjImHGU/t1CTlqvzIhw0uxMiFD7dcmpK/96oTktV+fkLr2KxQSvxRrFNISGYVTb2GWETbDGYWjACHh4w2fMC2DhGQ/VEahCRKSPd1wCosgItXLFKfQfzLdhupnyihUciNyCsN+plEIg+pFDMKwQYxDWB66MGg6jUOYmtWhC9PU+1aMRWi8ibEI/X+o8Qh9p5uIhJui4TOMMQlT42OMSrg1pqNVvTknMuEvpCnLkXtW0Qn/KN2Pa0QprBEIIYRQPhBCCKF8IIQQQvlACCGE8oGQSWhy6596JzllhLacjLu+GU9qfdRARGh7Ydt4buqcOJYQ2vCdn2N3ooDQUhyGdD8q17zQlBSXuymdr9e4MKdZZb92PQ3YvJDgLtzG+U4UENJsonc+lSsgpNlgrngM8wnJ9SZ670NTUuza1TyXppZiEN0/wiHyTBNe8mucjZd5Lh0EPpcOlD+XbmYb25pf+WbesnXO/ku9AZuA98OaV8I7PoQQigdCCCGUD4QQQigfCCGEUD4QQugrDGhz1/xcsdxKVM83MaxE2dvA1cRb5auJB78ifPCr+kSdmVRvZ+bwu2uH3yF9BV1ump0KXcVCmi/iKN5tYkYk13P+yD12fTmn2Z17zndhrLsv63ziXm4Hbd83MeygfQW7oJsMhBBCKB8IIYRQPhBCCKF8IIQQQvlAyCU0JveNiaHLbWy5GvhmVdY6jyCzmjgN6870R8pXE+0g+Go1jgUJCHOKj1GunLdjCHRmDMV/DBs6/0EFuty3JNe71dtdQ5fbMehySwpputzOnzcRmEunJNebau5yU0w17p9vERAaG/4fmBbuPUSJpzYTPIrdGs/eQl3u1t1i6JvFXSuGLndAk7vmYW6849cQag2VcJpLS3Ykp6m/r0J47L20xJtjCCH8m/dvjnXmzXsInYVaQyY8kZbsyAmZ8PREZ04hdBaenerMGZnw/ExnzqmEX9rnOtP+QiT8sJSm7MjyA5FwsWzrzJLqP48n7bc606YCJl+X7zRm+ZVMOHy80JhHim7lnzxcSmueyeUDHTBZaBzER7J5ZpunzqW2dJ4ogUlyoY3YuaAFJutvHV35tiYWJh+rI02pPlIDk+ReE7G6pweqGkWOEdxmfTSTpv3KbEZ+D/7L95m8cVZ9Z/Ntsv5RyRpn1Q++AfydxVOnqkSGcjarqqMn0geZXVnfP3zqNA7sfHq45x4+BEEQBEEQBEGQXfkJssx/We6gDeoAAAAASUVORK5CYII=" class="w-100 h-100 object-cover" alt="Google doc">
            </div>
            <div class="widget-body">
              <h4 class="widget-title">Google Doc</h4>
              <p class="widget-description">Embed a google document.</p>
              <button class="add-widget-btn w-100 text-center" data-widget="google_docs">
                <i class="fas fa-plus"></i> Add widget
              </button>
            </div>
          </div>

          <!-- Google sheets embed -->
          <div class="widget-card border-purple">
            <div class="widget-header bg-purple">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGm7PtdR3csmRZ-fCvOF8XziOa68YGQYiBCQ&s" class="w-100 h-100 object-cover" alt="Google sheets">
            </div>
            <div class="widget-body">
              <h4 class="widget-title">Google Sheets</h4>
              <p class="widget-description">Embed a google Sheet.</p>
              <button class="add-widget-btn w-100 text-center" data-widget="google_sheets">
                <i class="fas fa-plus"></i> Add widget
              </button>
            </div>
          </div>

          <!-- embed youtube video -->
          <div class="widget-card border-purple">
            <div class="widget-header bg-purple">
              <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShSaybPbag5QPl6nD03r7Xp9FfL3pUM_MrAQ&s" class="w-100 h-100 object-cover" alt="youtube videos">
            </div>
            <div class="widget-body">
              <h4 class="widget-title">Youtube</h4>
              <p class="widget-description">Embed a Youtube video.</p>
              <button class="add-widget-btn w-100 text-center" data-widget="youtube">
                <i class="fas fa-plus"></i> Add widget
              </button>
            </div>
          </div>

          <!-- figma widget -->
          <div class="widget-card border-purple">
            <div class="widget-header bg-purple">
              <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS8AAACmCAMAAAC8yPlOAAABIFBMVEX/////Nzf/cjeHT/8ky3EAtv/w8PDp6en/WDf/dDeBRP//LS3/bS3Jtf8MyWr/NiWKSP//ior/p4q6Rr8ez2qq5sAAsv9blr3/aiUAs///zr8Auf//FRV/P/8AyGX/JCT/6OH/uLj/YxT/qqr/4eH/2trL7P/2/P97N/+m3v/W8P/Uuv9/0f9XiP/l2//A7dGG3qnS8t6f47n/z8//lJT/mYr/r5X/wa3/2s//YGD/US3/i2D/QUH/eUP/r6//np7/eXn/m3n/kmv/UVD/glDSmd7EZcnelL//07/Xvb+yrb+bor+Knr+4yd3Yyv+mgf9cy//y7f+UZP+edf+KnP+8o/+1l/9Lw//R7v/d0f+hwtV0psVZ1Izu+vNl1pTK8NjTOOSXAAAEdElEQVR4nO3aaVvaTBQGYBtJF6W8doESIxGjQhWLW2tr97f76taFLir//180SKVAZuYkl1xz0p7n/uAnP5x5rjMnkyFj5yGNMQAAAAAAAAAAAAAAAAAAAAAA+JdtPr59JebO1Zitu/e4S+U3tz0zOzsZdz8fVy6HD6a5C2Y1Pzk7eU7p4iVHJcrsLnfRbBYezqrD0ucVKT+qchfOY25Gm5YpL8cJRW7KeVNcxrycUOCeNHYXkZfADlswx0Xk5YRV7gVY9tAcF5WX84h7AXbN65+MyfISdqzQnLqS5+WUuZdg0xzVXgnykjTyt8/eX/kH3IuwiHg4JsnLCbkXYc8muR0T5FWWc1vxeCR5yXlC3ibHV4K88lvcy7Dmykjyusq9DGuQVzpPsB9ToY+rSea9nAPr4kjyqnIvw56R5MW9CIuejuB96H/uRVhEH/Dp9205x/sx+rqQzkvWheEm9cZN5RWKai/6RofIK/+MewG2nTEv7vKtI34gIn5Pq3KXb9/iGX6vrXIXz2HhnGFPGvLKO1Xu0pk8ndEmps0rH0o6qA5Z3NYlpvueKXxW5S6a1cKT5zP/KdwvK4QvtqrcBfNrvnx1Leb1m+meN9Nv373/8OH9x2XuUvnt7FYqU+MxE5f//Ettz3Vd3/ddt+Tt1fhKzYDGuCqsgbyWopTcHq/ky01s/6CiDKsvr7pfcoeUWnXesrnsaHqrL69aLK1Oj3ki51jjpjat07yWVHF1WkzgntwxxdXNS9ld3cDEddi+Ma6TvJa1cUWkzbAD/ew6zcs3xOXtcS/Arob2ydjLSze8RI4wc3ed5OWZ4nLdFvcSbNoh2ivKSz/sfzeYpJH/ieyvxp45Ltdb4V6ERVR7Rf1FxBW9UXIvwp4mmdfUZ9PTsbsh5RwpGhNkXrfovOQ8Ib+MIi9viXsZ1nxFXqkgr3RGsh9LcvLCvE8H54mUcF5NZzfB+xDxvi3qfQjv2ynR+9F4XegKu88hG4y+LxTVXuSNTuc+umWYYKKmV8e++QjWyatuaDBJD8euJv172jdtYJ6gs9ep7/TvtbpnpLTh1dWcIL8HWPYUM8zzBXZXR31X22K9701a8e9NpI36Pt8Pbqrn/p/vmWr+4PdMLZF7saf5dbwyMRVT6ftebnnFL5VKnhf98Vdkp3Xiwo+fN2I+DvxLvbYU+SZ0bvVbX8sF1xWK3IVl0mouKORUCsgr7ugwUIaFvJTWNb2FvJRWtc2FvBTWTXEhr2FHxriQ17BDY1zIa4hxeCGvGHNayGsI1V7Ia9Cx/uSFvBSo9kJeA8xnL+Q1rEhtR+Q1YAN5pbKGvFJBXulgP6ZDz/ugzV1jltDnieCIu8ZMIfPKcVeYLcfU+FrjrjBbqPftYJ27wowh+uuQu76sKRobDO0VY7qPLhxzV5c9xt87uIvLorY2MJy9lHTPSAwvjbbqe4BCDt2lo/jeJMCoNxn8nqkQHGIvEtrHhaBwIsitIa0kjlaLGxvFNuYWAAAAAAAAAAAAAAAAAAAAwF/hAqTxC56Kqy3NDxkzAAAAAElFTkSuQmCC" class="w-100 h-100 object-cover" alt="figma prototype">
            </div>
            <div class="widget-body">
              <h4 class="widget-title">Figma</h4>
              <p class="widget-description">Embed a Figma Prototype.</p>
              <button class="add-widget-btn w-100 text-center" data-widget="figma">
                <i class="fas fa-plus"></i> Add widget
              </button>
            </div>
          </div>




















              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




<!-- Remove widget from users account -->
<div class="modal fade" id="confirmRemoveWidgetModal" tabindex="-1" aria-labelledby="removeWidgetModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-danger">
      <div class="modal-header">
        <h5 class="modal-title text-danger">Remove Widget</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to remove this widget from your dashboard? It wont be deleted from the organization.
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-danger" id="confirmRemoveBtn">Yes, Remove</button>
      </div>
    </div>
  </div>
</div>




<!-- ----------------------------------------------------------------------------------------------------------------------------------------------- -->
<!-- Include Prism.js for syntax highlighting---------------------------------------------------------------------------------------- -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-html.min.js"></script>
<!-- csrf token  -->
<script>
  const csrf_token = '{{ csrf_token }}';
</script>

<!-- /Tasks and dashboard-->
<script type="text/javascript">
    // Inject Django variables into the window object
    window.djangoData = {
        orgId: "{{ organization.id }}",
    };
</script>
<!-- Link your JS file -->
<script src="{% static 'workspace/organization_tasks.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- link widgets files----------------------------------------------------------------------------------------- -->
<script src="{% static 'workspace/widgets.js'%}"></script> 
<!-- calculation widget -->
<script src="{% static 'workspace/widgets/calculation_widget.js'%}"></script>
<!-- workload widget -->
<script src="{% static 'workspace/widgets/workload_widget.js'%}"></script>
<!-- progress widget 2) task overdue widget 3)tasks overdue soon in 14 days-->
<script src="{% static 'workspace/widgets/progress_widget.js'%}"></script> 
<!-- bookmarks widget 2) resources widget  3)recent activity widget-->
<script src="{% static 'workspace/widgets/bookmarks_widget.js'%}"></script>
<!-- channels widget -->
<script src="{% static 'workspace/widgets/channels_widget.js'%}"></script> 
<!-- time tracked widget  2)high priority tasks 3) Total calpoints earned widget 4) Google Docs 5)Google sheets  6)Embed youtube videos 7)Figma-->
<script src="{% static 'workspace/widgets/time_traced_widget.js'%}"></script> 
<!-- ------------------------------------------------------------------------------------------------------------- -->
 


<!-- ----------------------------------------------------------------------------------------------------------------------------- -->
<!-- Bootstrap 5 JS Bundle (includes Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- link js file -->
<script src="{% static 'workspace/org.js'%}"></script>
<!-- Link new js file and configure attributes  -->
<script type="text/javascript">
    // Inject Django variables into the window object
    window.djangoData = {
        orgId: "{{ organization.id }}",
    };
</script>


<!-- jQuery (Required for AJAX) -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<!-- Bootstrap JS (Optional, for modal functionality) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const editOrgForm = document.getElementById("editOrgForm");

    editOrgForm.addEventListener("submit", async function (event) {
        event.preventDefault();

        const orgId = document.getElementById("orgId").value;
        const name = document.getElementById("orgName").value;
        const description = document.getElementById("orgDescription").value;

        const csrfToken = document.querySelector("input[name='csrfmiddlewaretoken']").value;

        const response = await fetch(`/organizations/modify-organization/${orgId}/`, {
            method: "POST",
            headers: {
                "X-CSRFToken": csrfToken,
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: `name=${encodeURIComponent(name)}&description=${encodeURIComponent(description)}`,
        });

        const data = await response.json();
        if (data.success) {
            alert("Organization updated successfully!");
            location.reload(); // Reload page to reflect changes
        } else {
            alert(data.error);
        }
    });
});




// Fetch Invitations
document.addEventListener("DOMContentLoaded", function () {
    const orgId = "{{ organization.id }}";  // Pass organization ID dynamically
    const invitationsTableBody = document.getElementById("invitationsTableBody");

    // Fetch invitations for the organization when the modal is shown
    const invitationsModal = document.getElementById("invitationsModal");
    invitationsModal.addEventListener("show.bs.modal", async function () {
        const response = await fetch(`/organizations/workspace-invitations/${orgId}/`);  // Update with actual URL
        const data = await response.json();

        // Clear the previous table data
        invitationsTableBody.innerHTML = "";

        // Get the current date
        const now = new Date();

        // Loop through the invitations and add them to the table
        data.invitations.forEach(invitation => {
            const expiresAt = new Date(invitation.expires_at);
            const expirationText = now > expiresAt ? "Expired" : invitation.expires_at;

            const row = document.createElement("tr");

            row.innerHTML = `
                <td>${invitation.inviter}</td>
                <td>${invitation.invitee_email}</td>
                <td>${invitation.role}</td>
                <td>${invitation.status}</td>
                <td>${expirationText}</td>
            `;

            invitationsTableBody.appendChild(row);
        });
    });
});


// MONITOR SUSPENSIONS
document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("suspendUsersModal");
    const userListContainer = document.getElementById("userListContainer");
    const orgId = "{{organization.id}}"; // Change this dynamically as per your org setup

    modal.addEventListener("show.bs.modal", function () {
        fetch(`/organizations/organization/${orgId}/members/`)
            .then(response => response.json())
            .then(data => {
                if (data.status === "success") {
                    userListContainer.innerHTML = "";
                    data.members.forEach(member => {
                        const userRow = document.createElement("div");
                        userRow.classList.add("d-flex", "justify-content-between", "align-items-center", "p-2", "border-bottom");

                        userRow.innerHTML = `
                            <div>
                                <strong>${member.name}</strong> <span class="text-muted">(${member.role})</span>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input suspend-toggle" type="checkbox" 
                                       data-user-id="${member.id}" ${member.is_suspended ? "checked" : ""}>
                            </div>
                        `;

                        userListContainer.appendChild(userRow);
                    });

                    // Attach event listeners to all toggle buttons
                    document.querySelectorAll(".suspend-toggle").forEach(toggle => {
                        toggle.addEventListener("change", function () {
                            const userId = this.getAttribute("data-user-id");
                            const action = this.checked ? "ban" : "unban";

                            fetch(`/organizations/organization/${orgId}/suspend/${userId}/${action}/`, {
                                method: "POST",
                                headers: { "X-CSRFToken": getCSRFToken() },
                            })
                                .then(response => response.json())
                                .then(response => {
                                    alert(response.message);
                                })
                                .catch(error => console.error("Error:", error));
                        });
                    });
                } else {
                    userListContainer.innerHTML = "<p class='text-danger'>Failed to load users.</p>";
                }
            })
            .catch(error => {
                userListContainer.innerHTML = "<p class='text-danger'>Error fetching users.</p>";
            });
    });

    // Function to get CSRF Token from cookies
    function getCSRFToken() {
        let cookieValue = null;
        let cookies = document.cookie.split(';');
        cookies.forEach(cookie => {
            let trimmedCookie = cookie.trim();
            if (trimmedCookie.startsWith("csrftoken=")) {
                cookieValue = trimmedCookie.substring("csrftoken=".length, trimmedCookie.length);
            }
        });
        return cookieValue;
    }
});



// CREATE MEETINGS VIA NLP


// CREATE MEETINGS VIA NLP
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("createMeetingBtnn").addEventListener("click", function () {
        let inputText = document.getElementById("nlpInput").value.trim();
        let orgId = "{{organization.id}}";  // Replace dynamically in your template
        let createBtn = document.getElementById("createMeetingBtnn"); 
        let errorMessage = document.getElementById("errorMessage");
        console.log(inputText);

        if (!inputText) {
            errorMessage.textContent = "Please enter a meeting description!";
            errorMessage.style.display = "block";
            return;
        }

        // Show Spinner in Button
        createBtn.innerHTML = `<span class="spinner-border spinner-border-sm"></span> Scheduling...`;
        createBtn.disabled = true;  // Disable button during request

        fetch(`/organizations/create_meeting_from_nlp/${orgId}/`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": getCSRFToken(),  
            },
            body: JSON.stringify({ input_text: inputText }),  // No user_id needed!
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                errorMessage.textContent = data.error;
                errorMessage.style.display = "block";
            } else {
                alert(" Meeting Scheduled Successfully!");
                location.reload();
            }
        })
        .catch(error => {
            console.error("Error:", error);
            errorMessage.textContent = "Something went wrong!";
            errorMessage.style.display = "block";
        })
        .finally(() => {
            // Restore Button Text
            createBtn.innerHTML = `Create Meeting via NLP`;
            createBtn.disabled = false;  // Re-enable button after request
        });
    });
});

// Function to Get CSRF Token
function getCSRFToken() {
    let cookieValue = null;
    let cookies = document.cookie.split(";");

    cookies.forEach(cookie => {
        let [name, value] = cookie.trim().split("=");
        if (name === "csrftoken") {
            cookieValue = decodeURIComponent(value);
        }
    });

    return cookieValue;
}



// MEETING ANALYTICS 

document.addEventListener("DOMContentLoaded", function () {
    const chartDefaults = {
        maintainAspectRatio: false,
        responsive: true,
        plugins: {
            legend: {
                position: 'top',
                labels: {
                    color: '#6c757d',
                    font: { size: 13 }
                }
            },
            tooltip: {
                backgroundColor: 'rgba(45,52,54,0.95)',
                titleFont: { size: 14 },
                bodyFont: { size: 13 },
                padding: 12,
                displayColors: true
            }
        },
        scales: {
            x: {
                grid: { color: 'rgba(0,0,0,0.05)' },
                ticks: { color: '#6c757d' }
            },
            y: {
                grid: { color: 'rgba(0,0,0,0.05)' },
                ticks: { color: '#6c757d' }
            }
        }
    };

    const analyticsModal = document.getElementById("OverviewMeetingModal");
    
    analyticsModal.addEventListener("show.bs.modal", function () {
        fetch(`/organizations/meeting_analytics/{{organization.id}}/`)
            .then(response => response.json())
            .then(data => {
                // Update Summary Stats
                document.getElementById("totalMeetings").textContent = data.total_meetings;
                document.getElementById("completedMeetings").textContent = data.completed_meetings;
                document.getElementById("canceledMeetings").textContent = data.canceled_meetings;
                document.getElementById("upcomingMeetings").textContent = data.upcoming_meetings;
                document.getElementById("avgDuration").textContent = data.avg_duration;
                document.getElementById("avgAttendees").textContent = data.avg_attendees;

                // Render Charts
                renderMeetingTypeChart(data.meeting_types);
                renderMeetingModeChart(data.meeting_modes);
                renderPeakHoursChart(data.peak_hours);
                renderTopHostsChart(data.top_hosts);
            })
            .catch(error => {
                console.error("Error fetching analytics:", error);
                // Add error handling UI here
            });
    });

    // Meeting Type Chart (Doughnut)
    function renderMeetingTypeChart(data) {
        const ctx = document.getElementById("meetingTypeChart").getContext('2d');
        new Chart(ctx, {
            ...chartDefaults,
            type: 'doughnut',
            data: {
                labels: data.map(item => item.meeting_type),
                datasets: [{
                    data: data.map(item => item.count),
                    backgroundColor: [
                        'rgba(99, 102, 241, 0.8)',
                        'rgba(14, 165, 233, 0.8)',
                        'rgba(245, 158, 11, 0.8)',
                        'rgba(16, 185, 129, 0.8)'
                    ],
                    borderWidth: 0,
                    hoverOffset: 8
                }]
            },
            options: {
                ...chartDefaults.options,
                cutout: '70%',
                plugins: {
                    ...chartDefaults.plugins,
                    legend: { position: 'right' }
                }
            }
        });
    }

    // Meeting Mode Chart (Horizontal Bar)
    function renderMeetingModeChart(data) {
        const ctx = document.getElementById("meetingModeChart").getContext('2d');
        new Chart(ctx, {
            ...chartDefaults,
            type: 'bar',
            data: {
                labels: data.map(item => item.meeting_location),
                datasets: [{
                    label: 'Meeting Modes',
                    data: data.map(item => item.count),
                    backgroundColor: createGradient(ctx, ['#6366f1', '#3b82f6']),
                    borderRadius: 6,
                    borderSkipped: false
                }]
            },
            options: {
                ...chartDefaults.options,
                indexAxis: 'y',
                plugins: {
                    ...chartDefaults.plugins,
                    legend: { display: false }
                }
            }
        });
    }

    // Peak Hours Chart (Line with Gradient)
    function renderPeakHoursChart(data) {
        const ctx = document.getElementById("peakHoursChart").getContext('2d');
        new Chart(ctx, {
            ...chartDefaults,
            type: 'line',
            data: {
                labels: data.map(item => item.start_time),
                datasets: [{
                    label: 'Peak Hours',
                    data: data.map(item => item.count),
                    borderColor: '#3b82f6',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: {
                        target: 'origin',
                        above: createGradient(ctx, ['#3b82f620', '#3b82f601'], 'vertical')
                    },
                    pointBackgroundColor: '#fff',
                    pointBorderWidth: 2
                }]
            }
        });
    }

    // Top Hosts Chart (Bar with Gradient)
    function renderTopHostsChart(data) {
    const ctx = document.getElementById("topHostsChart").getContext("2d");

    new Chart(ctx, {
        type: "bar",
        data: {
            labels: data.map(item => item.invitee_username), // Corrected label source
            datasets: [{
                label: "Meetings Hosted",
                data: data.map(item => item.count), // Matches backend count
                backgroundColor: createGradient(ctx, ["#6366f1", "#8b5cf6"]), // Gradient function
                borderRadius: 6,
                borderSkipped: false
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            return `Meetings: ${tooltipItem.raw}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { display: false }
                },
                x: {
                    grid: { display: false }
                }
            }
        }
    });
}

    // Gradient Helper Function
    function createGradient(ctx, colors, direction = 'horizontal') {
        const gradient = direction === 'horizontal' 
            ? ctx.createLinearGradient(0, 0, ctx.canvas.width, 0)
            : ctx.createLinearGradient(0, 0, 0, ctx.canvas.height);

        colors.forEach((color, index) => {
            gradient.addColorStop(index / (colors.length - 1), color);
        });
        return gradient;
    }
});


// HANDLE RECURRING MEETINGS

document.addEventListener("DOMContentLoaded", function () {
    // Capture data-org-id and data-user-id when opening modal
    const scheduleModal = document.getElementById("ScheduleMeetsModal");
    scheduleModal.addEventListener("show.bs.modal", function (event) {
        let button = event.relatedTarget;
        let orgId = button.getAttribute("data-org-id");
        let userId = button.getAttribute("data-user-id");

        document.getElementById("org_id").value = orgId;
        document.getElementById("user_id").value = userId;
    });

    // Show/hide custom days input
    document.getElementById("recurrence_type").addEventListener("change", function () {
        let customDaysContainer = document.getElementById("customDaysContainer");
        customDaysContainer.style.display = this.value === "custom" ? "block" : "none";
    });

    // Handle form submission via AJAX
    document.getElementById("scheduleMeetingForm").addEventListener("submit", function (event) {
        event.preventDefault();

        let formData = {
            org_id: document.getElementById("org_id").value,
            user_id: document.getElementById("user_id").value,
            recurrence_type: document.getElementById("recurrence_type").value,
            start_date: document.getElementById("start_date").value,
            end_date: document.getElementById("end_date").value || null,
            custom_days: Array.from(document.querySelectorAll("#customDaysContainer input:checked")).map(el => el.value),
            remind_before: document.getElementById("remind_before").value,
            send_email_reminder: document.getElementById("send_email_reminder").checked,
            send_push_notification: document.getElementById("send_push_notification").checked
        };

        fetch(`/organizations/create_recurring_meetings/${formData.org_id}/${formData.user_id}/`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": getCSRFToken()
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert("Error: " + data.error);
            } else {
                alert("Meeting Scheduled Successfully!");
                let modalInstance = bootstrap.Modal.getInstance(scheduleModal);
                modalInstance.hide();
            }
        })
        .catch(error => console.error("Error:", error));
    });

    // Get CSRF Token (if needed)
    function getCSRFToken() {
        return document.querySelector("[name=csrfmiddlewaretoken]")?.value;
    }
});






// MANAGE RECURRING MEETINGS



document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("ManageRecurringModal");
    modal.addEventListener("show.bs.modal", fetchMeetings);

    function fetchMeetings() {
        const meetingsContainer = document.getElementById("meetings-container");
        meetingsContainer.innerHTML = '<p class="text-center text-muted">Loading meetings...</p>';

        const orgId = "{{organization.id}}"; // Replace with dynamic org_id if needed
        fetch(`/organizations/recurring-meetings/${orgId}/`)
            .then(response => response.json())
            .then(data => {
                meetingsContainer.innerHTML = "";
                if (data.meetings.length === 0) {
                    meetingsContainer.innerHTML = '<p class="text-center text-muted">No recurring meetings found.</p>';
                    return;
                }

                data.meetings.forEach(meeting => {
                    const meetingItem = document.createElement("div");
                    meetingItem.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center");

                    meetingItem.innerHTML = `
                        <div>
                            <strong>${meeting.type}</strong> - ${meeting.recurrence_type} <br>
                            <small>Start: ${meeting.start_date} | End: ${meeting.end_date}</small>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                &#x22EE;
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item text-danger delete-meeting" data-id="${meeting.id}" href="#">Delete</a></li>
                            </ul>
                        </div>
                    `;

                    meetingsContainer.appendChild(meetingItem);
                });

                attachDeleteHandlers();
            })
            .catch(error => {
                console.error("Error fetching meetings:", error);
                meetingsContainer.innerHTML = '<p class="text-danger text-center">Failed to load meetings.</p>';
            });
    }

    function attachDeleteHandlers() {
        document.querySelectorAll(".delete-meeting").forEach(button => {
            button.addEventListener("click", function (event) {
                event.preventDefault();
                const meetingId = this.getAttribute("data-id");
                deleteMeeting(meetingId);
            });
        });
    }

    function deleteMeeting(meetingId) {
        const orgId = "{{organization.id}}"; // Replace with dynamic org_id if needed
        fetch(`/organizations/delete-recurring-meetings/${orgId}/${meetingId}/`,{
            method: "DELETE",
            headers: { "X-CSRFToken": getCSRFToken() }
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                fetchMeetings(); // Refresh meeting list
            }
        })
        .catch(error => console.error("Error deleting meeting:", error));
    }

    function getCSRFToken() {
        return document.cookie.split("; ")
            .find(row => row.startsWith("csrftoken"))
            ?.split("=")[1];
    }
});



// Meetings calendar

// Meetings calendar
document.addEventListener('DOMContentLoaded', function () {
    let calendar;

    // Open Modal & Initialize Calendar on Button Click
    $('#openCalendarBtn').on('click', function () {
        $('#calendarModal').modal('show'); // Show modal

        if (!calendar) { // Initialize only once
            setTimeout(() => {
                loadCalendar();
            }, 500);
        }
    });

    function loadCalendar() {
        let calendarEl = document.getElementById('calendar');
        let orgId = "{{organization.id}}"; // Replace with dynamic organization ID
        let eventsUrl = `/organizations/meetings-calendar-view/${orgId}/`; // Django view URL

        calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            eventClick: function (info) {
                showMeetingDetails(info.event);
            },
            events: function (fetchInfo, successCallback, failureCallback) {
                $.ajax({
                    url: eventsUrl,
                    type: "GET",
                    dataType: "json",
                    success: function (response) {
                        let events = response.meetings.map(meeting => ({
                            id: meeting.id,
                            title: meeting.title,
                            start: meeting.start,
                            end: meeting.end,
                    
                            extendedProps: {
                                description: meeting.description,
                                location: meeting.location,
                                meeting_link: meeting.meeting_link,
                                status: meeting.status,
                                user: meeting.user,
                                invitee: meeting.invitee
                            },
                            color: meeting.status === "completed" ? "green" : 
                                   meeting.status === "canceled" ? "red" : "#007bff"
                        }));
                        successCallback(events);
                    },
                    error: function () {
                        failureCallback();
                    }
                });
            }
        });

        calendar.render();
    }

    function showMeetingDetails(event) {
        $('#meetingTitle').text(event.title);
        $('#meetingUser').text(event.extendedProps.user || "Unknown");
        $('#meetingInvitee').text(event.extendedProps.invitee || "Unknown");
        $('#meetingDate').text(event.start.toLocaleDateString());
        $('#meetingTime').text(`${event.start.toLocaleTimeString()} - ${event.end ? event.end.toLocaleTimeString() : 'N/A'}`);
        $('#meetingLocation').text(event.extendedProps.location || "N/A");
        $('#meetingDescription').text(event.extendedProps.description || "No description available");
        $('#meetingStatus').text(event.extendedProps.status || "N/A");
        // Add "Remind Me" button
        $('#meetingReminderButton').html(`
            <button class="btn btn-warning mt-2" onclick="openReminderModal(${event.id})">Remind Me</button>
        `);

        if (event.extendedProps.meeting_link) {
            $('#meetingJoinButton').html(`<a href="${event.extendedProps.meeting_link}" target="_blank" class="btn btn-primary">Join Meeting</a>`);
        } else {
            $('#meetingJoinButton').html(`<span class="text-muted">No meeting link available</span>`);
        }

        // Add "Remind Me" button
        $('#meetingReminderButton').html(`
            <button class="btn btn-warning mt-2" onclick="openReminderModal(${event.id})">Remind Me</button>
        `);

        $('#meetingDetailsModal').modal('show'); // Open the details modal
    }

    // Open Reminder Modal
    window.openReminderModal = function (meetingId) {
        $('#reminderMeetingId').val(meetingId); // Set meeting ID in hidden field
        $('#MeetsReminderModal').modal('show'); // Open reminder modal
    };

    // Handle Reminder Form Submission
    $('#setReminderForm').on('submit', function (event) {
        event.preventDefault();

        let orgId = "{{organization.id}}"; // Dynamic organization ID
        let meetingId = $('#reminderMeetingId').val();
        let reminderTime = $('#reminderTime').val();
        let customMinutes = $('#customMinutes').val() || null;
        let customHours = $('#customHours').val() || null;
        let reminderType = $('#reminderType').val();
        let reminderStyle = $('#reminderStyle').val();
        let remindAllMembers = $('#remindAllMembers').is(':checked');

        $.ajax({
            url: `/organizations/meeting-reminder-ajax/${orgId}/${meetingId}/`,
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                reminder_time: reminderTime,
                custom_minutes: customMinutes,
                custom_hours: customHours,
                reminder_type: reminderType,
                reminder_style: reminderStyle,
                remind_all_members: remindAllMembers
            }),
            success: function (response) {
                alert("Reminder set successfully!");
                $('#MeetsReminderModal').modal('hide'); // Close modal
            },
            error: function (xhr) {
                alert("Failed to set reminder. Please try again.");
            }
        });
    });
});


// GENERATE EMBED CODE 
// Function to fetch and display embed code (Iframe + Script)
function generateEmbedCode(orgId) {
    fetch(`/organizations/generate-embed-code/${orgId}/`)
        .then(response => response.json())
        .then(data => {
            console.log("Response Data:", data);  // Debugging response data

            // Check if data contains embed_iframe and embed_script
            if (data.embed_iframe && data.embed_script) {
                document.getElementById("embedIframe").textContent = data.embed_iframe;
                document.getElementById("embedScript").textContent = data.embed_script;

                // Apply syntax highlighting
                Prism.highlightAll();

                // Show the modal after data is loaded
                let embedModal = new bootstrap.Modal(document.getElementById("embedModal"));
                embedModal.show();
            } else {
                alert(" Failed to generate embed code. Please try again.");
            }
        })
        .catch(error => {
            console.error("Error generating embed code:", error);
            alert(" An error occurred while generating the embed code.");
        });
}

// Attach event listener to the button
document.addEventListener("DOMContentLoaded", function () {
    const embedButton = document.getElementById("generateEmbedBtn");
    if (embedButton) {
        embedButton.addEventListener("click", function () {
            let orgId = this.getAttribute("data-org-id");
            generateEmbedCode(orgId);
        });
    }

    // Copy buttons for Iframe & Script
    document.getElementById("copyIframeBtn").addEventListener("click", function () {
        copyToClipboard("embedIframe");
    });

    document.getElementById("copyScriptBtn").addEventListener("click", function () {
        copyToClipboard("embedScript");
    });
});

// Function to copy text from a code block
function copyToClipboard(elementId) {
    let text = document.getElementById(elementId).textContent;
    navigator.clipboard.writeText(text).then(() => {
        alert(" Copied to clipboard!");
    }).catch(err => {
        console.error("Failed to copy:", err);
    });
}



// SHUTDOWN ALL MEETINGS
document.addEventListener("DOMContentLoaded", function () {
    const openModalBtn = document.getElementById("openDeleteMeetsModal");
    const confirmDeleteBtn = document.getElementById("confirmDeleteMeetings");
    const lastMeetingsContainer = document.getElementById("lastMeetingsContainer");
    const deletePasswordInput = document.getElementById("deletePassword");
    let orgId = null;

    if (openModalBtn) {
        openModalBtn.addEventListener("click", function () {
            orgId = this.getAttribute("data-org-id");
            fetchLastMeetings(orgId);
            let deleteMeetsModal = new bootstrap.Modal(document.getElementById("DeleteMeetsModal"));
            deleteMeetsModal.show();
        });
    }

    function fetchLastMeetings(orgId) {
        fetch(`/organizations/delete-all-meetings/${orgId}/`)
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    let meetingsHtml = data.last_meetings.length
                        ? data.last_meetings.map(meeting => `
                            <div class="alert alert-secondary">
                                <strong> ${meeting.title}</strong><br>
                                 ${meeting.date} at ${meeting.time}
                            </div>
                        `).join("")
                        : "<p>No recent meetings found.</p>";
                    lastMeetingsContainer.innerHTML = meetingsHtml;
                } else {
                    lastMeetingsContainer.innerHTML = `<p class="text-danger">${data.message}</p>`;
                }
            })
            .catch(error => {
                lastMeetingsContainer.innerHTML = `<p class="text-danger">Error fetching meetings.</p>`;
                console.error("Error fetching last meetings:", error);
            });
    }

    confirmDeleteBtn.addEventListener("click", function () {
        const password = deletePasswordInput.value.trim();
        if (!password) {
            alert(" Please enter your password to confirm deletion.");
            return;
        }

        // Show loading state on the button
        confirmDeleteBtn.innerHTML = `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Deleting...`;
        confirmDeleteBtn.disabled = true;

        fetch(`/organizations/delete-all-meetings/${orgId}/`, {
            method: "POST",
            headers: {
                "X-CSRFToken": getCSRFToken(),
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ password: password })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(` ${data.message}`);
                location.reload();
            } else {
                alert(` ${data.message}`);
            }
        })
        .catch(error => {
            alert(" Error deleting meetings.");
            console.error("Error deleting meetings:", error);
        })
        .finally(() => {
            // Reset button state after request completes
            confirmDeleteBtn.innerHTML = `Confirm Deletion`;
            confirmDeleteBtn.disabled = false;
        });
    });

    function getCSRFToken() {
        return document.cookie.split("; ")
            .find(row => row.startsWith("csrftoken="))
            ?.split("=")[1] || "";
    }
});



// -----------------------------------------------------------------------------------------------------------------------------------------------------
// Handle Organization Section Buttons Pop Up
document.addEventListener("DOMContentLoaded", function () {
    const manageMembersBtn = document.getElementById("manageMembersBtn");
    const popupButtons = document.getElementById("popupButtons");

    // Show popup on hover
    manageMembersBtn.addEventListener("mouseenter", function () {
        popupButtons.style.display = "block";
    });

    // Keep the popup visible when hovered
    popupButtons.addEventListener("mouseenter", function () {
        popupButtons.style.display = "block";
    });

    // Hide popup when mouse leaves both elements
    manageMembersBtn.addEventListener("mouseleave", function () {
        setTimeout(() => {
            if (!popupButtons.matches(":hover")) {
                popupButtons.style.display = "none";
            }
        }, 300); // Delay hiding for a smoother experience
    });

    popupButtons.addEventListener("mouseleave", function () {
        setTimeout(() => {
            if (!manageMembersBtn.matches(":hover")) {
                popupButtons.style.display = "none";
            }
        }, 300);
    });
});


// Meeting NLP Pop Ups
document.addEventListener("DOMContentLoaded", function () {
    const manageMembersBtn = document.getElementById("meetingBtn");
    const popupButtons = document.getElementById("meetsButtons");

    // Show popup on hover
    manageMembersBtn.addEventListener("mouseenter", function () {
        popupButtons.style.display = "block";
    });

    // Keep the popup visible when hovered
    popupButtons.addEventListener("mouseenter", function () {
        popupButtons.style.display = "block";
    });

    // Hide popup when mouse leaves both elements
    manageMembersBtn.addEventListener("mouseleave", function () {
        setTimeout(() => {
            if (!popupButtons.matches(":hover")) {
                popupButtons.style.display = "none";
            }
        }, 300); // Delay hiding for a smoother experience
    });

    popupButtons.addEventListener("mouseleave", function () {
        setTimeout(() => {
            if (!manageMembersBtn.matches(":hover")) {
                popupButtons.style.display = "none";
            }
        }, 300);
    });
});






// DRAG AND DROP CONTAINERS

document.addEventListener("DOMContentLoaded", function () {
    let draggedElement = null;
    let originalPosition = {};
    let isDragging = false;

    document.querySelectorAll(".material-card").forEach(container => {
        container.style.position = "relative"; // Ensure it can be moved
        container.style.cursor = "grab"; // Show grab cursor

        container.addEventListener("mousedown", function (e) {
            draggedElement = this;
            originalPosition = { left: this.offsetLeft, top: this.offsetTop };
            let shiftX = e.clientX - draggedElement.getBoundingClientRect().left;
            let shiftY = e.clientY - draggedElement.getBoundingClientRect().top;

            draggedElement.style.transition = "none"; // Remove transition while dragging
            draggedElement.style.cursor = "grabbing";
            isDragging = true;

            function moveAt(pageX, pageY) {
                draggedElement.style.position = "absolute";
                draggedElement.style.zIndex = "1000"; // Bring to front
                draggedElement.style.left = pageX - shiftX + "px";
                draggedElement.style.top = pageY - shiftY + "px";
            }

            function onMouseMove(event) {
                moveAt(event.pageX, event.pageY);
            }

            document.addEventListener("mousemove", onMouseMove);

            document.addEventListener("mouseup", function () {
                if (isDragging) {
                    document.removeEventListener("mousemove", onMouseMove);
                    draggedElement.style.cursor = "grab";
                    draggedElement.style.transition = "all 0.3s ease-in-out"; // Smooth transition after release
                    showUndoMessage(draggedElement, originalPosition);
                    isDragging = false;
                }
            }, { once: true });
        });

        container.ondragstart = function () {
            return false; // Prevents browser default drag behavior
        };
    });

    function showUndoMessage(element, originalPos) {
        let undoMessage = document.createElement("div");
        undoMessage.innerHTML = " Layout changed - <strong>Undo</strong>";

        // Apply styles directly via JS
        Object.assign(undoMessage.style, {
            position: "fixed",
            bottom: "20px",
            right: "20px",
            background: "linear-gradient(135deg, #6a11cb, #2575fc)", 
            color: "#fff",
            padding: "12px 20px",
            fontSize: "14px",
            fontWeight: "600",
            borderRadius: "8px",
            boxShadow: "0px 4px 10px rgba(0, 0, 0, 0.2)",
            cursor: "pointer",
            transition: "all 0.3s ease-in-out",
            zIndex: "2000",
            display: "flex",
            alignItems: "center",
            gap: "10px"
        });

        // Hover effect
        undoMessage.addEventListener("mouseenter", () => {
            undoMessage.style.transform = "translateY(-2px)";
            undoMessage.style.boxShadow = "0px 6px 15px rgba(0, 0, 0, 0.3)";
            undoMessage.style.opacity = "0.9";
        });

        undoMessage.addEventListener("mouseleave", () => {
            undoMessage.style.transform = "translateY(0)";
            undoMessage.style.boxShadow = "0px 4px 10px rgba(0, 0, 0, 0.2)";
            undoMessage.style.opacity = "1";
        });

        // Click to undo position
        undoMessage.addEventListener("click", function () {
            element.style.left = originalPos.left + "px";
            element.style.top = originalPos.top + "px";
            document.body.removeChild(undoMessage);
        });

        // Append to body
        document.body.appendChild(undoMessage);

        // Auto-hide after 5 seconds
        setTimeout(() => {
            if (undoMessage.parentElement) {
                document.body.removeChild(undoMessage);
            }
        }, 5000);
    }
});



// HANDLE THE GREETING

// MANAGE RECENT TABS

// MANAGE RECENT TABS
document.addEventListener("DOMContentLoaded", function () {
    const openModalBtn = document.getElementById("openRecentTabsModal");
    const modal = new bootstrap.Modal(document.getElementById("recentTabsModal"));
    const recentTabsContainer = document.getElementById("recentTabsContainer");
    const clearRecentTabsBtn = document.getElementById("clearRecentTabs");

    // Material Icons configuration
    const iconStyles = "text-gray-600 hover:text-blue-600 transition-colors duration-200";

    // Open modal and load recent tabs
    openModalBtn.addEventListener("click", function () {
        modal.show();
        fetchRecentTabs();
    });

    // Fetch recent tabs via AJAX
    function fetchRecentTabs() {
        fetch("/tasks/fetch-recent-tabs/")
            .then(response => response.json())
            .then(data => {
                recentTabsContainer.innerHTML = "";
                if (data.recent_tabs.length === 0) {
                    recentTabsContainer.innerHTML = `
                        <div class="flex items-center justify-center h-32">
                            <p class="text-gray-400 italic">No recent tabs found</p>
                        </div>`;
                    return;
                }
                
                recentTabsContainer.innerHTML = `
    <div class="flex justify-center w-full px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl w-full">
            ${data.recent_tabs.map(tab => `
                <div class="relative group bg-white/80 backdrop-blur-sm rounded-xl shadow-sm 
                          transition-all duration-300 hover:shadow-md border border-gray-200/50
                          hover:border-gray-300/70 overflow-hidden hover:bg-white/90">
                    <div class="relative aspect-video overflow-hidden">
                        <img src="${tab.screenshot || '/static/default.png'}" 
                             class="w-full h-full object-cover transition-transform 
                                    duration-300 group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900/10 via-transparent"></div>
                    </div>
                    
                    <div class="p-4 flex items-start justify-between">
                        <div class="pr-4 flex-1 min-w-0">
                            <p class="text-[13px] font-medium text-gray-800 truncate mb-1">
                                ${tab.title || 'Untitled Document'}
                            </p>
                            <p class="text-[11px] text-gray-500 font-light truncate">
                                ${new URL(tab.url).hostname}
                            </p>
                        </div>
                        
                        <a href="${tab.url}" 
                           class="flex items-center justify-center w-8 h-8 rounded-lg 
                                  bg-gray-100/50 hover:bg-gray-200/60 backdrop-blur-sm
                                  transition-colors duration-200 shadow-sm
                                  absolute right-3 top-3">
                            <span class="material-icons text-[18px] text-gray-600">open_in_new</span>
                        </a>
                    </div>
                </div>
            `).join('')}
        </div>
    </div>`;
            })
            .catch(error => console.error("Error fetching recent tabs:", error));
    }



    // Clear all recent tabs with animation
    clearRecentTabsBtn.addEventListener("click", function () {
        // Add shake animation
        recentTabsContainer.classList.add('animate-shake');
        setTimeout(() => {
            recentTabsContainer.classList.remove('animate-shake');
        }, 500);

        fetch("/tasks/clear-recent-tabs/", { method: "POST" })
            .then(response => response.json())
            .then(data => {
                // Show status message
                const alertDiv = document.createElement('div');
                alertDiv.className = `fixed top-4 right-4 px-6 py-3 rounded-lg bg-green-100 text-green-700 
                                     border border-green-200 flex items-center space-x-2 animate-slide-in`;
                alertDiv.innerHTML = `
                    <span class="material-icons text-green-600">check_circle</span>
                    <span>${data.message}</span>`;
                document.body.appendChild(alertDiv);

                // Remove alert after 3 seconds
                setTimeout(() => {
                    alertDiv.classList.add('opacity-0');
                    setTimeout(() => alertDiv.remove(), 300);
                }, 3000);

                fetchRecentTabs();
            })
            .catch(error => console.error("Error clearing tabs:", error));
    });
});

</script>

<!-- onboarding js set-up -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
  const hasSeenTour = localStorage.getItem("org_tour_seen9");

  if (!hasSeenTour) {
    const intro = introJs();

    intro.setOptions({
      steps: calendarPlusTourSteps,
      showProgress: true,
      nextLabel: "Next ",
      prevLabel: " Back",
      doneLabel: "Got it!",
      tooltipPosition: 'auto'
    });

    // Apply Tailwind styles to tooltip when it's created
    intro.onafterchange(() => {
      const tooltip = document.querySelector('.introjs-tooltip');
      if (tooltip) {
        tooltip.classList.add(
          'max-w-xl', // Wider tooltip
          'rounded-xl', // Rounded corners
          'shadow-lg', // Soft shadow
          'bg-white', // Background color
          'text-gray-800', // Font color
          'font-inter', // Modern font (if using Inter)
          'p-4', // Padding
          'whitespace-normal' // Wrap text
        );
      }
    });

    // Mark tour as seen
    intro.oncomplete(() => localStorage.setItem("org_tour_seen9", "yes"));
    intro.onexit(() => localStorage.setItem("org_tour_seen9", "yes"));

    intro.start();
  }
});

</script> 


<!-- add widgets styles -->
<style>
  /* Add widgets modal  */
:root {
    --clickup-purple: #7B68EE;
    --clickup-purple-light: #9C90ED;
    --clickup-purple-bg: rgba(123, 104, 238, 0.15);
    --clickup-teal: #36B37E;
    --clickup-teal-bg: rgba(54, 179, 126, 0.15);
    --clickup-blue: #4C9AFF;
    --clickup-blue-bg: rgba(76, 154, 255, 0.15);
    --clickup-yellow: #FFAB00;
    --clickup-yellow-bg: rgba(255, 171, 0, 0.15);
    --clickup-sidebar-bg: #FFFFFF;
    --clickup-sidebar-hover: #F5F5F5;
    --clickup-sidebar-active: #F0F0FF;
    --clickup-sidebar-text: #444;
    --clickup-sidebar-active-text: #7B68EE;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    color: #292D34;
  }
  
  .modal-dialog {
    max-width: 85%;
    height: 85vh;
  }
  
  .modal-content {
    height: 100%;
  }
  
  /* ClickUp Sidebar Styling */
  .clickup-sidebar {
    background-color: var(--clickup-sidebar-bg);
    width: 260px;
    border-right: 1px solid #EEEEEE;
  }
  
  .sidebar-item {
    display: flex;
    align-items: center;
    padding: 8px 16px;
    border-radius: 6px;
    margin-bottom: 4px;
    color: var(--clickup-sidebar-text);
    font-weight: 500;
    font-size: 14px;
    transition: all 0.15s ease;
  }
  
  .sidebar-item:hover {
    background-color: var(--clickup-sidebar-hover);
  }
  
  .sidebar-item.active {
    background-color: var(--clickup-sidebar-active);
    color: var(--clickup-sidebar-active-text);
  }
  
  .sidebar-item i {
    width: 20px;
    margin-right: 8px;
    font-size: 15px;
  }
  
  /* ClickUp Search Bar */
  .clickup-search {
    background-color: #F7F7F7;
    border: 1px solid #EEEEEE;
    border-radius: 6px;
    padding: 8px 16px 8px 36px;
    font-size: 14px;
    width: 100%;
    transition: all 0.2s ease;
  }
  
  .clickup-search:focus {
    outline: none;
    border-color: var(--clickup-purple-light);
    background-color: #FFFFFF;
    box-shadow: 0 0 0 2px rgba(123, 104, 238, 0.2);
  }
  
  .search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #6B7280;
    font-size: 14px;
  }
  
  /* ClickUp Widget Cards */
  .widget-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
  }
  
  .widget-card {
    border-radius: 10px;
    overflow: hidden;
    border: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    transition: all 0.2s ease;
    height: 100%;
  }
  
  .widget-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  }
  
  .widget-header {
    padding: 0;
    height: 140px;
    position: relative;
    overflow: hidden;
  }
  
  .widget-body {
    padding: 16px;
  }
  
  .widget-title {
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 4px;
  }
  
  .widget-description {
    font-size: 13px;
    color: #6B7280;
    line-height: 1.4;
  }
  
  .add-widget-btn {
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    border-radius: 4px;
    margin-top: 12px;
    transition: all 0.15s ease;
    background-color: transparent;
    border: 1px solid #D1D5DB;
    color: #4B5563;
  }
  
  .add-widget-btn:hover {
    background-color: #F9FAFB;
    border-color: #9CA3AF;
  }
  
  .add-widget-btn i {
    margin-right: 6px;
    font-size: 12px;
  }
  
  /* Widget Colors */
  .bg-purple {
    background-color: var(--clickup-purple-bg);
  }
  
  .border-purple {
    border-left: 3px solid var(--clickup-purple);
  }
  
  .bg-teal {
    background-color: var(--clickup-teal-bg);
  }
  
  .border-teal {
    border-left: 3px solid var(--clickup-teal);
  }
  
  .bg-blue {
    background-color: var(--clickup-blue-bg);
  }
  
  .border-blue {
    border-left: 3px solid var(--clickup-blue);
  }
  
  .bg-yellow {
    background-color: var(--clickup-yellow-bg);
  }
  
  .border-yellow {
    border-left: 3px solid var(--clickup-yellow);
  }
  
  /* Modal Header Tabs */
  .modal-header {
    border-bottom: none;
    padding-bottom: 0;
  }
  
  .modal-tabs {
    border-bottom: 1px solid #EEEEEE;
    padding: 0 24px;
    margin-bottom: 24px;
  }
  
  .modal-tab {
    padding: 12px 8px;
    margin: 0 8px;
    font-weight: 500;
    font-size: 14px;
    color: #6B7280;
    border-bottom: 2px solid transparent;
    transition: all 0.2s ease;
  }
  
  .modal-tab.active {
    color: var(--clickup-purple);
    border-bottom-color: var(--clickup-purple);
  }
  
  /* Scrollable Area */
  .scrollable-content {
    height: calc(100% - 60px);
    overflow-y: auto;
    padding: 24px;
  }
  
  /* Close Button */
  .close-btn {
    background: transparent;
    border: none;
    font-size: 20px;
    color: #6B7280;
    padding: 4px;
  }
  
  /* Custom Scrollbar */
  .scrollable-content::-webkit-scrollbar {
    width: 8px;
  }
  
  .scrollable-content::-webkit-scrollbar-track {
    background: #F9FAFB;
  }
  
  .scrollable-content::-webkit-scrollbar-thumb {
    background-color: #D1D5DB;
    border-radius: 4px;
  }
  
  .scrollable-content::-webkit-scrollbar-thumb:hover {
    background-color: #9CA3AF;
  }

</style>

</body>
</html>


