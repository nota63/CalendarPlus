<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Event â€¢ {{ organization.name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(8px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .slack-input:focus {
            box-shadow: 0 0 0 1px #4A154B;
            border-color: #4A154B;
        }
    </style>
</head>
<body class="bg-[#F8F8F8] font-sans">
    <div class="max-w-3xl mx-auto p-5 mt-8 fade-in">
        <div class="bg-white rounded-lg shadow-sm border border-[#E8E8E8]">
            <div class="p-6 border-b border-[#E8E8E8]">
                <h1 class="text-2xl font-bold text-[#1D1C1D]">Create New Event</h1>
                <p class="text-[#616061] mt-1">For {{ organization.name }}</p>
            </div>

            <form method="POST" class="space-y-6 p-6">
                {% csrf_token %}
                
                <!-- Event Name -->
                <div>
                    <label class="block text-sm font-semibold text-[#1D1C1D] mb-2">Event Name</label>
                    <input type="text" id="event_name" name="event_name" required onkeyup="updatePreview()"
                           class="w-full px-4 py-2.5 text-[#1D1C1D] border border-[#DDDDDD] rounded-[4px] slack-input focus:ring-0 focus:shadow-none placeholder-[#9E9D9E]">
                </div>

                <!-- Duration -->
                <div>
                    <label class="block text-sm font-semibold text-[#1D1C1D] mb-3">Duration</label>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="flex items-center space-x-3 p-3 border border-[#DDDDDD] rounded-[4px] hover:border-[#B0ADB0]">
                            <input type="radio" id="duration_15" name="duration" value="15" required 
                                   class="h-4 w-4 text-[#4A154B] border-[#B0ADB0] focus:ring-[#4A154B]">
                            <label for="duration_15" class="text-[#1D1C1D]">15 min</label>
                        </div>
                        <!-- Repeat similar structure for other durations -->
                    </div>
                    <div class="mt-4">
                        <input type="number" id="custom_duration" name="custom_duration" min="1" 
                               class="w-full px-4 py-2.5 text-[#1D1C1D] border border-[#DDDDDD] rounded-[4px] slack-input placeholder-[#9E9D9E]"
                               placeholder="Custom duration (minutes)">
                    </div>
                </div>

                <!-- Location -->
                <div>
                    <label class="block text-sm font-semibold text-[#1D1C1D] mb-3">Location</label>
                    <div class="grid grid-cols-2 gap-3">
                        {% for location in locations %}
                        <div class="relative">
                            <input type="radio" id="{{ location.0 }}" name="location" value="{{ location.0 }}" required 
                                   class="absolute opacity-0 peer">
                            <label for="{{ location.0 }}" class="block p-4 border border-[#DDDDDD] rounded-[4px] hover:border-[#B0ADB0] peer-checked:border-[#4A154B] peer-checked:bg-[#F8F3F9]">
                                <div class="flex items-center space-x-3">
                                    <img src="{{ location.2 }}" alt="{{ location.1 }}" class="w-10 h-10 rounded-full">
                                    <span class="text-[#1D1C1D]">{{ location.1 }}</span>
                                </div>
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Description -->
                <div>
                    <label class="block text-sm font-semibold text-[#1D1C1D] mb-2">Description</label>
                    <textarea id="description" name="description" rows="4"
                              class="w-full px-4 py-2.5 text-[#1D1C1D] border border-[#DDDDDD] rounded-[4px] slack-input placeholder-[#9E9D9E]"></textarea>
                </div>

                <!-- Options -->
                <div class="space-y-4">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="is_recurring" name="is_recurring"
                               class="h-4 w-4 text-[#4A154B] border-[#B0ADB0] rounded-[3px] focus:ring-[#4A154B]">
                        <label for="is_recurring" class="text-[#1D1C1D]">Recurring event</label>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-[#1D1C1D] mb-2">Buffer Time (minutes)</label>
                        <input type="number" id="buffer_time" name="buffer_time" value="0"
                               class="w-full px-4 py-2.5 text-[#1D1C1D] border border-[#DDDDDD] rounded-[4px] slack-input placeholder-[#9E9D9E]">
                    </div>
                </div>

                <button type="submit" class="w-full bg-[#4A154B] text-white py-3 rounded-[4px] font-semibold hover:bg-[#3A0E3B] focus:outline-none focus:shadow-[0_0_0_2px_white,0_0_0_4px_#4A154B]">
                    Create Event
                </button>
            </form>
        </div>

        <!-- Preview -->
        <div class="mt-6 bg-white rounded-lg border border-[#E8E8E8] p-5">
            <h3 class="text-sm font-semibold text-[#616061] mb-4">PREVIEW</h3>
            <div class="space-y-2">
                <p class="text-[#1D1C1D]"><span class="text-[#616061]">Event:</span> <span id="event_name_preview" class="font-medium">-</span></p>
                <p class="text-[#1D1C1D]"><span class="text-[#616061]">Where:</span> <span id="location_preview" class="font-medium">-</span></p>
                <p class="text-[#1D1C1D]"><span class="text-[#616061]">Duration:</span> <span id="duration_preview" class="font-medium">-</span></p>
            </div>
        </div>
    </div>


    <script>
        // Function to update the live preview
        function updatePreview() {
            var eventName = document.getElementById("event_name").value;
            document.getElementById("event_name_preview").textContent = eventName;
        }

        // Function to update location preview
        function updateLocation(location) {
            document.getElementById("location_preview").textContent = location;
        }

        // Function to update duration preview
        document.querySelectorAll('input[name="duration"]').forEach(function (radio) {
            radio.addEventListener('change', function () {
                var duration = document.querySelector('input[name="duration"]:checked');
                document.getElementById("duration_preview").textContent = duration ? duration.value + ' minutes' : 'N/A';

                // When a predefined duration is selected, clear the custom duration input
                document.getElementById("custom_duration").value = '';
            });
        });

        // Function to handle custom duration input
        document.getElementById("custom_duration").addEventListener('input', function () {
            var customDuration = document.getElementById("custom_duration").value;
            if (customDuration) {
                document.getElementById("duration_preview").textContent = customDuration + ' minutes';

                // When custom duration is entered, uncheck the predefined duration
                document.querySelectorAll('input[name="duration"]').forEach(function (radio) {
                    radio.checked = false;
                });
            }
        });

        // Update the preview as user types
        updatePreview();
    </script>


    <!-- Original JavaScript preserved here -->
</body>
</html>
